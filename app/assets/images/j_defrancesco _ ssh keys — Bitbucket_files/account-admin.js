webpackJsonp([3],{1010:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=a(r);t.default=(0,i.default)("#addon-directory, #addon-management").data("target-user"),e.exports=t.default},1023:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(92),i=a(r);t.default=function(){return"chrome"===i.default.browser.toLowerCase()&&i.default.browserVersion>=40},e.exports=t.default},1026:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return s.default.reduce((0,i.default)(e).children(),function(e,t){var n=(0,i.default)(t).children().remove().text();return e[(0,i.default)(t).text().trim()]=n,e},{})};var r=n(0),i=a(r),o=n(2),s=a(o);e.exports=t.default},1033:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=a(r),o=n(990),s=a(o),l=n(0),u=a(l),d=n(1023),c=a(d);t.default=function(){function e(){a.find(".aui-message").remove()}function t(e){i.default.messages.error(a,{body:e,closeable:!1,insert:"prepend"})}function n(e){var n=gettext("Refresh"),i='<button class="aui-button aui-button-link js-retry" type="button">'+n+"</button>",o=interpolate(gettext("A timeout occurred before you could do anything with your security key. %(refresh)s and then try again."),{refresh:i},!0),l=interpolate(gettext("Something went wrong. %(refresh)s and then try again."),{refresh:i},!0);return(0,c.default)()?void(r||(r=!0,s.default.sign(e,function(e){r=!1,"u2f"===a[0].mode.value&&(e.errorCode?t(5===e.errorCode?o:l):(a[0].u2f.value=JSON.stringify(e),a.submit()))}))):t(gettext("You can't log in with this device because you aren't using the latest Google Chrome."))}var a=(0,u.default)("#second-factor-form"),r=!1,o=a.data("u2fRegisteredKeys");a.on("click",".js-retry",function(t){t.preventDefault(),e(),o&&n(o)}),a.on("click",".js-toggle-mode",function(t){t.preventDefault(),e(),"token"===a[0].mode.value?(a[0].mode.value="u2f",a.find(".token-fields").addClass("hidden"),a.find(".u2f-fields").removeClass("hidden"),n(o)):(a[0].mode.value="token",a.find(".u2f-fields").addClass("hidden"),a.find(".token-fields").removeClass("hidden"),a.find('[name="token"]').focus())}),o&&"u2f"===a[0].mode.value&&n(o)},e.exports=t.default},1043:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=a(r),o=n(1048),s=a(o),l=n(987),u=a(l),d=n(478),c=a(d);t.default=s.default.extend({apiVersion:2,model:u.default,url:function(){return"{}/repositories/{}/pullrequests".format(this.getApiRoot(),this.repository.id)},load:function(e){var t=this.find(function(t){return t===e});if(void 0===t){var n=new c.default({repository:this.repository});t=new u.default({destination:n,local_id:e})}return t},initialize:function(e,t){t=t||{},this.repository=t.repository},updateRefs:function(){var e=new i.default.Deferred,t=this.length,n=0,a=0;return this.each(function(r){r.updateRef().done(function(){e.notify(++n,t),n===t&&e.resolve()}).always(function(){++a===t&&n!==t&&e.reject()})}),e}}),e.exports=t.default},1044:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(220),i=a(r),o=n(1046),s=a(o);t.default=i.default.extend({apiVersion:1,model:s.default,initialize:function(e,t){t=t||{},this.owner=t.owner||null},url:function(){return"{}/repositories".format(this.getApiRoot())},load:function(e,t){if(this.get(e))return this.get(e);var n=s.default.fromFullSlug(e,t);return this.add(n),n}}),e.exports=t.default},1045:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(220),i=a(r),o=n(1047),s=a(o);t.default=i.default.extend({apiVersion:1,model:s.default,url:function(){return"{}/users".format(this.getApiRoot())},load:function(e){if(this.get(e))return this.get(e);var t=new s.default({username:e});return this.add(t),t}}),e.exports=t.default},1046:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=a(r),o=n(2),s=a(o),l=n(116),u=a(l),d=n(175),c=a(d),f=n(503),p=a(f),m=n(1043),h=a(m),g=u.default.extend({apiVersion:1,urlRoot:function(){return"{}/repositories".format(this.getApiRoot())},url:function(){return"{}/repositories/{}".format(this.getApiRoot(),this.id)},initialize:function(){this.id="{}/{}".format(this.get("owner","username"),this.get("slug")),this.pullRequests=new h.default([],{repository:this})},parse:function(e){return e.owner=p.default.load(e.owner),e.fork_of&&(e.fork_of=g.fromFullSlug("{}/{}".format(e.fork_of.owner,e.fork_of.slug))),e},fork:function(e){var t=new i.default.Deferred,n={name:null};e&&(n.name=e);var a=function e(n){n.fetch({success:function(a){"available"===a.get("state")?t.resolve(n):setTimeout(function(){e(n)},1e3)},error:function(){t.reject()}})};return i.default.ajax({url:"{}/repositories/{}/fork".format(c.default.internal,this.id),type:"POST",data:JSON.stringify(n),dataType:"json",contentType:"application/json; charset=utf-8"}).done(function(e){var t=g.fromFullSlug(e.full_name);a(t)}).fail(function(e,n,a){t.reject()}),t},toJSON:function(){return{full_name:this.get("owner").get("username")+"/"+this.get("slug")}},pull:function(e){var t="{}/repositories/{}/pull".format(c.default.internal,this.id);return e&&(t="{}/{}".format(t,encodeURIComponent(e))),i.default.ajax({url:t,type:"PUT",dataType:"json"})},diff:function(e,t){return this.revspec(e,this,t)},twoway:function(e,t,n){var a=this.createRevSpec(e,t,n);return i.default.ajax({url:"{}/repositories/{}/twoway/{}?context=0".format(c.default.internal,this.id,a),type:"GET",dataType:"json",contentType:"application/json; charset=utf-8"})},revspec:function(e,t,n){var a=this.createRevSpec(e,t,n);return i.default.ajax({url:"{}/repositories/{}/revspec/{}?context=0".format(c.default.internal,this.id,a),type:"GET",dataType:"json",contentType:"application/json; charset=utf-8"})},createRevSpec:function(e,t,n){return"{}:{}..{}:{}".format(this.id,e,t.id,n)}},{fromFullSlug:function(e,t){var n=e.split("/"),a=n.pop(),r=n.length?n.pop():null,i=p.default.load(r),o=s.default.defaults({owner:i,slug:a},t);return new this(o)}});t.default=g,e.exports=t.default},1047:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(116),i=a(r);t.default=i.default.extend({apiVersion:1,urlRoot:function(){return"{}/users".format(this.getApiRoot())},idAttribute:"username"}),e.exports=t.default},1048:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=a(r),o=n(220),s=a(o);t.default=s.default.extend({constructor:function(e,t){this._page=1,s.default.apply(this,arguments)},_fetch:s.default.prototype.fetch,fetch:function(e){var t=i.default.clone(e||{});t.data=i.default.extend({page:this._page},t.data||{}),this._pagelen&&(t.data.pagelen=this._pagelen),this._fetch(t)},_parse:function(e){return this._size=e.size,this._pagelen||(this._pagelen=e.pagelen),this._pages=((this._size-1)/this._pagelen|0)+1,e.values},parse:function(e){return this._parse(e)},more:function(){if(this.hasMore())return this._page+=1,this.fetch({update:!0,remove:!1})},hasMore:function(){return this._pages&&this._page<this._pages}}),e.exports=t.default},116:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=a(r),o=n(10),s=a(o),l=n(175),u=a(l);t.default=s.default.Model.extend({apiVersion:2,getApiRoot:function(){return u.default[this.apiVersion]},get:function(e){for(var t=s.default.Model.prototype.get.call(this,e),n=arguments.length,a=Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return 0===a.length?t:t.get.apply(t,a)},toJSON:function(){if(this._isSerializing)return this.id||this.cid;this._isSerializing=!0;var e=i.default.clone(this.attributes);return i.default.each(e,function(t,n){t&&i.default.isFunction(t.toJSON)&&(e[n]=t.toJSON())}),this._isSerializing=!1,e}}),e.exports=t.default},123:function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},170:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={api:{internal:{ipWhitelist:function(e){return"/!api/internal/users/"+e+"/access-controls/ip-whitelist/"},themes:function(){return"/!api/internal/themes"},userTheme:function(e){return"/!api/internal/account/"+e+"/theme"}}},external:{ipWhitelistDocs:"https://confluence.atlassian.com/x/TY5qMw#Controlaccesstoyourprivatecontent-ip_whitelistingWhitelistingIPaddresses"},ui:{planSelector:function(e){return"/account/user/"+e+"/plans/"},billingDetails:function(e){return"/account/user/"+e+"/payment/"},accessControls:function(e){return"/account/user/"+e+"/access-controls/"},planUsers:function(e){return"/account/user/"+e+"/plan-users/"},fileStorageUsageHelp:"https://confluence.atlassian.com/x/MAFgDQ#BitbucketCloudplandetails-Plandetails",buildMinutesUsageHelp:"https://confluence.atlassian.com/x/MAFgDQ#BitbucketCloudplandetails-Plandetails",billingDetailsHelp:"https://confluence.atlassian.com/x/MAFgDQ",billingFAQ:"https://confluence.atlassian.com/x/MAFgDQ#BitbucketCloudplandetails-Frequentlyaskedquestions",billingContactUs:"https://www.atlassian.com/company/contact/purchasing-licensing",planDowngradeHelp:"https://confluence.atlassian.com/x/MAFgDQ",planDowngradeCancel:function(e,t){return"/account/user/"+e+"/upgrade/"+t}}},e.exports=t.default},175:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={internal:"/!api/internal",1:"/!api/1.0",2:"/!api/2.0"},e.exports=t.default},1771:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t){r!==s.default.username&&e.prepend(c.default.toHtml("target-user-template",{username:s.default.username,display_name:s.default.displayName,avatar:s.default.avatarUrl}));var o=i.default.chain(t.teams).filter(n).filter(a).value();i.default.each(o,function(t){e.append(c.default.toHtml("target-user-template",t))}),e.on("change",function(e){window.location.href=e.val})}function n(e){return e.username!==r}function a(e){return"admin"===e.privilege}var r=e.attr("data-target-user");e.auiSelect2({formatResult:p.default,formatSelection:p.default,dropdownAutoWidth:!0,minimumResultsForSearch:-1}),(0,u.default)().then(t)};var r=n(2),i=a(r);n(5);var o=n(12),s=a(o),l=n(223),u=a(l),d=n(8),c=a(d),f=n(294),p=a(f);e.exports=t.default},1772:function(e,t,n){"use strict";function a(e){var t=e.ips,n=t.current,a=t.saved,r=n.filter(function(e){return a.indexOf(e)===-1}),i=a.filter(function(e){return n.indexOf(e)===-1});return{added:r,removed:i}}Object.defineProperty(t,"__esModule",{value:!0}),t.getChangedIps=a},1773:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(e){var t=d.data("languages");return s.default.indexOf(t,r.val())<0}function n(t){!f&&e.data("banner-referrer")&&(c.default.trackEvent("i18n","Language field referrer","banner"),f=!0)}var a=e.closest("form"),r=(0,i.default)("#id_language_code"),o=(0,i.default)("#translate-progress-content"),l=null,d=(0,i.default)("#help-translate-message");r.on("change",function(){d.is(":visible")?t(r.val())||d.slideUp():t(r.val())&&d.slideDown()});var f=!1;r.on("change",function(){n(),l=i.default.get(o.attr("data-stats-url"))}),d.on("click",".translate-link",n);var p=r.val();a.on("submit",function(e){if(r.val()!==p){var t=p+" -> "+r.val();c.default.trackEvent("i18n","Save language change",t)}});var m=!1,h=new u.default({id:"translate-progress-dialog",title:gettext("This translation is incomplete"),content:o.show(),isSafeContent:!0,submitText:gettext("Save settings")}).on("submit",function(){m=!0,a.submit()});a.on("submit",function(e){function n(e){clearTimeout(u),s.removeClass("loading").removeAttr("aria-disabled").removeAttr("disabled"),(0,i.default)("#translate-progress-content").find("span.language").text(r.find(":selected").text()).end().find("span.percent").text(e).end().find(".progress").css("width",e+"%"),h.show()}var o=r.val();if(o!==p&&t(o)&&!m){e.preventDefault();var s=a.find("button[type=submit]"),u=setTimeout(function(){s.addClass("loading").attr("aria-disabled",!0).attr("disabled",!0)},400);l.done(function(e){n(e[o]||0)}).fail(function(){n(0)})}}),e.on("click",".translate-link",function(e){var t=(0,i.default)(e.target).attr("data-type");c.default.trackEvent("i18n","Translate",t)})};var r=n(0),i=a(r),o=n(2),s=a(o),l=n(47),u=a(l),d=n(39),c=a(d);e.exports=t.default},1874:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=a(r),o=n(47),s=a(o),l=n(1026),u=a(l),d=function(e,t,n){function a(){document.location.reload()}function r(e){var t=this,n=(0,u.default)(e.responseText);i.default.each(n,function(e,n){var a=t.find('[name="'+e+'"]');if(0!==a.length){var r=(0,i.default)("<div>").text(n).addClass("error");a.after(r)}}),this.find("button:submit").attr("aria-disabled",!1).removeClass("disabled")}function o(){var e=c.getContent();e.find(".error").remove();var t={key:e.find("#id_key").val(),label:e.find("#id_label").val()};return e.find("button:submit").attr("aria-disabled",!0).addClass("disabled"),n(t,{error:r.bind(e),success:a})}var l=t.find("button:submit"),d=t.find("h1"),c=new s.default({dialogId:e,size:"large",content:t,title:d.text(),submitText:l.text(),submitAction:o});return t.submit(function(e){e.preventDefault(),o()}),t.removeClass("hidden"),d.remove(),{show:function(){t.find(".error").remove(),c.show()},hide:function(){c.hide()},updateForm:function(e){e?(t.find("#ssh_pk").val(e.pk),t.find("#id_label").val(e.label),t.find("#id_key").attr("disabled","disabled").val(e.key),t.find("#id_key_group .description").show()):(t.find("#ssh_pk").val(""),t.find("#id_label").val(""),t.find("#id_key").removeAttr("disabled").val(""),t.find("#id_key_group .description").hide())}}};t.default=d,e.exports=t.default},1875:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=t.onEdit,a=t.onCreate,r=t.onDelete,o=(0,i.default)("#edit-ssh-key"),l=(0,i.default)("#new-ssh-key"),d=e.find("table.widget"),f=(0,c.default)("bb-edit-ssh-key-dialog",o,n);(0,i.default)(".edit-link").click(function(e){e.preventDefault();var t=(0,i.default)(e.target).closest(".ssh-key").data();f.updateForm(t),f.show()});var m=(0,c.default)("bb-new-ssh-key-dialog",l,a);m.updateForm(),(0,i.default)("#add-key").click(function(){m.show()}),e.on("click",'a[href="#delete"]',function(e){e.preventDefault();var t=(0,i.default)(this).closest("tr"),n=t.data().pk;(0,u.default)({id:"delete-ssh-key",title:gettext("Delete SSH key"),content:gettext("Are you sure you want to delete this SSH key?"),submitText:gettext("Delete")}).done(function(){var e=t.find("td.actions a[href=#delete]").loading();r(n,{success:function(){e.resolve(),t.remove(),d.find("tbody tr").length||d.find("tbody").html("<tr><td>There are no keys configured</td><td></td><td></td></tr>")},error:function(){e.reject(),(0,s.default)("There was an error communicating with the server, please try again.")}})})}),(0,i.default)(".ssh-key-copy-help."+p.default.os.toLowerCase()).show()};var r=n(0),i=a(r),o=n(85),s=a(o),l=n(54),u=a(l),d=n(1874),c=a(d),f=n(92),p=a(f);n(44),e.exports=t.default},1889:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=e.get("descriptor"),a=e.get("template")?gettext("You are adding <strong>%(addon)s (%(instance_url)s)</strong> to the <strong>%(user)s</strong> Bitbucket account.\n        <strong>%(addon)s</strong> will have access to:"):gettext("You are adding <strong>%(addon)s</strong> to the <strong>%(user)s</strong> Bitbucket account.\n        <strong>%(addon)s</strong> will have access to:");return(0,b.default)({hasRedirect:l.default.has(n,"modules.postInstallRedirect"),scopes:v.default.toHtml("scope-list-template",{scopes:l.default.sortBy(t,"name")}),staticUrl:(0,o.default)(document.body).attr("data-static-url"),addon:e.toJSON(),accessRequestBeforeMessage:interpolate(a,{addon:l.default.escape(n.name),instance_url:l.default.escape(n.baseUrl),user:l.default.escape(p.default.display_name)},!0)}).trim()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.get("descriptor");return(0,h.default)(n.scopes).then(function(a){if(a&&a.length){var i=interpolate(gettext("%(addon_name)s add-on is requesting access to Bitbucket"),{addon_name:n.name},!0);l.default.extend(t,{size:"medium",content:r(e,a),isSafeContent:!0,title:i,submitText:gettext("Grant access")});var o=(0,c.default)(t),s=a.map(function(e){return e.name});return o.fail(function(){(0,u.publishFact)(new _.AddonsScopesDeniedFact({url:n.baseUrl,key:n.key,scopes:s}))}),o}})};var i=n(0),o=a(i),s=n(7),l=a(s),u=n(34),d=n(54),c=a(d),f=n(1010),p=a(f),m=n(1025),h=a(m),g=n(8),v=a(g),y=n(3188),b=a(y),_=n(2737);e.exports=t.default},1890:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(1),u=a(l),d=n(5),c=a(d),f=n(20),p=a(f),m=n(117),h=a(m),g=n(7),v=n(726),y=a(v),b=n(107),_=a(b),w=n(383),x=a(w),E=n(707),T=(a(E),n(1910)),S=(a(T),function(e){function t(){var e,n,a,o;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.state={isUpdating:!1,isDeleting:!1,app:a.props.app},a.handleClickUpdate=function(){var e=x.default.api.internal.appVersions(a.props.targetUser,a.props.app.key);a.setState({isUpdating:!0}),p.default.post(e).then(function(e){a.setState({isUpdating:!1}),a.setState({app:e.data})}).catch(function(e){a.setState({isUpdating:!1}),a.displayError(e)})},a.handleClickRemove=function(){var e=x.default.api.internal.app(a.props.targetUser,a.props.app.key);a.setState({isDeleting:!0}),p.default.delete(e).then(function(e){a.setState({isDeleting:!1}),a.props.onAppDeleted(a.props.app)}).catch(function(e){a.setState({isDeleting:!1}),a.displayError(e)})},a.displayError=function(e){var t=(0,g.get)(e,"response.data.error.message")||gettext("An unexpected error occurred");c.default.messages.error({body:t})},a.isWorking=function(){return a.state.isUpdating||a.state.isDeleting},o=n,i(a,o)}return o(t,e),s(t,[{key:"render",value:function(){var e=this.state.app;return u.default.createElement("div",{className:"boxed-list--item"},u.default.createElement("div",{className:"directory-list--metadata-container"},u.default.createElement("div",{className:"directory-list--metadata"},u.default.createElement("h2",null,e.name),u.default.createElement("p",{className:"directory-list--author"},interpolate(gettext("Last updated %(date)s"),{date:(0,y.default)(e.updated_on)},!0)),u.default.createElement("a",{href:e.descriptor_url},e.descriptor_url)),u.default.createElement("div",{className:"directory-list--actions"},u.default.createElement(h.default,{iconBefore:this.state.isUpdating?u.default.createElement(_.default,{size:"small"}):null,isDisabled:this.isWorking(),onClick:this.handleClickUpdate},gettext("Update"))," ",u.default.createElement(h.default,{iconBefore:this.state.isDeleting?u.default.createElement(_.default,{size:"small"}):null,isDisabled:this.isWorking(),onClick:this.handleClickRemove},gettext("Remove")))),u.default.createElement("div",{className:"directory-list--item-description"},u.default.createElement("p",null,e.description)))}}]),t}(l.Component));t.default=S,e.exports=t.default},1891:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(1),u=a(l),d=n(20),c=a(d),f=n(117),p=a(f),m=n(7),h=n(296),g=a(h),v=n(107),y=a(v),b=n(530),_=a(b),w=n(383),x=a(w),E=function(e){function t(){var e,n,a,o;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.state={descriptorUrl:"",errorMessage:"",isLoading:!1},a.onDescriptorChange=function(e){var t=e.target;t instanceof window.HTMLInputElement&&a.setState({descriptorUrl:t.value,errorMessage:""})},a.isInputValid=function(){return RegExp("^https?://").test(a.state.descriptorUrl)},a.submit=function(){var e=x.default.api.internal.apps(a.props.targetUser);a.setState({isLoading:!0}),c.default.post(e,{descriptor_url:a.state.descriptorUrl}).then(function(e){a.setState({descriptorUrl:"",isLoading:!1}),a.props.onDialogDismissed(),a.props.onAppCreated(e.data)}).catch(function(e){var t=(0,m.get)(e,"response.data.error.message")||gettext("An unexpected error occurred");a.setState({errorMessage:t,isLoading:!1})})},o=n,i(a,o)}return o(t,e),s(t,[{key:"renderFooter",value:function(){return u.default.createElement("div",{style:{textAlign:"right"}},u.default.createElement(p.default,{appearance:"primary",iconBefore:this.state.isLoading?u.default.createElement(y.default,{size:"small",invertColor:!0}):null,invertColor:this,isDisabled:!this.isInputValid()||this.state.isLoading,onClick:this.submit},gettext("Create App"))," ",u.default.createElement(p.default,{onClick:this.props.onDialogDismissed},gettext("Cancel")))}},{key:"render",value:function(){var e=this;return u.default.createElement(g.default,{header:u.default.createElement("h3",null,gettext("Create App")),width:"small",isOpen:this.props.isOpen,onDialogDismissed:this.props.onDialogDismissed,footer:this.renderFooter()},u.default.createElement(_.default,{value:this.state.descriptorUrl,label:gettext("Descriptor URL"),type:"descriptor-url",placeholder:"https://",shouldFitContainer:!0,autoFocus:!0,isInvalid:!!this.state.errorMessage,invalidMessage:this.state.errorMessage,onChange:function(t){return e.onDescriptorChange(t)}}))}}]),t}(l.Component);t.default=E,e.exports=t.default},1892:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(1),u=a(l),d=n(20),c=a(d),f=n(117),p=a(f),m=n(1890),h=a(m),g=n(1891),v=a(g),y=n(707),b=(a(y),n(383)),_=a(b),w=n(385),x=a(w),E=function(e){function t(){var e,n,a,o;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.state={apps:[],loading:!0,createDialogIsOpen:!1},a.handleClickCreate=function(){a.setState({createDialogIsOpen:!0})},a.handleAppCreated=function(e){var t=a.state.apps;t.unshift(e),a.setState({apps:t})},a.handleAppDeleted=function(e){var t=a.state.apps;a.setState({apps:t.filter(function(t){return t.key!==e.key})})},o=n,i(a,o)}return o(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this,t=_.default.api.internal.apps(this.props.targetUser);c.default.get(t).then(function(t){e.setState({apps:t.data.values,loading:!1})})}},{key:"renderAppList",value:function(){var e=this;return u.default.createElement("div",null,u.default.createElement("div",{className:"aui-group aui-groups-split"},u.default.createElement("div",{className:"aui-item"},u.default.createElement("h1",null,gettext("Manage Apps"))),u.default.createElement("div",{className:"aui-item",style:{textAlign:"right"}},u.default.createElement(p.default,{onClick:this.handleClickCreate},gettext("Create App")))),u.default.createElement("div",{className:"aui-group"},u.default.createElement("div",{className:"aui-item"},u.default.createElement("div",{className:"boxed-list"},this.state.apps.map(function(t){return u.default.createElement(h.default,{key:t.key,app:t,targetUser:e.props.targetUser,onAppDeleted:e.handleAppDeleted})})))))}},{key:"renderBlankState",value:function(){return u.default.createElement("div",{className:"blank-state"},u.default.createElement("div",{className:"blank-state--image"},u.default.createElement("img",{src:x.default+"img/blank_slate/addons.svg",role:"presentation"})),u.default.createElement("h1",{className:"blank-state--heading"},gettext("Manage Apps")),u.default.createElement("p",{className:"blank-state--text"},gettext("You don’t have any apps.")),u.default.createElement("p",{className:"blank-state--text"},u.default.createElement(p.default,{onClick:this.handleClickCreate},gettext("Create an App"))))}},{key:"render",value:function(){var e=this,t=this.state.apps.length?this.renderAppList():this.renderBlankState();return u.default.createElement("div",null,t,u.default.createElement(v.default,{targetUser:this.props.targetUser,isOpen:this.state.createDialogIsOpen,onDialogDismissed:function(){return e.setState({createDialogIsOpen:!1})},onAppCreated:this.handleAppCreated}))}}]),t}(l.Component);t.default=E,e.exports=t.default},1893:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=a(r),o=n(24),s=n(1892),l=a(s);t.default=function(e){(0,o.render)(i.default.createElement(l.default,{targetUser:e.data("target-user")}),e[0])},e.exports=t.default},1894:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(84),i=a(r);t.default=function(e,t){var n=i.default.parse(e,!1,!0);return null===n.protocol&&(0===n.href.indexOf("//")?n.href="https:"+n.href:n.href="https://"+n.href,n=i.default.parse(n.href,!1,!0)),n.pathname=n.pathname.replace(/\/*$/,"/"),n.resolve(t.replace(/^\/+/,""))},e.exports=t.default},1906:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(){r.prop({busy:!0,disabled:!0})}function n(){r.prop({busy:!1,disabled:!1})}function a(e,t){(0,o.publishFact)(new c.FeatureToggledFact({action:e?"enable":"disable",alreadyFlagged:f,enabled:!e,feedback:t,includedByPartialRollout:u,name:s}))}var r=e.find(".feature-toggle"),s=e.data("feature-name"),u=!!e.data("feature-included-by-partial-rollout"),f=!!e.data("feature-is-flagged"),p=(0,l.default)({name:s,onToggleEnd:n,onToggleStart:t,onToggleSuccess:a,setToggleState:function(e){return r.prop("checked",e)},toggleUrl:e.data("feature-url")});e.find(".feature-toggle").on("change",function(){p(r.prop("checked"))}),e.filter('[data-feature-name="adg3"]').find(".feature-toggle").on("change",function(e){(0,i.default)(e.target).prop("checked")&&d.default.set("viewed-navigation-onboarding",!0)})};var r=n(0),i=a(r),o=n(34),s=n(1907),l=a(s),u=n(78),d=a(u),c=n(387);e.exports=t.default},1907:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(e){function t(e,t){return(0,l.default)({method:e?"post":"delete",url:_}).then(function(){v(e,t)}).catch(function(){o.default.messages.warning({body:gettext("We were unable to toggle this feature due to a technical issue. Please retry shortly.")}),b(!e)}).then(d)}var n=e.additionalDialogParams,a=void 0===n?{}:n,i=e.name,s=e.onToggleEnd,d=void 0===s?u.noop:s,f=e.onToggleStart,m=void 0===f?u.noop:f,g=e.onToggleSuccess,v=void 0===g?u.noop:g,y=e.setToggleState,b=void 0===y?u.noop:y,_=e.toggleUrl,w={SUBMITTED:"submitted",CANCELLED:"cancelled",PENDING:"pending"},x=w.PENDING,E="dismissed-opt-out-feedback::"+i+"::"+c.default.uuid,T=(0,p.default)(r({},a,{submitText:gettext("Continue"),cancelText:gettext("No thanks"),submitAction:function(e){return x=w.SUBMITTED,t(!1,e)}}));return T.on("cancel",function(){x=w.CANCELLED,h.default.set(E,!0),t(!1)}),T.on("hide",function(){x===w.PENDING&&b(!0),d()}),function(e){x=w.PENDING,m(),h.default.get(E)||e?t(e):T.show()}};var i=n(5),o=a(i),s=n(20),l=a(s),u=n(7),d=n(12),c=a(d),f=n(386),p=a(f),m=n(264),h=a(m);e.exports=t.default},1908:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.find(".feature-toggle"),n=e.attr("data-feedback-dialog-title"),a=e.attr("data-feedback-dialog-subtitle"),r=e.attr("data-feature-name"),s=(0,l.default)({submitText:gettext("Submit"),cancelText:gettext("Cancel"),submitAction:function(e){return e=e.trim(),e&&(0,o.publishFact)(new u.FeedbackGivenFact({name:r,feedback:e,featureEnabled:t.prop("checked")})),(new i.default.Deferred).resolve().promise()},subtitle:a,title:n});e.find(".js-feedback-dialog-trigger").on("click",function(){return s.show()})};var r=n(0),i=a(r),o=n(34),s=n(386),l=a(s),u=n(387);e.exports=t.default},1909:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.find("a.feature-screenshot").fancybox({loop:!1,nextEffect:"fade",prevEffect:"fade",
width:600,height:370,beforeLoad:function(){this.title=s.default.escape((0,i.default)(this.element).attr("title"))}})};var r=n(0),i=a(r),o=n(2),s=a(o);n(773),e.exports=t.default},1910:function(e,t,n){"use strict"},1975:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,i.default)(".connect-button").on("click","button",function(){var e=/(google|facebook|twitter|github)-button/,t=e.exec((0,i.default)(this).attr("class"))[1],n=(0,i.default)("#login").length>0?"Login":"Registration";s.default.trackEvent("Social registration",n,t)})};var r=n(0),i=a(r),o=n(39),s=a(o);e.exports=t.default},211:function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function a(e){return"function"==typeof e}function r(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!r(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,r,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var d=new Error('Uncaught, unspecified "error" event. ('+t+")");throw d.context=t,d}if(n=this._events[e],o(n))return!1;if(a(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),u=n.slice(),r=u.length,l=0;l<r;l++)u[l].apply(this,s);return!0},n.prototype.addListener=function(e,t){var r;if(!a(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,a(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(r=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!a(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,r,o,s;if(!a(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,r=-1,n===t||a(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(s=o;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],a(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?a(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(a(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},220:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=a(r),o=n(175),s=a(o);t.default=i.default.Collection.extend({apiVersion:2,getApiRoot:function(){return s.default[this.apiVersion]}}),e.exports=t.default},2351:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=e.serializeArray().reduce(function(e,t){return e[t.name]=t.value,e},{}),a=e.find("#group-emails");return a.length&&(n[a.attr("name")]=!a.is(":checked")),s.default.ajax(s.default.extend(t(e),{data:JSON.stringify(n),contentType:"application/json"})).done(function(e){window.location=e.links.web.href}).fail(function(t){c.default.markApiErrors(e,t)})}function i(e){e.beforeDialogShow=e.beforeDialogShow||function(e){e.find(".error").addClass("hidden").find(".error-message").text("")};var t=new u.default({title:e.title||gettext("Add group"),dialogId:e.id,content:p.default.toHtml("add-group-form-template",{}),isSafeContent:!0,submitText:e.saveText||gettext("Save"),showCancel:!0,submitAction:function(){return r(t.getContent().find("form"),e.saveOptions)}}),n=t.getContent(),a=n.find("#group-access-admin"),i=n.find("#group-access-collaborator"),o=n.find("#group-emails"),l=n.find("select"),d=n.find("#group-access"),c=n.find(".group-notifications");return l.auiSelect2({minimumResultsForSearch:-1,dropdownAutoWidth:!0}),d.on("change",function(e){e.val&&c.toggleClass("hidden","admin"!==e.val)}),a.on("change",function(e){var t=(0,s.default)(e.target).prop("checked");t&&i.prop("checked",!0),i.prop("disabled",t),o.prop("checked",t).prop("disabled",!t)}),e.$trigger.on("click",function(a){a.preventDefault(),e.beforeDialogShow(n),t.show()}),t}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=a(o);n(5);var l=n(47),u=a(l),d=n(2954),c=a(d),f=n(8),p=a(f);n(44),t.default=i,e.exports=t.default},2352:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(67),i=n(244),o=n(993),s=n(2353),l=a(s);t.default=function(){return function(e){e({type:i.CANCEL_DIALOG}),e((0,l.default)()),e((0,r.reset)(o.FORM_KEY))}},e.exports=t.default},2353:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(244);t.default=function(){return{type:a.CLOSE_DIALOG}},e.exports=t.default},2354:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(29),i=a(r);t.default=i.default.ItemView.extend({template:"#consumer-blank-slate-template",tagName:"tr",initialize:function(e){this.mergeOptions(e,["colspan","message"])},templateHelpers:function(){return{colspan:this.colspan,message:this.message}}}),e.exports=t.default},2355:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=a(r),o=n(119),s=a(o),l=n(47),u=a(l),d=n(108),c=a(d),f=n(8),p=a(f);n(44),t.default=function(e){function t(e){return i.default.get(f.replace("[[username]]",e)).then(a)}function n(){return i.default.ajax({type:"DELETE",url:f.replace("[[username]]",h.userToDelete)}).then(function(e,t,n){return(0,c.default)(n.getResponseHeader("Location"))}).then(function(){return window.location.reload(!0)})}function a(e){return e.hasRepos=!!e.repos.length,e.hasGroups=!!e.groups.length,e.groupsNotOwned=e.groups_not_owned,e.hasGroupsNotOwned=!!e.groupsNotOwned.length,e}function r(){var e=(0,i.default)(this),n=e.attr("data-user");l.html(""),e.loading(t(n)).then(function(e){l.html(p.default.toHtml("plan-access-template",e)),m.show()})}function o(){var e=(0,i.default)(this),n=e.attr("data-user");h.userToDelete=n,d.html(""),e.loading(t(n)).then(function(e){e.remove=!0,d.html(p.default.toHtml("plan-access-template",e)),h.show()})}var l=(0,i.default)("<div></div>"),d=(0,i.default)("<div></div>"),f=e.attr("data-access-url"),m=new u.default({title:gettext("View access"),content:l,showCancel:!1,submitText:gettext("Close")}),h=new u.default({title:gettext("Remove access"),content:d,warning:!0,persistent:!0,showCancel:!0,submitText:gettext("Remove"),submitAction:n});e.on("click",".js-view-access-link",r),e.on("click",".js-remove-access-link",o),(0,s.default)(e,{$pjaxContainer:(0,i.default)("#members-pjax")})},e.exports=t.default},2356:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(29),i=a(r);t.default=i.default.Behavior.extend({ui:{trigger:".boxed-list--expandable--trigger"},events:{"click @ui.trigger":"triggerHandler"},triggerHandler:function(e){this.triggerMethod("ToggleExpandedState")},onToggleExpandedState:function(){this.$el.toggleClass("boxed-list--item--expanded"),this.view.expanded=this.$el.hasClass("boxed-list--item--expanded"),this.view.render()}}),e.exports=t.default},2358:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=new Date(e).getTime(),a=60*t*1e3;return new Date(n-a).toISOString()},e.exports=t.default},2359:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=n(51),s=a(o),l=n(298),u=t.initialState={city:"",country:"",state:"",postcode:"",address:"",organisationName:"",tax_id:""};t.default=(0,s.default)(u,r({},l.CHANGE_ADDRESS,function(e,t){return i({},e,{city:t.payload.billingDetails.city,country:t.payload.billingDetails.country,state:t.payload.billingDetails.state,postcode:t.payload.billingDetails.postcode,address:t.payload.billingDetails.address,organisationName:t.payload.billingDetails.organisationName,tax_id:t.payload.billingDetails.tax_id})}))},2360:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=n(51),s=a(o),l=n(298),u=t.initialState={name:"",number:"",expiryMonth:"",expiryYear:"",type:""};t.default=(0,s.default)(u,r({},l.CHANGE_CARD,function(e,t){return i({},e,{name:t.payload.name,number:t.payload.number,expiryMonth:t.payload.expiryMonth,expiryYear:t.payload.expiryYear,type:t.payload.type})}))},2361:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=n(51),s=a(o),l=n(298),u=t.initialState={account:{targetUser:null,isActive:!0,hasPaymentDetails:!1,prevPlanName:null,nextPlanName:null,downgradePending:!1,downgradeSurveyUrl:null,showDowngradeSurvey:!1},currentPlan:{name:"",description:"",isPaid:!1,isPremium:!1,includedUsers:0,includedBytes:0,includedSeconds:0},currentBillingPeriod:{start_date:"",end_date:"",start_plan:"",end_plan:"",renewalFrequency:"MONTHLY"},currencyCode:"USD",amountBeforeTax:0,usage:{users:{value:0,amountBeforeTax:0},storage:{value:0,amountBeforeTax:0},seconds:{value:0,amountBeforeTax:0}}};t.default=(0,s.default)(u,r({},l.CHANGE_PLAN,function(e,t){return i({},e,{account:t.payload.account,usage:t.payload.usage,currentBillingPeriod:t.payload.currentBillingPeriod,amountBeforeTax:t.payload.amountBeforeTax})}))},2368:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=a(r),o=n(2),s=a(o),l=n(63),u=a(l),d=n(710),c=a(d),f={},p=f.GroupMember=i.default.Model.extend({idAttribute:"username",group_:null,group:function(){return this.group_},setGroup:function(e){return this.group_=e,this},url:function e(){var e,t=this.group();return t?e=t.isMine()?u.default.toString("groups",t.owner().get("username"),t.get("slug"),"members",this.get("username")):u.default.toString("group-privileges",t.get("targetUser").username,t.owner().get("username"),t.get("slug"),{private:!0}):(e=i.default.Model.prototype.url.call(this),this.isNew()&&(e+=this.get("username"))),e},displayName:function(e){return this.get("display_name")},avatarUrl:function(){return this.get("avatar")||c.default},toJSON:function(){var e=i.default.Model.prototype.toJSON.call(this);return e.displayName=this.displayName(),e.avatarUrl=this.avatarUrl(),e}}),m=f.GroupMembers=i.default.Collection.extend({model:p,group_:null,group:function(){return this.group_},setGroup:function(e){this.group_=e,this.invoke("setGroup",e)},comparator:function(e){return e.displayName().toLowerCase()},url:function(){var e=u.default.concat("groups",this.group().get("owner").username);return e.toString(this.group().get("slug"),"members")}}),h=f.Repository=i.default.Model.extend({displayName:function(){return this.get("owner").username+"/"+this.get("slug")}});f.Repositories=i.default.Collection.extend({model:h});var g=f.GroupAccountPrivilege=i.default.Model.extend({toJSON:function(){var e={privilege:this.get("privilege")};return e[e.privilege]=!0,e},parse:function(e){return{privilege:e?s.default.values(e)[0]:null}},url:function(){var e=this.get("group"),t=e.get("owner").username,n=e.get("slug");return u.default.toString("users",t,"privileges",t,n)},sync:function(e,t,n){"read"!==e&&(e=t.get("privilege")?"update":"delete");var a=n.error;return n.error=function(e,t,r){return 404===e.status?n.success(null,t,e):void a(e)},i.default.sync.call(this,e,t,n)}}),v=f.Group=i.default.Model.extend({idAttribute:"slug",groupMembers_:null,owner_:null,repositories_:null,initialize:function(e,t){this.parseOwner_(e),this.parseGroupMembers_(e),this.get("owner").is_team&&(this.privilege=new g({group:this,privilege:null}))},parse:function(e){return this.parseGroupMembers_(e),e},parseGroupMembers_:function(e){e.members&&(null===this.groupMembers()&&this.setGroupMembers(new m),this.groupMembers().reset(e.members),delete e.members)},parseOwner_:function(e){this.setOwner(new p(e.owner))},groupMembers:function(){return this.groupMembers_},setGroupMembers:function(e){return this.groupMembers_=e,this.groupMembers_.setGroup(this),this},owner:function(){return this.owner_},setOwner:function(e){return this.owner_=e,this},repositories:function(){return this.repositories_},setRepositories:function(e){return this.repositories_=e,this},displayName:function(){return"{}:{}".format(this.owner().get("username"),this.get("slug"))},isMine:function(){return function(){return this.owner().get("username")===this.get("targetUser").username}}(),toJSON:function(){var e=i.default.Model.prototype.toJSON.call(this);return this.groupMembers()&&(e.members=this.groupMembers().toJSON()),e.auto_add?e[e.permission]=!0:e.no=!0,e},isLastAccountAdminGroup:function(e){var t=this.collection.accountAdminGroups(e);return 1===t.length&&s.default.indexOf(t,this)>=0}});f.Groups=i.default.Collection.extend({idAttribute:"slug",model:v,initialize:function(e,t){this.targetUser=t.targetUser},url:function(){return u.default.concat("groups",this.targetUser).toString()},comparator:function(e){return e.displayName().toLowerCase()},accountAdminGroups:function(e){var t=this.filter(function(e){return"admin"===e.privilege.get("privilege")&&e.groupMembers().length});return e?s.default.filter(t,function(t){return 1===t.groupMembers().filter(function(t){return t.get("username")===e}).length}):t}}),f.Message=i.default.Model.extend({defaults:{title:null}}),t.default=f,e.exports=t.default},2381:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return null==e||null==t?null:t.indexOf("://")!==-1?t:e.endsWith("/")&&t.startsWith("/")?e+t.substring(1):e.endsWith("/")||t.startsWith("/")?e+t:e+"/"+t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.get("descriptor");if(!o.default.has(t,"modules"))return!1;var n=t.modules;if(!o.default.has(n,"postInstallRedirect"))return!1;var a={user_id:l.default.username,user_username:l.default.username,user_type:"user"===l.default.type?"individual":"team",user_uuid:l.default.uuid},i=n.postInstallRedirect.url.replace(/{([^{]+)}/g,function(e,t){var n=a.hasOwnProperty(t)?a[t]:e;return encodeURIComponent(n)});return window.location=r(t.baseUrl,i),!0};var i=n(2),o=a(i),s=n(1010),l=a(s);e.exports=t.default},2389:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(220),i=a(r),o=n(292),s=a(o),l=n(2391),u=a(l);t.default=i.default.extend({apiVersion:"internal",model:u.default,parse:function(e){return e.values},initialize:function(e,t){if(this.connectContext=t.connectContext,"account"===this.connectContext)this.targetUser=t.targetUser,this.urlRoot="{}/account/{}/addons".format(this.getApiRoot(),this.targetUser);else{if("repository"!==this.connectContext)throw new Error("No context provided");this.repository=s.default.load(t.repositoryFullSlug),this.urlRoot="{}/repositories/{}/addons".format(this.getApiRoot(),this.repository.id)}},url:function(){return this.urlRoot+"?pagelen=100"}}),e.exports=t.default},2390:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=a(r),o=n(2773),s=a(o);t.default=i.default.Collection.extend({model:s.default}),e.exports=t.default},2391:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=a(r),o=n(116),s=a(o);t.default=s.default.extend({apiVersion:"internal",validateDescriptor:function(){var e=this,t=e.get("url")||e.getDescriptorUrl(),n=e.get("connection_key");return i.default.ajax({url:e.urlRoot()+"/validate",data:{url:t,connection_key:n},success:function(t){e.set("descriptor",t)}})},getDescriptorUrl:function(){var e=this.get("descriptor_url");if(!e){var t=this.get("links");e=t&&t.descriptor&&t.descriptor.source_url&&t.descriptor.source_url.href}return e},urlRoot:function(){return this.collection.urlRoot}}),e.exports=t.default},2392:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(29),i=a(r);n(5),t.default=i.default.ItemView.extend({template:"#addon-filters-template",ui:{categoryFilter:".category-filter"},events:{"change @ui.categoryFilter":"categoryChangeHandler"},initialize:function(e){this.categories=e.categories},onRender:function(){this.ui.categoryFilter.auiSelect2()},serializeData:function(){return{categories:this.categories.toJSON()}},categoryChangeHandler:function(e){this.trigger("change:category",this.ui.categoryFilter.val())}}),e.exports=t.default},2424:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=a(r),o={};o.CollectionView=i.default.View.extend({view:null,views_:null,initialize:function(e){e.view&&(this.view=e.view),this.init_(),this.collection.on("add",this.add_,this),this.collection.on("remove",this.remove_,this),this.collection.on("reset",this.refresh_,this)},init_:function(){var e=this;this.views_={},this.collection.each(function(t){var n=e.views_[t.cid]=new e.view({model:t});t.on("change",n.render,n)})},add_:function(e,t,n){var a=this.views_[e.cid]=new this.view({model:e});this.collection.comparator?this.render():this.$el.append(a.render().el)},remove_:function(e,t,n){var a=this.views_[e.cid];a&&(a.remove(),delete this.views_[e.cid])},refresh_:function(){this.init_(),this.render()},render:function(){var e=this,t=this.$el;return t.children().detach(),this.collection.each(function(n){t.append(e.views_[n.cid].render().el)}),this}}),t.default=o,e.exports=t.default},2429:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=Array.prototype.slice.apply(arguments);if(0===e.length)return u();for(var t=0,n=e.length;t<n;++t)if(e[t].responseText)return u(e[t]);return u(e[0])};var r=n(5),i=a(r),o=n(2),s=a(o),l=gettext("There was a problem processing your request."),u=function(e){var t,n=null;if(e)if("string"==typeof e)n=e;else{if(e.responseText)try{t=JSON.parse(e.responseText),n=t.error&&t.error.message}catch(e){}n=n||l}else n=l;i.default.messages.error({body:s.default.escape(n),fadeout:!1})};e.exports=t.default},243:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=a(r);t.default=(0,i.default)("#account-admin").attr("data-target-user"),e.exports=t.default},244:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SaveIps=t.DIRTY_CANCEL=t.DELETE_IP=t.CLOSE_DIALOG=t.CANCEL_DIALOG=t.OPEN_DIALOG=t.ADD_IP=void 0;var r=n(226),i=a(r),o=function(e){return"account-admin/ip-whitelist/"+e};t.ADD_IP=o("ADD_IP"),t.OPEN_DIALOG=o("OPEN_DIALOG"),t.CANCEL_DIALOG=o("CANCEL_DIALOG"),t.CLOSE_DIALOG=o("CLOSE_DIALOG"),t.DELETE_IP=o("DELETE_IP"),t.DIRTY_CANCEL=o("DIRTY_CANCEL"),t.SaveIps=(0,i.default)(o("SAVE_IPS"))},2446:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=n(2606),i=a(r),o=n(2607),s=a(o),l=n(2608),u=a(l),d=n(2609),c=a(d),f=n(2610),p=a(f),m=n(2611),h=a(m),g=n(1033),v=a(g),y=n(2612),b=a(y),_=n(2613),w=a(_),x=n(2614),E=a(x),T=n(2616),S=a(T),P=n(2615),M=a(P),O=n(2617),D=a(O),C=n(2618),k=a(C),A=n(2619),I=a(A),j=n(2620),R=a(j),N=n(2621),L=a(N),U=n(2622),F=a(U),$=n(2623),q=a($),B=n(2624),H=a(B),z=n(2625),G=a(z),V=n(2626),W=a(V),Y=n(139),J=a(Y),K=n(138),Q=a(K);Q.default.add({"account-admin/account-selector":function(){return n(1771)},"account-admin/edit-scopes":function(){return n(991)},"account-admin/language-selector":function(){return n(1773)},"components/follow-list":function(){return n(484)},"connect/applications/index":function(){return n(1893)},"features/admin":function(){return n(1906)},"features/feedback-link":function(){return n(1908)},"features/view-screenshot":function(){return n(1909)},"registration/connect-account-button":function(){return n(1975)}}),window.__router__=(0,J.default)({"/account":{"/user/:targetUser":{"/?$":q.default,"/email/?$":E.default,"/notifications/?$":I.default,"/theme/?$":W.default,"/watched/:objectType/?":I.default,"/delete/?$":w.default,"/plans-and-billing/?$":F.default,"/plan-users/?$":L.default,"/large-file-storage/?$":D.default,"/groups":{"/?$":[S.default,G.default],"/:groupName/?$":M.default},"/api/?$":R.default,"/access-controls/?$":s.default,"/app-passwords":{"/?$":h.default,"/new/?$":p.default},"/ssh-keys/?$":H.default,"/two-step-verification":{"/?$":v.default,"/manage/?$":i.default},"/mirroring/$":k.default,"/mirroring/:addonKey/:moduleKey$":k.default,"/addon-directory/?$":u.default,"/addon-management/?$":c.default},"/connected-accounts/?$":b.default}}).init()},2467:function(e,t){var n="account-admin",a=n||"unknownBundle";window._moduleTiming=window._moduleTiming||{},window._moduleTiming[a]=(new Date).getTime()-window._moduleTiming[a]},2468:function(e,t){var n="account-admin",a=n||"unknownBundle";window._moduleTiming=window._moduleTiming||{},window._moduleTiming[a]=(new Date).getTime()},2496:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=a(r);n(5),t.default={mask:function(e,t){this.unmask(e);var n=(0,i.default)('<div class="plain-mask"></div>');e.append(n),t&&(t.backgroundColor&&n.css("background-color",t.backgroundColor),t.spinner&&n.spin(t.spinner))},unmask:function(e){var t=e.find(".plain-mask");t.spin(!1).remove()},spinnerSizes:{SMALL:"small",MEDIUM:"medium",LARGE:"large"}},e.exports=t.default},2566:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(402===e.status){var n=l.default.parseJSON(e.responseText).data;n.messageType="warning",n.owner=!0;var a=(0,l.default)(m.default.toHtml("over-limit-template",n)),r=a.find(".upgrade-button");a.insertAfter(t),t.addClass("hidden"),r.on("mousedown",function(){(0,f.default)("upgrade_dialog_button_clicked",{user:n.user.username})}).on("click",function(e){e.preventDefault();var t=r.loading(l.default.ajax({type:"POST",url:r.attr("data-upgrade-url"),dataType:"json"}));t.done(function(e){e.href&&(window.location.href=e.href)})})}else{var i=JSON.parse(e.responseText),o=i.error;t.removeClass("hidden").find(".error-message").text(o)}}function i(e,t){var n=e.$el.find("form"),a=n.serialize(),i=n.find(".error"),o=n.find(".warning");return i.addClass("hidden").find(".error-message").text(""),o.addClass("hidden").find(".warning-message").text(""),l.default.ajax({url:n.attr("action"),type:"POST",data:a}).done(function(e){t(e.groups)}).fail(function(e){r(e,i)})}function o(e){var t="group-add-member-dialog",n=new d.default({dialogId:t,title:gettext("Add team member"),content:m.default.toHtml("add-group-member-template"),isSafeContent:!0,showCancel:!0,submitText:gettext("Add"),submitAction:function(){return i(n,e.memberAdded)}}),a=n.getContent(),r=a.find("#group-add-member"),o=a.find("#group-selection");return o.auiSelect2({dropdownAutoWidth:!0}),e.$trigger.attr("aria-controls",t),e.$trigger.on("click",function(e){e.preventDefault(),a.find(".error").addClass("hidden").find(".error-message").text(""),n.show(),r.val(""),o.auiSelect2("val","")}),n}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),l=a(s);n(5);var u=n(47),d=a(u),c=n(493),f=a(c),p=n(8),m=a(p);n(44),t.default=o,e.exports=t.default},2567:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=a(r),o=n(2),s=a(o),l=n(992),u=a(l),d=n(85),c=a(d),f=n(12),p=a(f),m=n(8),h=a(m);t.default=i.default.View.extend({className:"group-account-privileges",initialize:function(){this.model.on("change",this.render,this)},events:{"change input":"update"},errors:{403:gettext("You no longer have account admin access.")},render:function(){if(this.$el.children().length)switch(this.model.get("privilege")){case"admin":this.$admin.prop({checked:!0}),this.$collaborator.prop({checked:!0,disabled:!0});break;case"collaborator":this.$admin.prop({checked:!1}),this.$collaborator.prop({checked:!0,disabled:!1});break;default:this.$admin.prop({checked:!1}),this.$collaborator.prop({checked:!1,disabled:!1})}else this.$el.html(h.default.toHtml("team-privileges-template",this.model.toJSON())),this.$admin=this.$("input[name=admin]"),this.$collaborator=this.$("input[name=collaborator]");return this},update:function(){var e;return e=this.$admin.prop("checked")?"admin":this.$collaborator.prop("checked")?"collaborator":null,"admin"===this.model.get("privilege")&&"admin"!==e&&p.default.username!==u.default&&this.model.get("group").isLastAccountAdminGroup(p.default.username)?((0,c.default)({title:gettext("Can't revoke admin access"),content:gettext("You cannot revoke your own account admin access.")}),void this.render()):void this.model.save({privilege:e},{wait:!0,error:s.default.bind(this.error,this,this.model.previousAttributes())})},error:function(e,t,n){(0,c.default)(this.errors[n.status]||gettext("An unexpected error occurred.")),t.set(e)}}),e.exports=t.default},2568:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=a(r),o=n(2),s=a(o),l=n(8),u=a(l),d=n(85),c=a(d);t.default=i.default.View.extend({initialize:function(){this.model.privilege.on("change",this.toggleForwardEmails,this)},events:{"change input":"updateForwardEmails"},render:function(){var e=this.model.toJSON();return e.admin="admin"===this.model.privilege.get("privilege"),this.$el.html(u.default.toHtml("forward-emails-template",e)),this},updateForwardEmails:function(){this.model.save({email_forwarding_disabled:!this.$el.find("input").is(":checked")},{wait:!0,error:s.default.bind(this.error,this,this.model.previousAttributes())})},toggleForwardEmails:function(){var e="admin"===this.model.privilege.get("privilege");this.$el.find(".forward-emails").toggleClass("hidden",!e)},error:function(e,t,n){(0,c.default)(this.errors[n.status]||gettext("An unexpected error occurred.")),t.set(e)}}),e.exports=t.default},2569:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=a(r),o=n(10),s=a(o),l=n(85),u=a(l),d=n(2368),c=a(d),f=n(12),p=a(f),m=n(8),h=a(m);t.default=s.default.View.extend({model:c.default.GroupMember,tagName:"tr",className:"group-member",errors_:{401:gettext("You must be logged in to remove a member."),403:gettext("You are not authorized to remove this member.")},events:{'click a[href="#delete"]':"removeMember"},removeMember:function(e){e.preventDefault();var t=this.model.collection.group();if(this.model.get("username")===p.default.username){if(t.get("owner").is_team&&t.isLastAccountAdminGroup(p.default.username))return void(0,u.default)({title:gettext("Can't revoke admin access"),content:gettext("You cannot revoke your own account admin access.")})}else if(1===this.model.collection.length&&t.get("owner").is_team&&t.isLastAccountAdminGroup())return void(0,u.default)(gettext("You cannot remove the last administrator of this account."));this.toggleSpinner(),this.model.destroy({error:this.removeMemberError.bind(this),wait:!0})},render:function(){return this.$el.html(h.default.toHtml("group-member-template",this.model.toJSON())),this},remove:function(){this.$el.slideUp(function(){this.$el.remove()}.bind(this)),this.toggleSpinner()},removeMemberError:function(e,t){this.toggleSpinner();var n=this.errors_[t.status],a=this.$el.closest(".group-members").find(".error-bar");i.default.messages.error(a,{body:n||gettext("There was a problem processing your request.")})},toggleSpinner:function(){this.$('a[href="#delete"]').toggleClass("loading")}}),e.exports=t.default},2570:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=a(r),o=n(10),s=a(o),l=n(0),u=a(l),d=n(2),c=a(d),f=n(2569),p=a(f),m=n(303),h=a(m),g=n(2424),v=a(g),y=n(8),b=a(y),_=n(500),w=a(_),x=n(12),E=a(x);t.default=s.default.View.extend({className:"group-members",errors_:{404:gettext("The requested user does not exist."),409:gettext("The user is already in the group."),402:gettext("You are already at your plan limit and must upgrade before adding more users.")},events:{"submit form":"addMember"},collectionView_:null,initialize:function(){this.collectionView_=new v.default.CollectionView({collection:this.collection,view:p.default,tagName:"tbody"})},addMember:function(e){e.preventDefault();var t=this.$("input.username"),n=t.val().trim();return n?(this.toggleSpinner(),void this.collection.create({username:n},{wait:!0,success:c.default.bind(this.addMemberSuccess,this),error:c.default.bind(this.addMemberError,this)})):void t.focus()},addMemberSuccess:function(){this.toggleSpinner(),this.clearError(),this.$("input.username").val("").blur().focus()},clearError:function(){
this.$el.find(".error-bar .aui-message").closeMessage()},addMemberError:function(e,t){if(this.clearError(),404===t.status&&w.default.email(e.get("username")))this.addMemberSuccess(),this.$el.trigger("bb:groups:invite",[e.get("username")]);else{if(this.toggleSpinner(),this.$("input.username").blur().focus(),402===t.status){var n=u.default.parseJSON(t.responseText).data;n.extra_users=n.users_required-n.plan_users,n.owner=E.default.username===n.user.username,(0,h.default)(this.$("button.add-button"),{data:n})}i.default.messages.error(this.$el.find(".error-bar"),{body:this.errors_[t.status]||t.responseText})}},toggleSpinner:function(){this.$("input.username").toggleClass("loading")},render:function(){return this.collectionView_.el.parentNode?this.collectionView_.render():this.$el.html(b.default.toHtml("group-members-template",this.collectionView_.collection.group().toJSON())).find("table.widget.users thead").after(this.collectionView_.render().el),this}}),e.exports=t.default},2571:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=a(r),o=n(0),s=a(o),l=n(2567),u=a(l),d=n(2568),c=a(d),f=n(2570),p=a(f),m=n(992),h=a(m),g=n(250),v=a(g),y=n(85),b=a(y),_=n(54),w=a(_),x=n(12),E=a(x),T=n(8),S=a(T);t.default=i.default.View.extend({tagName:"li",className:"group-view",membersView_:null,privilegeView_:null,forwardEmailView_:null,events:{"click .delete-group":"deleteGroup","change .access":"updatePermission"},initialize:function(){this.membersView_=new p.default({collection:this.model.groupMembers()}),this.privilegeView_=this.model.privilege?new u.default({model:this.model.privilege}):null,this.forwardEmailView_=this.model.privilege?new c.default({model:this.model}):null,this.model.view=this},errors_:{400:gettext("A group with that name already exists."),404:gettext("This group no longer exists.")},deleteGroup:function(e){if(e.preventDefault(),!this.$el.hasClass("waiting")){if(this.model.get("owner").is_team&&E.default.username!==h.default&&this.model.isLastAccountAdminGroup(E.default.username))return void(0,b.default)({title:gettext("Can't revoke admin access"),content:gettext("You cannot revoke your own account admin access.")});if(this.model.get("owner").is_team&&E.default.username===h.default&&this.model.isLastAccountAdminGroup())return void(0,b.default)(gettext("You cannot remove the last administrator of this account."));var t=gettext("Are you sure you want to delete the group %(group_name)s?");(0,w.default)({title:gettext("Delete group?"),content:interpolate(t,{group_name:this.model.displayName()},!0)}).done(function(){this.dialog.unbind().remove(),this.model.destroy({wait:!0,error:this.groupError.bind(this)})}.bind(this))}},select:function(e,t){var n=t.auto_add?t.permission:"no",a=this.$(".access ."+n);a.addClass("selected").siblings().removeClass("selected")},groupError:function(e,t){var n=(0,s.default)(t.responseText).find(".errorlist:last li").text();n=n||this.errors_[t.status],(0,b.default)(n||gettext("There was a problem processing your request."))},updatePermission:function(e){var t,n=this.$el.closest("li"),a=(0,s.default)(e.target);if(!a.is(":disabled")){t=setTimeout(function(){n.addClass("loading")},300),a.addClass("waiting").prop({disabled:!0,"aria-disabled":!0});var r=this.model.attributes,i="{owner.username}/{slug}".format(r),o=a.val();"no"===o&&(o=null);var l=function(){a.auiSelect2("val",r.permission||"no")},u=function(e){e?this.model.save({auto_add:!!o,permission:o},{wait:!0,success:this.select.bind(this),error:function(){this.groupError.apply(this,arguments),l()}.bind(this)}):l()}.bind(this),d=function(e){if(clearTimeout(t),n.removeClass("loading"),a.removeClass("waiting").prop({disabled:!1,"aria-disabled":!1}),0===e)u(!0);else{var r=gettext("This will update the group's permissions on %(affected_repos)s of your repositories.");(0,w.default)({title:gettext("Apply permissions to existing repositories?"),content:interpolate(r,{affected_repos:e},!0),size:"medium"}).done(function(){u(!0)}).fail(function(){u(!1)})}};s.default.ajax({url:"/account/xhr/affected_repositories/{}".format(i),dataType:"json"}).done(function(e){d(e.repo_count)})}},remove:function(){var e=this.$el.slideUp(function(){(0,s.default)("#no-groups").toggle(!e.siblings().length),e.remove()})},editGroupError:function(e,t){var n,a=e.find("div.error");n=t.status?this.errors_[t.status]||gettext("There was a problem processing your request."):t,a.removeClass("hidden"),a.find(".message").text(n)},editGroup:function(e){var t=this.model.get("name"),n=e.find(".group-name-input").val(),a=this.dialog;return n===t?void a.close():n?void this.model.save({name:n},{wait:!0,success:function(){a.unbind().remove()},error:function(t,n){this.editGroupError(e,n)}.bind(this)}):void this.editGroupError(e,gettext("Name is required."))},render:function(){var e=this.$el;return e.attr("id","group:"+this.model.get("slug")).addClass("group-cid-{}".format(this.model.cid)),this.privilegeView_&&(this.privilegeView_.$el.detach(),this.forwardEmailView_.$el.detach()),this.membersView_.$el.detach(),e.html(S.default.toHtml("group-template",this.model.toJSON())),this.privilegeView_&&(e.find("header").append(this.privilegeView_.render().el),this.privilegeView_.$(".checkbox.admin").after(this.forwardEmailView_.render().el)),e.append(this.membersView_.render().el),e.data("identifier","{owner.username}/{slug}".format(this.model.attributes)),e.find("select").auiSelect2({minimumResultsForSearch:-1}),this.dialog&&this.model.get("slug")===this.dialog.slug?this:(this.dialog=new v.default("#groups .group-cid-{} .edit-group".format(this.model.cid),{id:"edit-group-"+this.model.get("slug"),useLiveEvents:!0,template:"group-form-template",templateData:{isNew:!1,slug:this.model.get("slug")},submit:this.editGroup.bind(this),onUpdateContents:function(e,t){var n=e.popup.element.find("form"),a=this.model.get("name");n.find(".group-name-input").val(a)}.bind(this)}).bind(),this.dialog.slug=this.model.get("slug"),this)}}),e.exports=t.default},2572:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(147),i=a(r),o=n(10),s=a(o),l=n(0),u=a(l),d=n(2),c=a(d),f=n(2571),p=a(f),m=n(992),h=a(m),g=n(250),v=a(g),y=n(2424),b=a(y),_=n(2948),w=a(_),x=n(39),E=a(x),T=n(8),S=a(T);t.default=s.default.View.extend({className:"groups-admin",errors_:{400:gettext("A group with that name already exists."),401:gettext("You are not authorized to add a new group."),404:gettext("You user account no longer exists or has been moved.")},groupsView_:null,initialize:function(e){this.isTeam=!!e.isTeam,this.groupsView_=new b.default.CollectionView({collection:this.collection,view:p.default,tagName:"ol"});var t=i.default.user(h.default);t.invitations(function(e){var t={};c.default.each(e,function(e){c.default.each(e.groups,function(n){(t[n]||(t[n]=[])).push(e)})}),this.collection.each(function(e){var n=e.view.$("table.widget.invitations tbody");c.default.each(c.default.sortBy(t["{owner.username}/{slug}".format(e.attributes)],function(e){return e.email.toLowerCase()}),function(e){n.append((0,u.default)(S.default.toHtml("group-invitation-template",e)))})})}.bind(this)),(0,w.default)("#groups-container > ol > li.group-view","bb:groups:invite",function(n,a){var r=(0,u.default)(this);t.invite(a,r.data("identifier"),function(){for(var e=r.find("table.widget.invitations"),t=e.children(".invitation"),n=0,i=t.length;n<i;n+=1){var o=(0,u.default)(t[n]);if(a.toLowerCase()<o.data("email").toLowerCase())return void o.before((0,u.default)(S.default.toHtml("group-invitation-template",{email:a})))}e.append((0,u.default)(S.default.toHtml("group-invitation-template",{email:a})))}),E.default.trackEvent("Share","Invite To Group - "+(e.isTeam?"Team":"Individual"))}),(0,w.default)('.invitation a[href="#delete"]',"click",function(e){e.preventDefault();var n=(0,u.default)(e.target).closest("tr");t.uninvite(n.data("email"),n.closest("li.group-view").data("identifier"),function(){n.remove()})}),(0,w.default)(".invitation .resend-invitation a","click",function(e){e.preventDefault();var n=(0,u.default)(e.target).closest("tr");t.invite(n.data("email"),n.closest("li.group-view").data("identifier"),function(){(0,u.default)(e.target).closest(".resend-invitation").fadeOut(200,function(){var e=gettext("Invitation sent");(0,u.default)(this).replaceWith('<span class="aui-lozenge aui-lozenge-success">{}</span>'.format(c.default.escape(e))).fadeIn(200)})})})},addGroup:function(e){this.dialog.$form_.find("div.error").addClass("hidden");var t=e.find(".group-name-input"),n=t.val().trim();if(!n)return t.focus(),void this.showError(gettext("You must provide a group name."));var a={name:n,owner:{username:h.default,is_team:this.isTeam}};this.collection.create(a,{wait:!0,success:function(e){window.location.hash="#group:"+e.get("slug"),t.val(""),this.dialog.close(),(0,u.default)("#no-groups").hide()}.bind(this),error:this.addGroupError.bind(this)})},addGroupError:function(e,t){this.showError(this.errors_[t.status]||gettext("There was a problem processing your request."))},showError:function(e){var t=this.dialog.$form_.find("div.error");t.removeClass("hidden"),t.find(".message").text(e)},render:function(){var e=this.groupsView_.render().$el;return(0,u.default)("#no-groups").toggle(!e.children().length),e.detach(),this.$el.empty().append(e),this.dialog=new v.default("#add-group",{id:"add-group",template:"group-form-template",templateData:{isNew:!0},submit:this.addGroup.bind(this)}).bind(),this}}),e.exports=t.default},2574:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(67),r=n(244),i=n(993);t.default=function(e){return function(t){t({type:r.ADD_IP,payload:e}),t((0,a.reset)(i.FORM_KEY))}},e.exports=t.default},2575:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(244),r=n(1772);t.default=function(e){return function(t,n){var i=(0,r.getChangedIps)(n()),o=i.added,s=i.removed;if(o.length||s.length)return e.preventDefault(),t({type:a.DIRTY_CANCEL})}},e.exports=t.default},2576:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(244);t.default=function(e){return{type:a.DELETE_IP,payload:e}},e.exports=t.default},2577:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(244);t.default=function(){return{type:a.OPEN_DIALOG}},e.exports=t.default},2578:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}Object.defineProperty(t,"__esModule",{value:!0});var i=n(20),o=a(i),s=n(170),l=a(s),u=n(244),d=n(2353),c=a(d),f=n(1772);t.default=function(){return function(e,t){e({type:u.SaveIps.REQUEST});var n=t(),a=n.data,i=r(n,["data"]),s=(0,f.getChangedIps)(i),d=s.added,p=s.removed;return d.length||p.length?void o.default.put(l.default.api.internal.ipWhitelist(a.targetUser.username),{added:d,removed:p}).then(function(t){e({type:u.SaveIps.SUCCESS}),e((0,c.default)()),window.location.href=window.location.href}).catch(function(t){var n=t.response.data.error;e({type:u.SaveIps.ERROR,payload:n})}):void e((0,c.default)())}},e.exports=t.default},2579:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(1),u=a(l),d=n(41),c=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.ips,n=e.openDialog,a=e.Dialog,r=gettext("Add or remove IP addresses");return u.default.createElement(d.AuiButton,{isLink:!0,type:"button",onClick:n},r,t.length>0&&u.default.createElement(d.AuiBadge,{style:{marginLeft:5}},t.length),u.default.createElement(a,{headerText:r}))}}]),t}(u.default.PureComponent);t.default=c,c.propTypes={ips:l.PropTypes.arrayOf(l.PropTypes.string).isRequired,Dialog:l.PropTypes.func.isRequired,openDialog:l.PropTypes.func.isRequired},e.exports=t.default},2580:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(30),d=a(u),c=n(1),f=a(c),p=n(67),m=n(41),h=n(2585),g=n(2581),v=a(g),y=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"render",value:function(){var e=this,t=!(this.props.pristine||this.props.submitting||this.props.error);return f.default.createElement("div",null,this.props.showDirtyWarning&&f.default.createElement(m.AuiMessage,{type:"warning",title:"You have unsaved changes"},"Click Save below, or you can",f.default.createElement(m.AuiButton,{isLink:!0,style:{marginLeft:5},onClick:this.props.cancelDialog},"discard changes")),!this.props.showDirtyWarning&&this.props.formError&&f.default.createElement(m.AuiMessage,{type:"error"},this.props.formError),f.default.createElement(m.AuiForm,{onSubmit:this.props.handleSubmit},f.default.createElement(m.AuiTable,{className:"widget",isInteractive:!0},f.default.createElement("thead",{className:"assistive"},f.default.createElement("tr",null,f.default.createElement("th",null,gettext("IP Address")),f.default.createElement("th",{className:"actions"},gettext("Actions")))),f.default.createElement("tbody",null,f.default.createElement("tr",{className:"form"},f.default.createElement("td",null,f.default.createElement("input",s({},this.props.fields.ip,{type:"text",className:"text",placeholder:gettext("Enter an IP address or network block")}))),f.default.createElement("td",{className:"actions"},f.default.createElement(m.AuiButton,{type:"submit",className:(0,d.default)({loading:this.props.submitting}),isDisabled:!t},gettext("Add")))),!this.props.ips.length&&f.default.createElement("tr",null,f.default.createElement("td",{colSpan:2},gettext("No IP addresses"))),this.props.ips.map(function(t){return f.default.createElement(v.default,{key:t,ip:t,deleteIp:e.props.deleteIp})})))))}}]),t}(f.default.PureComponent);t.default=y,y.propTypes=s({},p.propTypes,{fields:h.formFieldsShape.isRequired,cancelDialog:c.PropTypes.func.isRequired,formError:c.PropTypes.string.isRequired,ips:c.PropTypes.arrayOf(c.PropTypes.string).isRequired,showDirtyWarning:c.PropTypes.bool.isRequired}),e.exports=t.default},2581:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(1),u=a(l),d=n(41),c=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.ip,n=e.deleteIp;return u.default.createElement("tr",null,u.default.createElement("td",null,u.default.createElement("pre",null,t)),u.default.createElement("td",{className:"actions"},u.default.createElement("a",{href:"#delete",onClick:function(e){e.preventDefault(),n(t)}},u.default.createElement(d.AuiIcon,{type:"remove"}))))}}]),t}(u.default.PureComponent);t.default=c,c.propTypes={deleteIp:l.PropTypes.func.isRequired,ip:l.PropTypes.string.isRequired},e.exports=t.default},2582:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(1),o=a(i),s=n(65),l=n(41),u=n(170),d=a(u),c=n(2575),f=a(c),p=n(2352),m=a(p),h=n(2578),g=a(h),v=n(993),y=n(1772),b=n(2584),_=a(b),w=function(e){return v.FORM_KEY in e&&"ip"in e[v.FORM_KEY]&&!!e[v.FORM_KEY].ip.value},x=function(e){var t=(0,y.getChangedIps)(e),n=t.added,a=t.removed;return!(!n.length&&!a.length)},E=function(e){return{deletingIp:e.ui.deletingIp,canSubmit:x(e)&&!w(e.form),isOpen:e.ui.isDialogOpen,isSaving:e.ui.isSaving}},T={beforeCancelDialog:f.default,cancelDialog:m.default,saveIps:g.default},S=o.default.createElement("span",null,gettext("We support IPv4 and IPv6. Use CIDR notation.")," ",o.default.createElement("a",{href:d.default.external.ipWhitelistDocs,target:"_blank"},gettext("Learn more"))),P=function(e){return o.default.createElement(l.AuiDialogRedux,r({canSubmit:e.canSubmit,onSubmit:e.saveIps,onBeforeCancel:e.beforeCancelDialog,onCancel:e.cancelDialog,isLoading:e.isSaving,isOpen:e.isOpen,hintText:S,isModal:!0},e),o.default.createElement(_.default,null))};t.default=(0,s.connect)(E,T)(P),e.exports=t.default},2583:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(1),o=a(i),s=n(65),l=n(2577),u=a(l),d=n(2579),c=a(d),f=n(2582),p=a(f),m=function(e){return{ips:e.ips.saved}},h={openDialog:u.default};t.default=(0,s.connect)(m,h)(function(e){return o.default.createElement(c.default,r({},e,{Dialog:p.default}))}),e.exports=t.default},2584:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(67),i=n(2576),o=a(i),s=n(2352),l=a(s),u=n(2574),d=a(u),c=n(2580),f=a(c),p=n(993),m=function(e){return{ips:e.ips.current,showDirtyWarning:e.ui.showDirtyWarning,formError:e.ui.formError,deletingIp:e.ui.deletingIp}},h=function(e){return{onSubmit:function(t){return e((0,d.default)(t))},cancelDialog:function(){return e((0,l.default)())},deleteIp:function(t){return e((0,o.default)(t))}}};t.default=(0,r.reduxForm)({form:p.FORM_KEY,fields:["ip"],validate:function(e){if(!e.ip||!e.ip.trim())return{_error:"Please enter an IP address"}}},m,h)(f.default),e.exports=t.default},2585:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formFieldsShape=void 0;var a=n(1),r=n(496);t.formFieldsShape=a.PropTypes.shape({ip:r.reduxFormFieldShape.isRequired})},2586:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(104),i=n(67),o=n(2587),s=a(o),l=n(2588),u=a(l);t.default=(0,r.combineReducers)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e},form:i.reducer,ips:s.default,ui:u.default}),e.exports=t.default},2587:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=n(51),u=a(l),d=n(244),c={current:[],saved:[]};t.default=(0,u.default)(c,(o={},r(o,d.ADD_IP,function(e,t){var n=t.payload.ip.trim();return e.current.indexOf(n)!==-1?e:s({},e,{current:[].concat(i(e.current),[n])})}),r(o,d.DELETE_IP,function(e,t){return s({},e,{current:e.current.filter(function(e){return e!==t.payload})})}),r(o,d.CANCEL_DIALOG,function(e,t){return s({},e,{current:e.saved})}),r(o,d.SaveIps.SUCCESS,function(e,t){return s({},e,{saved:e.current})}),o)),e.exports=t.default},2588:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var i,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=n(51),l=a(s),u=n(244),d={formError:null,isDialogOpen:!1,isSaving:!1,showDirtyWarning:!1};t.default=(0,l.default)(d,(i={},r(i,u.OPEN_DIALOG,function(e,t){return o({},e,{isDialogOpen:!0})}),r(i,u.CLOSE_DIALOG,function(e,t){return o({},e,{formError:null,showDirtyWarning:!1,isDialogOpen:!1})}),r(i,u.DIRTY_CANCEL,function(e,t){return o({},e,{formError:null,showDirtyWarning:!0})}),r(i,u.ADD_IP,function(e,t){return o({},e,{formError:null,showDirtyWarning:!1})}),r(i,u.DELETE_IP,function(e,t){return o({},e,{showDirtyWarning:!1})}),r(i,u.SaveIps.REQUEST,function(e,t){return o({},e,{isSaving:!0})}),r(i,u.SaveIps.ERROR,function(e,t){return o({},e,{formError:t.payload,showDirtyWarning:!1,isSaving:!1})}),r(i,u.SaveIps.SUCCESS,function(e,t){return o({},e,{formError:null,isSaving:!1})}),i)),e.exports=t.default},2589:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(220),i=a(r),o=n(243),s=a(o),l=n(2591),u=a(l);t.default=i.default.extend({apiVersion:"internal",model:u.default,url:function(){return"{}/account/{}/consumer-authorizations".format(this.getApiRoot(),s.default)}}),e.exports=t.default},2590:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(220),i=a(r),o=n(243),s=a(o),l=n(2592),u=a(l);t.default=i.default.extend({apiVersion:"internal",model:u.default,url:function(){return"{}/account/{}/consumer-denials".format(this.getApiRoot(),s.default)}}),e.exports=t.default},2591:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(116),i=a(r),o=n(243),s=a(o);t.default=i.default.extend({apiVersion:"internal",urlRoot:function(){return"{}/account/{}/consumer-authorizations".format(this.getApiRoot(),s.default)}}),e.exports=t.default},2592:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(116),i=a(r),o=n(243),s=a(o);t.default=i.default.extend({apiVersion:"internal",urlRoot:function(){return"{}/account/{}/consumer-denials".format(this.getApiRoot(),s.default)}}),e.exports=t.default},2593:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=a(r),o=n(29),s=a(o);t.default=s.default.ItemView.extend({tagName:"tr",template:"#consumer-authorization-item-template",ui:{revokeButton:".js-revoke-button"},events:{"click @ui.revokeButton":"revoke"},revoke:function(e){e.preventDefault();var t=interpolate(gettext('OAuth consumer authorization revoked for "%(consumer_name)s"'),{consumer_name:this.model.get("name")},!0);this.model.destroy({wait:!0,success:function(){i.default.messages.success({body:t,fadeout:!0})}})}}),e.exports=t.default},2594:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(29),i=a(r),o=n(2593),s=a(o),l=n(2354),u=a(l);t.default=i.default.CompositeView.extend({template:"#consumer-authorization-list-template",childView:s.default,childViewContainer:"tbody",emptyView:u.default,emptyViewOptions:{colspan:4,message:gettext("You have not authorized any applications")}}),e.exports=t.default},2595:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=a(r),o=n(29),s=a(o);t.default=s.default.ItemView.extend({tagName:"tr",template:"#consumer-denial-item-template",ui:{removeButton:".js-remove-button"},events:{"click @ui.removeButton":"removeHandler"},removeHandler:function(e){e.preventDefault();var t=interpolate(gettext('OAuth consumer denial removed for "%(consumer_name)s"'),{consumer_name:this.model.get("name")},!0);this.model.destroy({wait:!0,success:function(){i.default.messages.success({body:t,fadeout:!0})}})}}),e.exports=t.default},2596:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(29),i=a(r),o=n(2354),s=a(o),l=n(2595),u=a(l);t.default=i.default.CompositeView.extend({template:"#consumer-denial-list-template",childView:u.default,childViewContainer:"tbody",emptyView:s.default,emptyViewOptions:{colspan:3,message:gettext("You have not denied access to any applications")}}),e.exports=t.default},2597:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(){return s.default.get(u.default.api.internal.themes()).then(function(e){return e.data}).catch(function(){return[]})}function i(){return s.default.get(u.default.api.internal.userTheme(c.default.username)).then(function(e){return"key"in e.data?e.data:p.defaultTheme}).catch(function(){return p.defaultTheme})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(20),s=a(o),l=n(170),u=a(l),d=n(12),c=a(d),f=n(994),p=n(995);t.default=function(){return function(e){e({type:f.LoadThemes.REQUEST}),s.default.all([r(),i()]).then(s.default.spread(function(t,n){e({type:f.LoadThemes.SUCCESS,payload:{themes:t,selectedTheme:n}})}))}},e.exports=t.default},2598:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=a(r),o=n(20),s=a(o),l=n(170),u=a(l),d=n(12),c=a(d),f=n(994),p=n(995),m=function(){return i.default.messages.success({body:gettext("Your theme has been saved."),fadeout:!0})};t.default=function(){return function(e,t){e({type:f.SaveTheme.REQUEST});var n=t(),a=n.selectedTheme;if(a===p.defaultTheme)return s.default.delete(u.default.api.internal.userTheme(c.default.username)).then(function(){return e({type:f.SaveTheme.SUCCESS})}).then(m);var r={key:a.key};return s.default.put(u.default.api.internal.userTheme(c.default.username),r).then(function(){return e({type:f.SaveTheme.SUCCESS})}).then(m)}},e.exports=t.default},2599:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),r=n(994),i=n(995);t.default=function(e){return function(t,n){var o=n(),s=o.themes,l=(0,a.find)(s,{key:e})||i.defaultTheme;t({type:r.SELECT_THEME,payload:{selectedTheme:l}})}},e.exports=t.default},2600:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DiffContainer=t.DiffLine=t.SkippedLine=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(30),o=a(i),s=n(1),l=a(s),u=n(41),d=t.SkippedLine=function(e){var t={"skipped-top first":e.top,"skipped-middle":!(e.top||e.bottom),"skipped-bottom last":e.bottom};return l.default.createElement("div",{className:"skipped-container"},l.default.createElement("div",{className:(0,o.default)("line-numbers-skipped",t)},l.default.createElement("span",{className:"ellipsis",title:gettext("Show more lines")})),l.default.createElement("div",{className:(0,o.default)(t)}))};d.propTypes={top:s.PropTypes.bool,bottom:s.PropTypes.bool};var c=t.DiffLine=function(e){return l.default.createElement("div",{className:(0,o.default)("udiff-line",e.className,{common:!(e.add||e.remove||e.conflict||e.conflictMarker),addition:e.add,deletion:e.remove,conflict:e.conflict,"conflict-marker":e.conflictMarker})},l.default.createElement("div",{className:"gutter",style:{cursor:"pointer"}},l.default.createElement("a",{className:"add-diff-comment add-line-comment"},l.default.createElement(u.AuiIcon,{type:"add-comment"})),l.default.createElement("a",{className:"line-numbers","data-fnum":e.lineFrom,"data-tnum":e.lineTo})),l.default.createElement("pre",{className:"source"},e.children))};c.propTypes={children:s.PropTypes.any,className:s.PropTypes.string,common:s.PropTypes.bool,add:s.PropTypes.bool,remove:s.PropTypes.bool,conflict:s.PropTypes.bool,conflictMarker:s.PropTypes.bool,lineFrom:s.PropTypes.number,lineTo:s.PropTypes.number};var f=function(e){return l.default.createElement(u.AuiButton,r({},e,{type:"button",className:"aui-button-light"}))},p=t.DiffContainer=function(e){var t=150,n=t;return l.default.createElement("div",{className:"bb-patch bb-patch-unified"},l.default.createElement("section",{className:"iterable-item bb-udiff maskable commentable-diff"},l.default.createElement("div",{className:"diff-container"},l.default.createElement("div",{className:"heading"},l.default.createElement("div",{className:"primary"},l.default.createElement("h1",{className:"filename"},l.default.createElement(u.AuiIcon,{type:"devtools-file",className:"diff-entry-kind-icon"},gettext("File")),gettext("Test File"),l.default.createElement(u.AuiLozenge,{isSubtle:!0,type:"complete",className:"diff-entry-lozenge "},gettext("Modified")))),l.default.createElement("div",{className:"diff-actions secondary",id:"side-by-side-51"},l.default.createElement("div",{className:"aui-buttons"},l.default.createElement(f,null,gettext("Side-by-side diff")),l.default.createElement(f,null,gettext("View file"))),l.default.createElement("div",{className:"aui-buttons"},l.default.createElement(f,null,gettext("Comment"))),l.default.createElement("div",{className:"aui-buttons"},l.default.createElement(f,{isSubtle:!0},l.default.createElement(u.AuiIcon,{type:"more"},gettext("More")))))),l.default.createElement("div",{className:"diff-content-container refract-container word-diff tab-size-4"},l.default.createElement("div",{className:"refract-content-container"
},l.default.Children.map(e.children,function(e){return e.type===c?(e.props.add?n++:e.props.remove?t++:e.props.conflictMarker||(t++,n++),l.default.cloneElement(e,{lineFrom:t,lineTo:n})):e}))))))};p.propTypes={children:s.PropTypes.any}},2601:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=n(1),o=a(i),s=n(41),l=n(2602),u=a(l),d=n(2603),c=a(d),f=function(e){return function(t){t.preventDefault(),e()}},p=function(e){return o.default.createElement("div",null,o.default.createElement(s.AuiForm,{hasTopLabels:!0,onSubmit:f(e.onSubmit)},o.default.createElement(c.default,(0,r.pick)(e,["themes","selectedTheme","onChangeTheme"])),o.default.createElement(u.default,null),o.default.createElement(s.AuiButtonsContainer,null,o.default.createElement("p",null,o.default.createElement(s.AuiButton,{isPrimary:!0,type:"submit",isDisabled:e.isLoading},gettext("Save"))))),e.selectedTheme.href&&o.default.createElement("link",{rel:"stylesheet",href:e.selectedTheme.href}))};p.propTypes={isLoading:i.PropTypes.bool,onSubmit:i.PropTypes.func,selectedTheme:i.PropTypes.object.isRequired,themes:i.PropTypes.array.isRequired},t.default=p,e.exports=t.default},2602:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=a(r),o=n(2600),s=i.default.createElement(o.DiffContainer,null,i.default.createElement(o.SkippedLine,{top:!0}),i.default.createElement(o.DiffLine,null,"  attrHandle[name] = function( elem, name, isXML ) ","{"),i.default.createElement(o.DiffLine,{remove:!0},"      var ret, handle;"),i.default.createElement(o.DiffLine,{add:!0},"      var ret, handle,"),i.default.createElement(o.DiffLine,{add:!0},"          lowercaseName = name.toLowerCase;"),i.default.createElement(o.DiffLine,null,"      if ( !isXML ) ","{"),i.default.createElement(o.SkippedLine,null),i.default.createElement(o.DiffLine,null,"  // Avoid an infinite loop by temporarily removing this function from the getter"),i.default.createElement(o.DiffLine,{remove:!0},"  handle = attrHandle[ ",i.default.createElement("del",null,"name")," ]"),i.default.createElement(o.DiffLine,{add:!0},"  handle = attrHandle[ ",i.default.createElement("ins",null,"lowercaseName")," ]"),i.default.createElement(o.DiffLine,null,"  ret = getter( elem, name, isXML ) != null ?"),i.default.createElement(o.SkippedLine,null),i.default.createElement(o.DiffLine,null,"  // Target should not be a text node (#504, #13143)"),i.default.createElement(o.DiffLine,{conflictMarker:!0},"<<<<<<<"," destination:dce4e5d81adbf693e2459154cde76ea52e679538"),i.default.createElement(o.DiffLine,{conflict:!0,remove:!0},"  this.target = ( src.target.nodeType === 3 ) ?"),i.default.createElement(o.DiffLine,{conflictMarker:!0},"======="),i.default.createElement(o.DiffLine,{conflict:!0,add:!0},"  this.target = ( src.target.nodeType === 2 ) ?"),i.default.createElement(o.DiffLine,{conflictMarker:!0},">>>>>>>"," source:03f67bd3635c74d533f7492e467eddca912d59dd"),i.default.createElement(o.DiffLine,{className:"last"},"    src.target.parentNode :"));t.default=function(){return s},e.exports=t.default},2603:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=a(r),o=n(41),s=function(e){return i.default.createElement(o.AuiSelect,{id:"theme",value:e.selectedTheme.key,onChange:function(t){return e.onChangeTheme(t.target.value)}},e.themes.map(function(e){return i.default.createElement("option",{key:e.key,value:e.key},e.name)}))};s.defaultProps={themes:[]},s.propTypes={themes:r.PropTypes.array.isRequired,selectedTheme:r.PropTypes.object,onChangeTheme:r.PropTypes.func.isRequired},t.default=s,e.exports=t.default},2604:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(65),i=n(2598),o=a(i),s=n(2599),l=a(s),u=n(2601),d=a(u),c=function(e){return e},f=function(e){return{onChangeTheme:function(t){return e((0,l.default)(t))},onSubmit:function(){return e((0,o.default)())}}};t.default=(0,r.connect)(c,f)(d.default),e.exports=t.default},2605:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=n(51),u=a(l),d=n(994),c=n(995),f={themes:[c.defaultTheme],selectedTheme:c.defaultTheme,isLoading:!1};t.default=(0,u.default)(f,(o={},r(o,d.LoadThemes.REQUEST,function(e){return s({},e,{isLoading:!0})}),r(o,d.LoadThemes.SUCCESS,function(e,t){return s({},e,{selectedTheme:t.payload.selectedTheme,themes:[c.defaultTheme].concat(i(t.payload.themes)),isLoading:!1})}),r(o,d.LoadThemes.ERROR,function(e){return s({},e,{isLoading:!1})}),r(o,d.SELECT_THEME,function(e,t){return s({},e,{selectedTheme:t.payload.selectedTheme})}),r(o,d.SaveTheme.REQUEST,function(e){return s({},e,{isLoading:!0})}),r(o,d.SaveTheme.SUCCESS,function(e){return s({},e,{isLoading:!1})}),r(o,d.SaveTheme.ERROR,function(e){return s({},e,{isLoading:!1})}),o)),e.exports=t.default},2606:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=a(r),o=n(0),s=a(o),l=n(2),u=a(l),d=n(990),c=a(d),f=n(243),p=a(f),m=n(170),h=a(m),g=n(85),v=a(g),y=n(54),b=a(y),_=n(1023),w=a(_),x=n(121),E=n(8),T=a(E);n(306),n(44),t.default=function(){function e(e){return e.children().toArray().reduce(function(e,t){return e+(t.colSpan||1)},0)}function t(e,t,n,a){return new Promise(function(r,i){return(0,w.default)()?void c.default.register([e],t,function(e){return e.errorCode?i(y[e.errorCode]||_):void s.default.post(m,{response:JSON.stringify(e),name:a,token:n}).done(r).fail(function(){return i(_)})}):i(gettext("We can't register this device because you aren't using the latest Google Chrome."))})}function n(){return T.default.toHtml("u2f-devices-empty-template",{colspan:e(o.find("tr").first())})}var a=(0,s.default)(".two-step-verification--add-u2f-key-button"),r=(0,s.default)("#two-factor-container"),o=(0,s.default)("#u2f-form"),l=[],d=o.find(".u2f-form-msgs"),f=a.data("u2f-start-register-api-url"),m=a.data("u2f-complete-register-api-url"),g=o.data("u2fKeyCount"),y={4:gettext("You've already registered this security key"),5:gettext("A timeout occurred before you could finish adding your security key. Try adding your security key again.")},_=gettext("Something went wrong. Try adding your security key again.");r.on("click",".two-step-verification--recovery-codes--toggle",function(){var e=(0,s.default)(this),t=e.attr("data-toggle-container"),n=(0,s.default)("#two-step-verification--recovery-codes--list"),a=e.attr("data-toggle-label"),r=e.attr("data-recovery-codes-url");l.length||s.default.ajax({url:r}).done(function(e){l=e;var t="";u.default.forEach(l,function(e){t+='<li class="two-step-verification--recovery-codes--item">'+e+"</li>"}),n.append(t)}),(0,s.default)(t).toggleClass("hidden"),e.attr("data-toggle-label",e.text()),e.text(a)}),r.on("click",".two-step-verification--disable-button",function(e){e.target.dataset.canDisableTwofactor?(0,b.default)({id:"disable-2fa",title:gettext("Disable two-step verification"),content:gettext("\n          Are you sure you want to disable two-step verification? You'll be able to re-enable but\n          you'll have to go through the set up process again.\n        "),submitText:gettext("Disable")}).done(function(){(0,s.default)(".two-step-verification--disable-form").submit()}):(0,v.default)({title:gettext("Disable two-step verification"),content:interpolate(gettext('\n            You currently require two-step verification on your account. You must\n            <a href="%(url)s">deselect that option</a> before you can disable two-step verification.\n          '),{url:h.default.ui.accessControls(p.default)},!0),isSafeContent:!0})}),o.on("submit",function(e){e.preventDefault(),d.empty();var n=o[0].name.value.length;0===n?i.default.messages.error(d,{body:gettext("You need to name your device before adding your security key.")}):n>255?i.default.messages.error(d,{body:gettext("Your device name can't be longer than 255 characters.")}):!function(){var e=a.loading();s.default.post(f).done(function(n){i.default.messages.info(d,{body:gettext("Insert and press the button on your security key now.")}),t(n.request,n.signRequests,n.token,o[0].name.value).then(function(){g++,(0,x.addMessage)(gettext("Your device has been successfully added.")),window.location.reload()},function(t){e.reject(),d.empty(),i.default.messages.error(d,{body:t})})})}()}),o.on("click",".js-delete",function(e){e.preventDefault(),d.empty();var t=(0,s.default)(e.currentTarget),a=t.closest("tr"),r=s.default.ajax({type:"DELETE",url:a.data("u2f-security-key-api-url"),dataType:"json"});t.loading(r).done(function(){g--,0===g&&a.closest("tbody").append(n()),a.remove()}).fail(function(){i.default.messages.error(d,{body:gettext("We couldn't communicate with the server. Try clicking the delete icon again to remove the security key.")})})}),0===g&&o.find("tbody").append(n())},e.exports=t.default},2607:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=document.getElementById("manage-ips");if(e){var t=y(e),n=(0,c.default)(v.default,{initialState:{ips:{current:t,saved:t},data:{targetUser:{username:p.default}}}});(0,l.render)(s.default.createElement(u.Provider,{store:n},s.default.createElement(h.default,null)),e),(0,i.default)("#repo-admin").one("pjax:beforeSend",function(){(0,l.unmountComponentAtNode)(e)})}};var r=n(0),i=a(r),o=n(1),s=a(o),l=n(24),u=n(65),d=n(155),c=a(d),f=n(243),p=a(f),m=n(2583),h=a(m),g=n(2586),v=a(g),y=function(e){var t=e.dataset.ips;return t?JSON.parse(t):[]};e.exports=t.default},2608:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=a(r),o=n(13),s=a(o),l=n(2389),u=a(l),d=n(2390),c=a(d),f=n(1010),p=a(f),m=n(2775),h=a(m),g=n(2392),v=a(g),y=n(74),b=a(y);t.default=function(){var e=(0,i.default)("#addon-directory"),t=e.find(".addon-filters"),n=e.find(".directory-list"),a=new c.default(t.data("categories")),r=new u.default(n.data("addons"),{connectContext:"account",targetUser:p.default.username,repositoryFullSlug:s.default.fullslug}),o=new v.default({el:t,categories:a}),l=new h.default({el:n,collection:r,manageUrl:n.attr("data-manage-url")});o.render(),n.empty(),l.render(),o.on("change:category",function(e){l.filterResults(e)});var d=r.find(function(e){return e.get("template")&&0===e.get("connection_key").indexOf(b.default.get("addon"))});d&&l.toggleAddonExpandedState(d)},e.exports=t.default},2609:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=a(r),o=n(13),s=a(o),l=n(2389),u=a(l),d=n(2390),c=a(d),f=n(1010),p=a(f),m=n(2392),h=a(m),g=n(2778),v=a(g),y=n(2780),b=a(y),_=n(74),w=a(_);t.default=function(){var e=(0,i.default)("#addon-management"),t=e.find(".addon-filters"),n=e.find(".management-list"),a=new c.default(t.data("categories")),r=new u.default(n.data("addons"),{connectContext:"account",targetUser:p.default.username,repositoryFullSlug:s.default.fullslug}),o=new h.default({el:t,categories:a});new b.default({el:e.find(".custom-addons"),collection:r});var l=new v.default({el:n,collection:r,defaultLogo:e.attr("data-default-logo")});o.render(),n.empty(),l.render(),o.on("change:category",function(e){l.filterResults(e)}),r.filter(function(e){return e.get("template")&&0===e.get("connection_key").indexOf(w.default.get("addon"))||!e.get("template")&&e.get("connection_key")===w.default.get("addon")}).forEach(function(e){l.toggleAddonExpandedState(e)})},e.exports=t.default},2610:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,s.default)((0,i.default)("#create-app-password-form"))};var r=n(0),i=a(r),o=n(991),s=a(o);e.exports=t.default},2611:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){(0,h.default)({warning:!1,title:gettext("New app password"),content:(0,p.default)({description:interpolate(gettext("Here is your app password for <strong>%(app)s</strong>.\n            You will not be able to view this password again once you close\n            this window, so be sure to record it."),{app:u.default.escape(e.name)},!0),password:e.password}),isSafeContent:!0})}function i(){s.default.ajax("/!api/internal/apppasswords").done(function(e){(0,s.default)(".app-passwords--table > tbody").html((0,c.default)({passwords:e.values,blankSlateText:gettext("You have not created any app passwords"),revokeText:gettext("Revoke")})),(0,b.default)(),(0,s.default)(".app-passwords--revoke-button").on("click",function(e){var t=(0,s.default)(e.target).data(),n=t.name,a=t.id;(0,v.default)({warning:!0,title:gettext("Revoke app password"),content:interpolate(gettext("Are you sure you wish you revoke the app password for <strong>%(app)s</strong>?"),{app:u.default.escape(n)},!0),isSafeContent:!0,submitText:gettext("Revoke"),submitAction:function(e){var t=s.default.ajax({url:"/!api/internal/apppasswords/"+a,type:"DELETE"});return t.done(function(){i()}),t}})})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,s.default)("#app-passwords").data("app-password");e&&r(e),i()};var o=n(0),s=a(o),l=n(7),u=a(l),d=n(3186),c=a(d),f=n(3187),p=a(f),m=n(85),h=a(m),g=n(54),v=a(g),y=n(120),b=a(y);e.exports=t.default},2612:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=a(r),o=n(0),s=a(o),l=n(63),u=a(l);t.default=function(){var e=(0,s.default)("#connected-accounts"),t=e.attr("data-password-change-url");e.on("click",'a[href="#delete"]',function(e){e.preventDefault();var n=(0,s.default)(this).closest("tr"),a=n.find("script").html(),r=n.data("type"),o=n.data("pk"),l=u.default.concat("user","3rdparty",r);s.default.ajax({type:"DELETE",url:l.toString(o),dataType:"json",success:function(){if("openid"!==r)(0,s.default)(e.target).closest("div").replaceWith(a);else{var t=n.closest("tbody");n.remove(),0===t.find("tr").length&&((0,s.default)("h2").remove(),t.closest("table").remove())}"github"===r&&(n.find(".github-import").remove(),(0,s.default)("#import-github-repo-link").remove())},error:function(){var e=gettext('Please <a href="%(password_change_url)s">set a password</a> before disconnecting this account');i.default.messages.error({body:interpolate(e,{password_change_url:t},!0)})}})})},e.exports=t.default},2613:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=a(r),o=n(54),s=a(o);t.default=function(e){(0,i.default)("#delete-account").on("click","form button",function(e){e.preventDefault(),(0,s.default)({id:"delete-account-dialog",title:gettext("Delete account"),warning:!0,content:gettext("This is a destructive operation. Delete account?"),submitText:gettext("Delete")}).done(function(){(0,i.default)(e.target).closest("form").submit()})})},e.exports=t.default},2614:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var i=r(["<div>","</div>"],["<div>","</div>"]),o=n(5),s=a(o),l=n(10),u=a(l),d=n(771),c=a(d),f=n(0),p=a(f),m=n(2),h=a(m),g=n(63),v=a(g),y=n(8),b=a(y),_=u.default.Model.extend({idAttribute:"email"}),w=u.default.Collection.extend({model:_,initialize:function(e,t){this.emailsApi=t.emailsApi,this.isTeam=t.isTeam},comparator:function(e){return[e.get("primary")?0:1,e.get("active")?0:1,e.get("email").toLowerCase()]},isEmailAid:function(e){return e.is_atlassian_id},parse:function(e){return this.isAidProfile=h.default.any(e,this.isEmailAid),h.default.reject(e,this.isEmailAid)},url:function(){return this.emailsApi.toString()}}),x=u.default.View.extend({tagName:"tr",template:"email-template",events:{'click [href="#delete"]':"deleteEmail",'click [href="#resend"]':"resend",'click [href="#set-as-primary"]':"setAsPrimary"},initialize:function(){this.model.on("change",this.render,this),this.model.on("highlight",this.highlight,this)},render:function(e){e="boolean"==typeof e&&e;var t=this.model.toJSON();return t.team=this.model.collection.isTeam,t.isAidProfile=this.model.collection.isAidProfile,this.$el.html(b.default.toHtml(this.template,t)),e&&this.model.get("primary")&&this.highlight(),this},highlight:function(){var e=this.$el.addClass("highlight");setTimeout(function(){e.animate({backgroundColor:"#fff"},{duration:1e3,complete:function(){e.removeClass("highlight")}})},1e3)},markSent:function(){var e=gettext("confirmation sent");return this.$(".status").addClass("sent").hide().html((0,c.default)(i,e)).fadeIn("slow"),this},resend:function(e){var t=this;return e.preventDefault(),this.model.save({},{wait:!0,success:function(e,n,a){e.get("active")?s.default.messages.success({body:gettext("Your email address has been confirmed."),fadeout:!0}):t.markSent()}}),this},deleteEmail:function(e){var t=this;return e.preventDefault(),this.model.destroy({wait:!0,error:function(e,n){var a=n.responseText;t.parent.respond(a?a.substr(0,140):gettext("An unknown error occurred."))}}),this},setAsPrimary:function(e){e.preventDefault(),this.model.save({primary:!0},{wait:!0,success:function(){s.default.messages.success({body:gettext("Your primary email address has been updated."),fadeout:!0})}})}}),E=u.default.View.extend({events:{"submit form":"onSubmit"},initialize:function(e){this.submitDisabled=!1,this.$table=this.$("table.widget"),this.$form=this.$("form"),this.$inputRow=this.$("tr.form"),this.$body=this.$("tbody"),this.$emailAddress=this.$("#email-input"),this.$error=this.$(".error"),this.collection.on("add",this.emailAdd,this),this.collection.on("remove",this.emailRemove,this),this.collection.on("reset",this.render,this),this.collection.on("change:primary",this.reorder,this)},render:function(e){if(this.$inputRow=this.$inputRow.detach(),this.$body.empty(),this.$body.append(this.$inputRow),this.collection.length)this.collection.forEach(function(t){var n=new x({model:t});return n.parent=this,this.$body.append(n.render(e).el),this}.bind(this));else{var t=gettext("No email addresses");this.$body.append('<tr><td colspan="3">'+t+"</td></tr>")}return this},reorder:function(e){var t=this.collection.find(function(t){return t.get("email")!==e.get("email")&&t.get("primary")});t&&t.set({primary:!1},{silent:!0}),this.collection.sort(),this.render(!0)},emailAdd:function(e,t){this.render(),this.respond(),e.trigger("highlight")},emailRemove:function(e,t,n){this.render(),this.respond()},_reword:function(e){var t=/not a valid email address/.test(e);return t?gettext("Invalid email address."):e},respond:function(e){if(e){var t=this._reword(e);this.$error.removeClass("hidden").find(".message").text(t)}else this.$error.addClass("hidden").find(".message").text("")},onSubmit:function(e){var t=this;e.preventDefault();var n=this.$emailAddress.val().trim();if(!this.submitDisabled&&n){if(this.collection.get(n.toLowerCase()))return void this.respond(gettext("You've already added this email address."));this.submitDisabled=!0;var a=setTimeout(function(){t.$form.addClass("loading")},400),r=function(){window.clearTimeout(a),t.$form.removeClass("loading"),t.submitDisabled=!1};this.collection.create({email:n},{wait:!0,complete:r,error:function(e,n){return t.respond(n.responseText)},success:function(e,n){t.$emailAddress.val(""),t.respond()}})}}});t.default=function(e){var t=(0,p.default)("#account-email"),n=new w([],{emailsApi:v.default.concat("users",t.attr("data-target-user"),"emails"),isTeam:!!t.attr("data-target-user-is-team")});new E({el:(0,p.default)("#email-pane")[0],collection:n}),n.fetch({reset:!0})},e.exports=t.default},2615:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=a(r),o=n(5),s=a(o),l=n(2351),u=a(l),d=n(54),c=a(d),f=n(47),p=a(f),m=n(249),h=a(m),g=n(248),v=a(g),y=n(119),b=a(y),_=n(303),w=a(_),x=n(108),E=a(x),T=n(121),S=a(T),P=n(8),M=a(P),O=n(74),D=a(O),C=n(734),k=a(C);n(44),t.default=function(){function e(e){var t=_.attr("data-team-access"),n=_.attr("data-repo-access");e.find("#group-name").val(_.attr("data-name")),e.find(".error").addClass("hidden"),e.find("#group-access").find('option[value="'+t+'"]').prop("selected",!0).change(),e.find("#team-permissions").find('input[type="checkbox"]').prop("checked",!1),e.find("#team-permissions").find('input[value="'+t+'"]').prop("checked",!0).change(),e.find("#default-access").find('option[value="'+n+'"]').prop("selected",!0).change(),e.find("#group-emails").prop("checked","True"!==_.attr("data-emails"))}function t(){x.loading(i.default.ajax({url:x.attr("data-url-delete"),type:"DELETE"})).done(function(){window.location.href=(0,i.default)("#group-heading").find("a").attr("href")}).fail(function(){s.default.messages.error({body:gettext("There was an error deleting this group")})})}function n(){var e=P.find("#repo-access").val(),t=P.find("#all-repos").prop("checked");return i.default.ajax({url:T.attr("data-url"),type:"POST",data:{access:e,repos:t?"all":"group"}}).then(function(e,t,n){return(0,E.default)(n.getResponseHeader("Location"))}).then(function(){S.default.addMessage(gettext("Repository access updated successfully")),window.location.reload(!0)})}function a(e){return i.default.ajax({url:N,type:"POST",data:{username:e}})}function r(e){return i.default.ajax({url:L.format(e),type:"PUT"})}function o(e,t){return function(n){var a=void 0,r=void 0;if("user"===e?(a=n,a.avatar=n.links.avatar.href,r="group-member-template"):(a={email:t},r="group-invite-template"),"email"===e)j.append(M.default.toHtml(r,a));else{var i=j.find("[data-email]").first();i.length?i.before(M.default.toHtml(r,a)):j.append(M.default.toHtml(r,a))}R.val(""),j.find(".empty").addClass("hidden"),I.empty()}}function l(e){I.empty(),s.default.messages.error(I,{title:JSON.parse(e.responseText).error.message,closeable:!1})}function d(e){e.preventDefault();var t=(0,i.default)(this),n=t.closest("tr"),a=n.attr("data-username");t.loading(i.default.ajax({url:U.format(a),type:"DELETE"})).done(function(){m(n)}).fail(l)}function f(e){e.preventDefault();var t=(0,i.default)(this),n=t.closest("tr"),a=n.attr("data-email");t.loading(i.default.ajax({url:L.format(a),type:"DELETE"})).done(function(){m(n)})}function m(e){I.empty(),e.remove();var t=!!j.find(".iterable-item").length,n=j.find(".empty");n.toggleClass("hidden",t)}function g(e){e.preventDefault();var t=(0,i.default)(this),n=t.closest("tr"),a=n.attr("data-email");r(a).done(function(){s.default.messages.success({body:gettext("Your invitation has been re-sent"),fadeout:!0})})}function y(e,t){return function(){var n=window.location.href,a=window.location.search.length,r=n.slice(0,-a),o={};o[e]=t,r=r+"?"+i.default.param(o),D.default.update({repositories:null,members:null}).update(e,t),i.default.support.pjax?window.history.replaceState({},"",r):window.location.replace(r)}}var _=(0,i.default)("#group-data"),x=(0,i.default)("#delete-button");(0,u.default)({$trigger:(0,i.default)("#edit-button"),id:"edit-group-dialog",title:gettext("Edit group"),beforeDialogShow:e,saveOptions:function(e){return{url:e.attr("data-update-url"),type:"PUT"}}}),x.on("click",function(e){e.preventDefault(),(0,c.default)({content:gettext("Are you sure you want to delete this group?"),title:gettext("Delete group?"),submitText:gettext("Delete")}).done(t)});var T=(0,i.default)("#permissions-dialog-trigger"),P=(0,i.default)(M.default.toHtml("group-permissions-template",{}));P.find("select").auiSelect2();var O=new p.default({title:T.text(),submitText:gettext("Update"),content:P,submitAction:n});T.on("click",function(e){e.preventDefault(),O.show()});var C=(0,i.default)("#group-members"),A=(0,i.default)("#add-member-form"),I=(0,i.default)("#member-error"),j=A.find("tbody"),R=(0,i.default)("#group-add-member"),N=A.attr("data-group-url"),L=A.attr("data-invite-url"),U=A.attr("data-remove-member-url");C.on("pjax:complete",function(){A=(0,i.default)("#add-member-form"),I=(0,i.default)("#member-error"),j=A.find("tbody"),R=(0,i.default)("#group-add-member")}),C.on("submit",A,function(e){e.preventDefault();var t=R.val();t.trim()&&a(t).done(o("user")).fail(function(e){if(404===e.status&&k.default.email.test(t))r(t).done(o("email",t)).fail(l);else if(402===e.status){var n=i.default.parseJSON(e.responseText).data;n.owner=!0,(0,w.default)(A.find(".add-button"),{data:n})}else l(e)})}),C.on("click",".remove-member",d).on("click",".remove-email",f).on("click","[href=#resend]",g);var F=(0,i.default)("#group-repositories"),$=(0,i.default)("#repositories-pane"),q=(0,i.default)("#group-members"),B=(0,i.default)("#members-pane"),H=$.find(".maskable").data("page"),z=B.find("#add-member-form").data("page"),G={timeout:3e4,scrollTo:!1};(0,b.default)(B,i.default.extend({$pjaxContainer:q},G)),(0,b.default)($,i.default.extend({$pjaxContainer:F},G)),$.on("pjax:beforeReplace",function(e,t){H=(0,i.default)(t[1]).closest("[data-page]").data("page")}),B.on("pjax:beforeReplace",function(e,t){z=(0,i.default)(t[1]).closest("[data-page]").data("page")}),(0,i.default)("#repositories-tab").on("tabSelect",y("repositories",H)),(0,i.default)("#members-tab").on("tabSelect",y("members",z)),(0,h.default)({$container:$,$pjaxContainer:F,filterTerm:$.find(".filter-status").attr("data-filter-term"),ignoreQuery:"repositories",pjaxOptions:G}),(0,v.default)({$pjaxContainer:F,$controls:(0,i.default)("#repo-filter"),ignoreQuery:"repositories",pjaxOptions:G})},e.exports=t.default},2616:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=a(r),o=n(7),s=n(2572),l=a(s),u=n(992),d=a(u),c=n(2368),f=a(c);t.default=(0,o.once)(function(){var e=(0,i.default)("#groups");if(!e.data("teamGroups")){var t=e.find("#groups-container"),n=t.data("account-privileges"),a=new f.default.Groups([],{targetUser:d.default});t.addClass("loading"),a.fetch({reset:!0,success:function(e){t.removeClass("loading"),e.each(function(e){var t=e.get("owner").username,a=e.get("slug");e.get("owner").is_team&&(e.privilege=new f.default.GroupAccountPrivilege({group:e,privilege:n[t+"/"+a]||null}))}),new l.default({el:t,collection:e,isTeam:t.data("is-team")}).render();var a=(0,i.default)(location.hash.replace(/:/,"\\:"));a.length&&setTimeout(function(){var e=a.closest("li").offset().top-20;(0,i.default)(document.body).scrollTop(e)},500)}})}}),e.exports=t.default},2617:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","circle");return(0,s.default)(n).attr({cx:"52",cy:"52",r:"50",class:e,fill:"none","stroke-dasharray":t.join(" ")}),n}function i(e){e/=100;var t=c*e,n=void 0,a=void 0;if(0===e?n=c:(n=c-t-f,n=Math.max(n,0)),0===n)a=[0,c-t,0,-(t-c)];else{var r=c-(n+t);a=[0,t+r/2,n,r/2]}return{gray:a,highlight:[t,c-t]}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=a(o),l=n(119),u=a(l),d=50,c=2*Math.PI*d,f=6,p=[[100,"red"],[89,"yellow"],[74,"green"]];t.default=function(){var e=(0,s.default)("#lfs-usage"),t=e.find("#lfs-usage-pjax");if(t.length){(0,u.default)(t,{$pjaxContainer:t});var n=Math.min(e.data("usage-percent"),100),a=i(n),o=p[0][1];p.forEach(function(e){n<=e[0]&&(o=e[1])});var l=e.find(".lfs-usage--chart");l.append(r("silver",a.gray)),l.append(r(o,a.highlight))}},e.exports=t.default},2618:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,i){try{var o=t[r](i),s=o.value}catch(e){return void n(e)}return o.done?void e(s):Promise.resolve(s).then(function(e){a("next",e)},function(e){a("throw",e)})}return a("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){e.each(function(e,t){var n=(0,u.default)(t),a=n.data("mirror-baseurl"),r=new y({$el:n,baseurl:a});r.updateStatus()})}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),u=a(l),d=n(20),c=a(d),f=n(5),p=a(f),m=n(54),h=a(m),g=6e4,v=3e4,y=function(){function e(t){i(this,e),this.options=t}return s(e,[{key:"requestNewStatus",value:function(){return(0,c.default)({url:"/status",baseURL:this.options.baseurl,timeout:v})}},{key:"updateStatus",value:function(){function e(){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(){var t,n,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=void 0,e.prev=2,e.next=5,this.requestNewStatus();case 5:t=!0,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),t=!1;case 11:n=this.options.$el.find(".mirroring-admin--list--mirror--status"),n.removeClass("mirror-online").removeClass("mirror-offline"),n.addClass(t?"mirror-online":"mirror-offline"),n.text(t?gettext("Online"):gettext("Offline"));case 15:return e.prev=15,setTimeout(function(){return a.updateStatus()},g),e.finish(15);case 18:case"end":return e.stop()}},e,this,[[0,,15,18],[2,8]])}));return e}()}]),e}();t.default=function(){var e=(0,u.default)(".mirroring-admin--list--mirror");o(e);var t=(0,u.default)(".mirroring-admin--panel");e.on("click",function(n){var a=(0,u.default)(n.currentTarget);n.preventDefault(),u.default.pjax({url:a.data("config-url"),push:!0,container:t,scrollTo:null,timeout:3e4}),e.filter(".selected-item").removeClass("selected-item"),a.addClass("selected-item"),t.empty()}),t.on("click",".mirroring-admin--panel--actions--delete",function(e){var t=(0,u.default)(e.currentTarget),n=t.data("mirror-name"),a=interpolate(gettext("Are you sure you want to delete <b>%(mirrorName)s</b>?"),{mirrorName:n},!0),r=gettext("This can't be undone");(0,h.default)({title:gettext("Delete this mirror"),content:"<p>"+a+"</p><p>"+r+"</p>",submitText:gettext("Delete"),isSafeContent:!0}).done(function(){(0,c.default)({url:t.data("delete-url"),method:"DELETE"}).then(function(){window.location.href=t.data("post-delete-redirect")},function(){var e=gettext("Unable to delete %(mirrorName)s. Try again later.");p.default.messages.error({body:interpolate(e,{mirrorName:n},!0)})})})})},e.exports=t.default},2619:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=r.dialog;return n?(n.setContent(t),n.setTitle(e)):(n=r.dialog=new y.default({dialogId:"bb-manage-watched-items-dialog",title:e,content:t}),o(n.getContent())),n}function i(e){var t=(0,f.default)(e.target).closest("a"),n=(0,f.default)('<div class="maskable has-mask"></div>'),a=r(t.attr("title"),n),i=a.getContent();f.default.support.pjax&&((0,f.default)(document).one("pjax:beforeSend","#"+i.attr("id"),function(){a.show()}),f.default.pjax.click(e,{url:(0,f.default)(this).attr("href"),push:!1,container:i,timeout:3e4}))}function o(e){var t=(0,f.default)("#account-notifications");e.on("click","a.unwatch-all",function(n){e.addClass("has-mask"),n.preventDefault();var a=(0,f.default)(n.target),r=a.attr("href"),i=e.find("#watched-items").attr("data-type");
f.default.ajax({url:r,type:"DELETE",dataType:"json"}).done(function(){l.default.messages.info({body:M[i],fadeout:!0}),e.find("table tbody tr a.follow").each(function(){(0,f.default)(this).trigger("toggle-follow",{isNowFollowing:!1})}),t.trigger("watched-items:clear",{type:i})}).complete(function(){e.removeClass("has-mask")})});var n={pullrequest:"pullrequests",repo:"repositories",issue:"issues",snippet:"snippets"};e.on("follow:repo follow:pullrequest follow:issue follow:snippet","a.follow",function(e,a){var r=(0,f.default)(e.target).attr("data-type");a?t.trigger("watched-items:increment",{type:n[r]}):t.trigger("watched-items:decrement",{type:n[r]})})}Object.defineProperty(t,"__esModule",{value:!0});var s=n(5),l=a(s),u=n(10),d=a(u),c=n(0),f=a(c),p=n(2),m=a(p);n(52);var h=n(54),g=a(h),v=n(47),y=a(v),b=n(63),_=a(b),w=n(8),x=a(w),E={},T=E.EmailPreference=d.default.Model.extend({idAttribute:"key"}),S=E.EmailPreferences=d.default.Collection.extend({model:T,initialize:function(e,t){this.prefsApi=t.prefsApi},url:function(){return this.prefsApi.toString()},findByKey:function(e){return this.find(function(t){return t.attributes.key===e})}});E.ui={};var P=E.ui.EmailPreferencesView=d.default.View.extend({events:{"click input.checkbox":"updatePreferences","click #toggle-email":"toggleEmail"},togglePreference:function(e,t){var n=this,a=this.collection.findByKey(e);a?(t&&t(!1),a.destroy({success:function(){l.default.messages.success({body:gettext("Email preferences updated."),fadeout:!0})},error:function(e){l.default.messages.error({body:gettext("Email preferences failed to update.")}),n.collection.add(e),t&&t(!0)}})):(a=new T({key:e,value:!0}),this.collection.add(a),t&&t(!0),a.save({},{success:function(){l.default.messages.success({body:gettext("Email preferences updated."),fadeout:!0})},error:function(){l.default.messages.error({body:gettext("Email preferences failed to update.")}),n.collection.remove(a),t&&t(!1)}}))},updatePreferences:function(e){var t=(0,f.default)(e.target),n=(0,f.default)(e.target).attr("name");this.togglePreference(n,function(e){e?t.attr("checked","checked"):t.removeAttr("checked")})},toggleEmail:function(e){function t(e){var t=(0,f.default)(x.default.toHtml("toggle-email-template",{email_enabled:e}));a.toggleClass("disabled",!e),r.replaceWith(t)}var n=this;e.preventDefault();var a=this.$el.find("form.email-notifications"),r=(0,f.default)("#toggle-email-container"),i=function(){n.togglePreference("enabled",t)};a.hasClass("disabled")?i(!0):(0,g.default)({title:gettext("Okay, we'll be quiet"),isSafeContent:!0,content:x.default.toHtml("disable-email-confirmation-template")}).done(i)}}),M={repositories:gettext("All repositories unwatched."),pullrequests:gettext("All pull requests unwatched."),issues:gettext("All issues unwatched."),snippets:gettext("All snippets unwatched.")};t.default=function(e){function t(e){return n.find(".type."+e+" .watched-count")}var n=(0,f.default)("#account-notifications"),a=n.find("form.email-notifications"),r={enabled:!a.hasClass("disabled"),mentions:a.find("#id_mentions").is(":checked"),direct_messages:a.find("#id_direct_messages").is(":checked"),access_changes:a.find("#id_access_changes").is(":checked"),bb_updates:a.find("#id_bb_updates").is(":checked")},s=[];m.default.map(r,function(e,t){e&&s.push(new T({key:t,value:e}))});var l=new S(s,{prefsApi:_.default.concat("user","emailpreferences",n.attr("data-target-user"))});new P({el:n[0],collection:l}),a.find("div.description").each(function(e,t){var n=(0,f.default)(t);n.tooltip({title:function(){return n.text()}})}),n.find("a.manage-watched-items").on("click",i),n.bind("watched-items:clear",function(e,a){var r=a.type;t(r).text("0"),n.find(".type."+r+" + .actions a").hide()}),n.bind("watched-items:increment",function(e,a){var r=a.type,i=t(r),o=parseInt(i.text(),10);i.text(++o),o&&n.find(".type."+r+" + .actions a").show()}),n.bind("watched-items:decrement",function(e,a){var r=a.type,i=t(r),o=parseInt(i.text(),10);i.text(--o),o||n.find(".type."+r+" + .actions a").hide()});var u=(0,f.default)("#watched-pull-requests, #watched-issues, #watched-repositories, #watched-snippets");o(u.find(".maskable"))},e.exports=t.default},2620:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(147),i=a(r),o=n(0),s=a(o),l=n(2),u=a(l),d=n(2589),c=a(d),f=n(2594),p=a(f),m=n(2590),h=a(m),g=n(2596),v=a(g),y=n(2496),b=a(y),_=n(8),w=a(_);t.default=function(){function e(e){if(!e.find("tbody tr").length){var t=(0,s.default)('<tr class="empty"><td colspan="2">You have no consumers configured.</td><td></td></tr>');e.find("tbody").append(t)}}var t=(0,s.default)("#consumers"),n=t.find(".consumer-authorizations"),a=t.find(".consumer-denials"),r=new c.default,o=new h.default;r.fetch({wait:!0}).done(function(){b.default.unmask(n)}),o.fetch({wait:!0}).done(function(){b.default.unmask(a)}),b.default.mask(n,{spinner:b.default.spinnerSizes.SMALL}),b.default.mask(a,{spinner:b.default.spinnerSizes.SMALL}),new p.default({collection:r,el:n}).render(),new v.default({collection:o,el:a}).render();var l=(0,s.default)("#oauth-consumers"),d=l.find("table.widget"),f=l.attr("data-target-user"),m=i.default.user(f);u.default.each(l.data("consumers"),function(e){var t=(0,s.default)(w.default.toHtml("oauth-consumer-template",e)).data(e);d.append(t)}),d.find("tr.loading").remove(),e(d),(0,s.default)(".consumer").on("click","a[data-delete]",function(t){var n=(0,s.default)(this).closest(".consumer").attr("data-consumer"),a=(0,s.default)("#"+n);m.delete_consumer(a.data("id"),{success:function(){a.next().remove(),a.remove(),e(d)}})}),d.on("click","tr a.name",function(e){e.preventDefault(),(0,s.default)(this).closest("tr").toggleClass("revealed"),(0,s.default)(this).children(".expander").toggleClass("aui-iconfont-collapsed").toggleClass("aui-iconfont-expanded")})},e.exports=t.default},2621:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=a(r),o=n(2355),s=a(o);t.default=function(){(0,s.default)((0,i.default)("#plan-users"))},e.exports=t.default},2622:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(0),o=a(i),s=n(2355),l=a(s);n(44);var u=n(1),d=a(u),c=n(24),f=n(65),p=n(2968),m=a(p),h=n(2656),g=a(h),v=n(2361),y=n(2359),b=n(2360),_=n(2664),w=a(_),x=n(155),E=a(x);t.default=function(){var e=document.getElementById("plans-and-billing"),t=e.hasAttribute("data-is-legacy-plans");t?(0,l.default)((0,o.default)("#plans-and-billing")):!function(){var t={planDetails:r({},v.initialState),billingDetails:r({},y.initialState),creditCard:r({},b.initialState)},n=JSON.parse(e.dataset.account),a=JSON.parse(e.dataset.currentPlan),i=e.dataset.prevPlanName,o=e.dataset.nextPlanName,s=JSON.parse(e.dataset.downgradePending),l=e.dataset.downgradeSurveyUrl,u=JSON.parse(e.dataset.showDowngradeSurvey),p=JSON.parse(e.dataset.hasPaymentDetails),h=JSON.parse(e.dataset.billingDetails),_=JSON.parse(e.dataset.creditCard),x=JSON.parse(e.dataset.billingEstimate);n&&(t.planDetails.account=n),i&&(t.planDetails.account.prevPlanName=i),o&&(t.planDetails.account.nextPlanName=o),s&&(t.planDetails.account.downgradePending=s),l&&(t.planDetails.account.downgradeSurveyUrl=l),u&&(t.planDetails.account.showDowngradeSurvey=u),p&&(t.planDetails.account.hasPaymentDetails=p),a&&(t.planDetails.currentPlan=a),h&&(t.billingDetails=h),_&&(t.creditCard=_),x&&(x.usages.forEach(function(e){var n=(0,m.default)(e,{deep:!0});t.planDetails.usage[e.type]=r({},n,{amountBeforeTax:parseFloat(n.amountBeforeTax)})}),t.planDetails.amountBeforeTax=parseFloat(x.amount_before_tax),t.planDetails.currentBillingPeriod=x.current_billing_period);var T=(0,E.default)(w.default,{initialState:t});(0,c.render)(d.default.createElement(f.Provider,{store:T},d.default.createElement(g.default,null)),e)}()},e.exports=t.default},2623:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=a(r),o=n(670),s=a(o);t.default=function(e){var t=(0,i.default)("#change-avatar"),n=(0,i.default)(".avatar-view .aui-avatar"),a=t.data("submitUrl"),r=t.data("isAtlassianId"),o=(0,i.default)("#account-admin").data("isTeam"),l=t.data("textTitle"),u=t.data("textDelete"),d=(0,i.default)("#change-avatar .aui-avatar img, #account-switcher .aui-avatar img");o||(d=d.add("#user-dropdown-trigger .aui-avatar img"));var c=new s.default({analyticsType:"Account",avatars:d,endpointUrl:a,dialogTitle:l,isAtlassianId:r,showDelete:t.hasClass("has-avatar"),templateOptions:{deleteText:u,maskClass:"avatar256"},trigger:t,uploadIndicator:n});"#avatar"===window.location.hash&&c.show()},e.exports=t.default},2624:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(147),i=a(r),o=n(0),s=a(o),l=n(1875),u=a(l);t.default=function(){var e=(0,s.default)("#account-ssh-keys"),t=e.attr("data-target-user"),n=i.default.user(t),a=(0,s.default)("#edit-ssh-key");(0,u.default)(e,{onEdit:function(e,t){return n.update_ssh_key(a.find("#ssh_pk").val(),e,t)},onCreate:function(e,t){return n.add_ssh_key(e,t)},onDelete:function(e,t){return n.remove_ssh_key(e,t)}})},e.exports=t.default},2625:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=a(r),o=n(5),s=a(o),l=n(2351),u=a(l),d=n(2566),c=a(d),f=n(54),p=a(f);n(44),t.default=function(){var e=(0,i.default)("#groups");if(e.data("teamGroups")){(0,u.default)({$trigger:(0,i.default)("#add-group-button"),id:"add-group-dialog",header:gettext("Add group"),saveText:gettext("Add"),saveOptions:function(e){return{url:e.attr("action"),type:"POST"}}});var t=(0,i.default)("#group-errors"),n=e.find("tbody"),a=e.attr("data-remove-group-url");n.on("click",".remove-group",function(e){e.preventDefault();var n=(0,i.default)(this),r=n.parents("tr");(0,p.default)({submitText:gettext("Remove"),title:gettext("Remove group?"),content:interpolate(gettext("Are you sure you want to remove the group %(group)s?"),{group:r.attr("data-name")},!0)}).done(function(){n.loading(i.default.ajax({url:a.format(r.attr("data-group")),type:"DELETE"})).done(function(){r.remove()}).fail(function(e){s.default.messages.error(t,{title:JSON.parse(e.responseText).error.message,closeable:!1})})})}),(0,c.default)({$trigger:(0,i.default)("#add-member-button"),memberAdded:function(e){e.forEach(function(e){var t=n.find("[data-group="+e+"] .member-count"),a=parseInt(t.text(),10);t.text(a+1)})}})}},e.exports=t.default},2626:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=a(r),o=n(1),s=a(o),l=n(24),u=n(65),d=n(2597),c=a(d),f=n(2604),p=a(f),m=n(2605),h=a(m),g=n(155),v=a(g);t.default=function(){var e=(0,i.default)("#theme-app"),t=(0,v.default)(h.default);t.dispatch((0,c.default)()),(0,l.render)(s.default.createElement(u.Provider,{store:t},s.default.createElement(p.default,null)),e[0]),(0,i.default)("#repo-admin").one("pjax:beforeSend",function(){(0,l.unmountComponentAtNode)(e[0])})},e.exports=t.default},2627:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={api:{v10:{userPreference:function(e,t){return"/!api/1.0/user/preferences/"+e+"/"+t+"/"}}}},e.exports=t.default},2644:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(298);t.default=function(e){return{type:a.CHANGE_ADDRESS,payload:e}},e.exports=t.default},2645:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(298);t.default=function(e){return{type:a.CHANGE_CARD,payload:e}},e.exports=t.default},2646:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(298);t.default=function(e){return{type:a.CHANGE_PLAN,payload:e}},e.exports=t.default},2647:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(298);t.default=function(e,t){return{type:a.TOGGLE_INFO_DIALOG,payload:{dialogId:e,open:t}}},e.exports=t.default},2650:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(20),d=a(u),c=n(117),f=a(c),p=n(296),m=a(p),h=n(1),g=a(h),v=n(34),y=n(2627),b=a(y),_=n(380),w=function(e){function t(){var e,n,a,o;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.state={isOpen:a.props.showDowngradeSurvey},a.close=function(){var e=b.default.api.v10.userPreference(a.props.targetUsername,"dismiss-downgrade-survey");d.default.post(e,"value=True"),a.setState({isOpen:!1})},o=n,i(a,o)}return o(t,e),l(t,[{key:"componentDidMount",value:function(){this.props.showDowngradeSurvey&&(0,v.publishFact)(new _.DowngradeSurveyShownFact)}},{key:"componentWillReceiveProps",value:function(e){!this.props.showDowngradeSurvey&&e.showDowngradeSurvey&&(0,v.publishFact)(new _.DowngradeSurveyShownFact)}},{key:"render",value:function(){var e=this.props.surveyUrl,t=g.default.createElement("h2",null,gettext("Please take a minute to share your feedback with us")),n=g.default.createElement(f.default,{appearance:"default",onClick:this.close},gettext("Dismiss"));return g.default.createElement(m.default,s({},this.props,{isOpen:this.state.isOpen,footer:n,header:t,onDialogDismissed:this.close,width:"medium"}),g.default.createElement("iframe",{className:"surveygizmo",src:e}))}}]),t}(h.PureComponent);t.default=w,e.exports=t.default},2651:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=a(r),o=n(30),s=a(o),l=n(434),u=a(l),d=n(170),c=a(d),f=n(243),p=a(f),m=n(2653),h=a(m),g=n(2650),v=a(g),y=n(2662),b=a(y),_=n(2358),w=a(_),x=function(e){return i.default.createElement("div",null,i.default.createElement("div",{className:"aui-help aui-help-text billing--help"},i.default.createElement("div",{className:"aui-help-content"},i.default.createElement("p",null,gettext("There is no credit card on file.")),i.default.createElement("p",null,i.default.createElement("a",{href:c.default.ui.billingDetailsHelp,target:"_blank",rel:"noopener"},gettext("Learn more"))," about what might work for you or your team."),i.default.createElement("p",null,i.default.createElement("a",{href:c.default.ui.billingDetails(p.default),target:"_blank",rel:"noopener"},gettext("Add credit card"))))))},E=function(e){return i.default.createElement("div",null,i.default.createElement("div",{className:"billing--address"},i.default.createElement("div",null,i.default.createElement("span",{className:"assistive"},gettext("Organization")),i.default.createElement("strong",null,e.billingDetails.organisationName)),e.billingDetails.address&&i.default.createElement("div",null,i.default.createElement("span",{className:"assistive"},gettext("Address")),e.billingDetails.address),i.default.createElement("div",null,i.default.createElement("span",{className:"assistive"},gettext("City/State/Postcode")),e.billingDetails.city&&e.billingDetails.city+", ",e.billingDetails.state," ",e.billingDetails.postcode),i.default.createElement("div",null,i.default.createElement("span",{className:"assistive"},gettext("Country")),e.billingDetails.country),e.billingDetails.tax_id&&i.default.createElement("div",null,i.default.createElement("span",null,gettext("Tax ID:")),e.billingDetails.tax_id)),i.default.createElement("div",{className:"billing--credit-card"},i.default.createElement("div",null,i.default.createElement("span",null,gettext("Credit card:")),e.creditCard.maskedNumber),i.default.createElement("div",null,i.default.createElement("span",null,gettext("Cardholder:")),e.creditCard.name),i.default.createElement("div",null,i.default.createElement("span",null,gettext("Expires:")),e.creditCard.expiryMonth," / ",e.creditCard.expiryYear)),i.default.createElement("a",{href:c.default.ui.billingDetails(p.default)},gettext("Update credit card")))},T=function(e){var t="hams_premium_pup_2017"===e.currentBillingPeriod.start_plan,n=(0,s.default)({"aui-message":!0,"aui-message-info":!t,"aui-message-warning":t}),a=(new Date).getTimezoneOffset();return i.default.createElement("div",{className:n},i.default.createElement("p",null,t?interpolate(gettext("We'll process your downgrade to %(nextPlanName)s after your\n            current billing cycle ends on %(endDate)s. You'll lose any saved settings\n            for Premium features at the same time."),{nextPlanName:(0,b.default)(e.currentBillingPeriod.end_plan),endDate:(0,u.default)((0,w.default)(e.currentBillingPeriod.end_date,a),"mmm d, yyyy")},!0):interpolate(gettext("We'll process your downgrade to %(nextPlanName)s after your\n            current billing cycle ends on %(endDate)s."),{nextPlanName:(0,b.default)(e.currentBillingPeriod.end_plan),endDate:(0,u.default)((0,w.default)(e.currentBillingPeriod.end_date,a),"mmm d, yyyy")},!0)),i.default.createElement("p",null,i.default.createElement("a",{href:c.default.ui.planDowngradeHelp,target:"_blank",rel:"noopener"},gettext("Learn more"))," · ",i.default.createElement("a",{href:c.default.ui.planDowngradeCancel(p.default,e.planName)},gettext("Cancel downgrade"))))},S=function(e){var t=e.planDetails.account.hasPaymentDetails?i.default.createElement(E,{billingDetails:e.billingDetails,creditCard:e.creditCard}):i.default.createElement(x,null);return i.default.createElement("div",null,i.default.createElement("h1",null,gettext("Plan details")),e.planDetails.account.downgradePending&&i.default.createElement(T,{currentBillingPeriod:e.planDetails.currentBillingPeriod}),i.default.createElement(v.default,{targetUsername:e.planDetails.account.targetUser,showDowngradeSurvey:e.planDetails.account.showDowngradeSurvey,surveyUrl:e.planDetails.account.downgradeSurveyUrl}),i.default.createElement("div",{className:"aui-group plan-details-overview"},i.default.createElement("div",{className:"aui-item"},i.default.createElement(h.default,{plan:e.planDetails.currentPlan,usage:e.planDetails.usage,currentBillingPeriod:e.planDetails.currentBillingPeriod,amountBeforeTax:e.planDetails.amountBeforeTax,planSelectorUrl:c.default.ui.planSelector(p.default),handleDialogHide:e.handleDialogHide,handleDialogShow:e.handleDialogShow,isStorageDialogOpen:e.isStorageDialogOpen,isMinutesDialogOpen:e.isMinutesDialogOpen})),i.default.createElement("div",{className:"aui-item"},i.default.createElement("div",{className:"billing-details--container"},i.default.createElement("h2",null,gettext("Billing details")),i.default.createElement("section",null,t),i.default.createElement("section",{className:"billing--links"},i.default.createElement("ul",null,i.default.createElement("li",null,i.default.createElement("a",{href:c.default.ui.billingFAQ,target:"_blank",rel:"noopener"},gettext("Billing FAQ"))),i.default.createElement("li",null,i.default.createElement("a",{href:c.default.ui.billingContactUs,target:"_blank",rel:"noopener"},gettext("Contact us about your bill")))))))))};S.propTypes={planDetails:r.PropTypes.shape({account:r.PropTypes.shape({nextPlanName:r.PropTypes.string,prevPlanName:r.PropTypes.string,downgradePending:r.PropTypes.bool,downgradeSurveyUrl:r.PropTypes.string,showDowngradeSurvey:r.PropTypes.bool,hasPaymentDetails:r.PropTypes.bool}).isRequired,currentPlan:r.PropTypes.shape({name:r.PropTypes.string.isRequired,isPaid:r.PropTypes.bool.isRequired,isPremium:r.PropTypes.bool.isRequired,includedUsers:r.PropTypes.number.isRequired,includedBytes:r.PropTypes.number.isRequired,includedSeconds:r.PropTypes.number.isRequired}).isRequired,usage:r.PropTypes.shape({users:r.PropTypes.shape({value:r.PropTypes.number.isRequired,amountBeforeTax:r.PropTypes.number.isRequired}).isRequired,storage:r.PropTypes.shape({value:r.PropTypes.number.isRequired,amountBeforeTax:r.PropTypes.number.isRequired}).isRequired,seconds:r.PropTypes.shape({value:r.PropTypes.number.isRequired,amountBeforeTax:r.PropTypes.number.isRequired}).isRequired}).isRequired,currentBillingPeriod:r.PropTypes.shape({start_date:r.PropTypes.string.isRequired,end_date:r.PropTypes.string.isRequired,start_plan:r.PropTypes.string.isRequired,end_plan:r.PropTypes.string.isRequired}).isRequired,amountBeforeTax:r.PropTypes.number.isRequired}),onPlanChange:r.PropTypes.func,onAddressChange:r.PropTypes.func,onCardChange:r.PropTypes.func,handleDialogHide:r.PropTypes.func,handleDialogShow:r.PropTypes.func,isStorageDialogOpen:r.PropTypes.bool,isMinutesDialogOpen:r.PropTypes.bool},t.default=S,e.exports=t.default},2652:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(30),i=a(r),o=n(1),s=a(o),l=n(2953),u=a(l),d=function(e){return s.default.createElement("span",{className:(0,i.default)("price",e.className,{"price--add":e.addPrice})},(0,u.default)(e.amount,0))};d.propTypes={addPrice:o.PropTypes.bool,amount:o.PropTypes.number.isRequired,className:o.PropTypes.string},t.default=d,e.exports=t.default},2653:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=a(r),o=n(243),s=a(o),l=n(170),u=a(l),d=n(482),c=a(d),f=n(2654),p=a(f),m=function(e){return i.default.createElement("div",null,i.default.createElement("div",{className:"current-plan"},i.default.createElement("span",null,interpolate(gettext("You're on the %(planName)s plan."),{planName:e.plan.description},!0)),i.default.createElement(c.default,{className:"plan-change-button aui-button-primary",href:u.default.ui.planSelector(s.default)},"hams_free_pup_2017"===e.plan.name||"hams_free_overages_pup_2017"===e.plan.name?gettext("Upgrade plan"):gettext("Change plan"))),i.default.createElement("h2",null,gettext("Usage summary")),i.default.createElement(p.default,{plan:e.plan,usage:e.usage,currentBillingPeriod:e.currentBillingPeriod,amountBeforeTax:e.amountBeforeTax,handleDialogHide:e.handleDialogHide,handleDialogShow:e.handleDialogShow,isStorageDialogOpen:e.isStorageDialogOpen,isMinutesDialogOpen:e.isMinutesDialogOpen}))};m.propTypes={plan:r.PropTypes.shape({name:r.PropTypes.string.isRequired,isPaid:r.PropTypes.bool.isRequired,isPremium:r.PropTypes.bool.isRequired,includedUsers:r.PropTypes.number.isRequired,includedBytes:r.PropTypes.number.isRequired,includedSeconds:r.PropTypes.number.isRequired}).isRequired,usage:r.PropTypes.shape({users:r.PropTypes.shape({value:r.PropTypes.number.isRequired,amountBeforeTax:r.PropTypes.number.isRequired}).isRequired,storage:r.PropTypes.shape({value:r.PropTypes.number.isRequired,amountBeforeTax:r.PropTypes.number.isRequired}).isRequired,seconds:r.PropTypes.shape({value:r.PropTypes.number.isRequired,amountBeforeTax:r.PropTypes.number.isRequired}).isRequired}).isRequired,currentBillingPeriod:r.PropTypes.shape({start_date:r.PropTypes.string.isRequired,end_date:r.PropTypes.string.isRequired,start_plan:r.PropTypes.string.isRequired,end_plan:r.PropTypes.string.isRequired}).isRequired,amountBeforeTax:r.PropTypes.number.isRequired,handleDialogHide:r.PropTypes.func,handleDialogShow:r.PropTypes.func,isStorageDialogOpen:r.PropTypes.bool,isMinutesDialogOpen:r.PropTypes.bool},t.default=m,e.exports=t.default},2654:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(434),i=a(r),o=n(1),s=a(o),l=n(2655),u=n(243),d=a(u),c=n(170),f=a(c),p=n(41),m=n(2658),h=a(m),g=n(2666),v=a(g),y=n(2667),b=a(y),_=n(2358),w=a(_),x=n(2652),E=a(x),T=function(e){var t=e.dialogId+"-info-dialog";return s.default.createElement("div",{className:"usage-info-dialog-trigger"},s.default.createElement(p.AuiInlineDialogTrigger,{dialogId:t},s.default.createElement(p.AuiIcon,{type:"info",size:"small"},gettext("More information"))),s.default.createElement(p.AuiInlineDialog,{className:"usage-info-dialog",id:t,alignment:"bottom left",onHide:function(){return e.handleDialogHide(e.dialogId)},onShow:function(){return e.handleDialogShow(e.dialogId)},open:e.isDialogOpen},s.default.createElement("div",null,s.default.createElement("p",null,e.planInclusionMessage,s.default.createElement("br",null),e.plan.name.endsWith("_annual")?"":e.additionalUsageMessage),s.default.createElement(p.AuiButtonsContainer,null,s.default.createElement(p.AuiButton,{id:t+"--close",className:"aui-button-primary",onClick:function(){return e.handleDialogHide(e.dialogId)}},gettext("Got it")),s.default.createElement(p.AuiButton,{href:e.learnMoreLink,className:"aui-button-link",target:"_blank",rel:"noopener"},gettext("Learn more"))))))};T.propTypes={dialogId:o.PropTypes.string.isRequired,learnMoreLink:o.PropTypes.string.isRequired,handleDialogHide:o.PropTypes.func,handleDialogShow:o.PropTypes.func,isDialogOpen:o.PropTypes.bool,planInclusionMessage:o.PropTypes.string,additionalUsageMessage:o.PropTypes.string,plan:o.PropTypes.shape({name:o.PropTypes.string.isRequired,isPaid:o.PropTypes.bool.isRequired,isPremium:o.PropTypes.bool.isRequired,includedUsers:o.PropTypes.number.isRequired,includedBytes:o.PropTypes.number.isRequired,includedSeconds:o.PropTypes.number.isRequired}).isRequired};var S=function(e){var t=function(e,t,n,a){var r=n*a+t-e;return r<0?0:r},n=(0,v.default)(t(e.usage.storage.value,e.plan.includedBytes,e.usage.storage.packs,l.PACK_BYTES)),a=(0,b.default)(t(e.usage.seconds.value,e.plan.includedSeconds,e.usage.seconds.packs,l.PACK_SECONDS)),r=void 0,o=void 0;e.plan.isPaid&&!e.plan.name.endsWith("annual")?(r=interpolate(gettext("%(storageAvailable)s remaining until you get additional storage"),{storageAvailable:(0,h.default)(n)},!0),o=interpolate(ngettext("%(buildMinutesAvailable)s build minute remaining until you get additional minutes","%(buildMinutesAvailable)s build minutes remaining until you get additional minutes",a),{buildMinutesAvailable:a},!0)):(r=interpolate(gettext("%(storageAvailable)s remaining"),{storageAvailable:(0,h.default)(n)},!0),o=interpolate(ngettext("%(buildMinutesAvailable)s build minute remaining","%(buildMinutesAvailable)s build minutes remaining",a),{buildMinutesAvailable:a},!0));var u=(new Date).getTimezoneOffset();return s.default.createElement(p.AuiTable,{className:"usage--table"},s.default.createElement("tbody",null,s.default.createElement("tr",{className:"usage--row"},s.default.createElement("td",{className:"usage--description"},s.default.createElement("strong",null,interpolate(ngettext("%(users)s user","%(users)s users",e.usage.users.value),{users:e.usage.users.value},!0))," ",gettext("on your plan"),s.default.createElement("div",{className:"usage--helptext"},s.default.createElement("a",{href:f.default.ui.planUsers(d.default)},gettext("See these users")))),s.default.createElement("td",{className:"usage--price"},s.default.createElement(E.default,{className:"price--user",amount:e.usage.users.amountBeforeTax}))),s.default.createElement("tr",{className:"usage--row"},s.default.createElement("td",{className:"usage--description"},s.default.createElement("strong",null,(0,h.default)((0,v.default)(e.usage.storage.value)))," ",gettext("of file storage used"),s.default.createElement("div",{className:"usage--helptext"},r," ",s.default.createElement(T,{dialogId:"storage",learnMoreLink:f.default.ui.fileStorageUsageHelp,handleDialogHide:e.handleDialogHide,handleDialogShow:e.handleDialogShow,isDialogOpen:e.isStorageDialogOpen,planInclusionMessage:interpolate(gettext("Your plan includes %(usageIncluded)s of file storage"),{usageIncluded:(0,h.default)((0,v.default)(e.plan.includedBytes))},!0),additionalUsageMessage:interpolate(gettext("Additional storage $%(cost)s / %(size)s"),{cost:l.PACK_BYTES_COST,size:(0,h.default)((0,v.default)(l.PACK_BYTES))},!0),plan:e.plan}))),s.default.createElement("td",{className:"usage--price"},s.default.createElement(E.default,{className:"price--storage",amount:e.usage.storage.amountBeforeTax,addPrice:!0}))),s.default.createElement("tr",{className:"usage--row"},s.default.createElement("td",{className:"usage--description"},s.default.createElement("strong",null,interpolate(ngettext("%(buildMinutes)s build minute","%(buildMinutes)s build minutes",(0,b.default)(e.usage.seconds.value)),{buildMinutes:(0,b.default)(e.usage.seconds.value)},!0))," ",gettext("used this billing period"),s.default.createElement("div",{className:"usage--helptext"},o," ",s.default.createElement(T,{dialogId:"minutes",learnMoreLink:f.default.ui.buildMinutesUsageHelp,handleDialogHide:e.handleDialogHide,handleDialogShow:e.handleDialogShow,isDialogOpen:e.isMinutesDialogOpen,planInclusionMessage:interpolate(gettext("Your plan includes %(usageIncluded)s build minutes"),{usageIncluded:(0,b.default)(e.plan.includedSeconds)},!0),additionalUsageMessage:interpolate(gettext("Additional minutes $%(cost)s / %(size)s mins"),{cost:l.PACK_SECONDS_COST,size:(0,b.default)(l.PACK_SECONDS)},!0),plan:e.plan}))),s.default.createElement("td",{className:"usage--price"},s.default.createElement(E.default,{className:"price--build-minutes",amount:e.usage.seconds.amountBeforeTax,addPrice:!0}))),s.default.createElement("tr",{className:"usage--row usage--total"},s.default.createElement("td",{className:"usage--description"},s.default.createElement("strong",null,gettext("Total based on current usage")),s.default.createElement("div",{className:"usage--helptext"},gettext("Billing period:")," ",(0,i.default)((0,w.default)(e.currentBillingPeriod.start_date,u),"mmm d, yyyy")," - ",(0,i.default)((0,w.default)(e.currentBillingPeriod.end_date,u),"mmm d, yyyy"))),s.default.createElement("td",{className:"usage--price"},s.default.createElement(E.default,{className:"price--total",amount:e.amountBeforeTax})))))};S.propTypes={plan:o.PropTypes.shape({name:o.PropTypes.string.isRequired,isPaid:o.PropTypes.bool.isRequired,isPremium:o.PropTypes.bool.isRequired,includedUsers:o.PropTypes.number.isRequired,includedBytes:o.PropTypes.number.isRequired,includedSeconds:o.PropTypes.number.isRequired}).isRequired,usage:o.PropTypes.shape({users:o.PropTypes.shape({value:o.PropTypes.number.isRequired,amountBeforeTax:o.PropTypes.number.isRequired,packs:o.PropTypes.number.isRequired}).isRequired,storage:o.PropTypes.shape({value:o.PropTypes.number.isRequired,amountBeforeTax:o.PropTypes.number.isRequired,packs:o.PropTypes.number.isRequired}).isRequired,seconds:o.PropTypes.shape({value:o.PropTypes.number.isRequired,amountBeforeTax:o.PropTypes.number.isRequired,packs:o.PropTypes.number.isRequired}).isRequired}).isRequired,currentBillingPeriod:o.PropTypes.shape({start_date:o.PropTypes.string.isRequired,end_date:o.PropTypes.string.isRequired,start_plan:o.PropTypes.string.isRequired,end_plan:o.PropTypes.string.isRequired}).isRequired,amountBeforeTax:o.PropTypes.number.isRequired,handleDialogHide:o.PropTypes.func,
handleDialogShow:o.PropTypes.func,isStorageDialogOpen:o.PropTypes.bool,isMinutesDialogOpen:o.PropTypes.bool},t.default=S,e.exports=t.default},2655:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PACK_BYTES=100*Math.pow(1024,3),t.PACK_BYTES_COST=10,t.PACK_SECONDS=6e4,t.PACK_SECONDS_COST=10},2656:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(65),i=n(2646),o=a(i),s=n(2645),l=a(s),u=n(2644),d=a(u),c=n(2651),f=a(c),p=n(2647),m=a(p),h=function(e){return{planDetails:e.planDetails,creditCard:e.creditCard,billingDetails:e.billingDetails,isStorageDialogOpen:e.ui.storage,isMinutesDialogOpen:e.ui.minutes}},g=function(e){return{onPlanChange:function(t){return e((0,o.default)(t))},onCardChange:function(t){return e((0,l.default)(t))},onAddressChange:function(t){return e((0,d.default)(t))},handleDialogHide:function(t){return e((0,m.default)(t,!1))},handleDialogShow:function(t){return e((0,m.default)(t,!0))}}};t.default=(0,r.connect)(h,g)(f.default),e.exports=t.default},2658:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3165),i=a(r),o=n(7),s=a(o),l=function(e){return(0,i.default)(e)?e.toString():Math.floor(100*e)/100};t.default=function(e){var t=parseFloat(e),n=s.default.isNaN(t)||!s.default.isFinite(t)?0:t,a=Math.pow(2,10),r=Math.pow(2,20);return 0===n||n<0?"0 MB":n<1?"< 1 MB":n<a?l(n)+" MB":n<r?l(n/a)+" GB":n>=r?l(n/r)+" TB":void 0},e.exports=t.default},2662:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={hams_100_user_annual:"100 Users (annual)",hams_100_user_tiered_legacy:"100 Users (tiered)",hams_10_user_annual:"10 Users (annual)",hams_10_user_tiered_legacy:"10 Users (tiered)",hams_25_user_annual:"25 Users (annual)",hams_25_user_tiered_legacy:"25 Users (tiered)",hams_50_user_annual:"50 Users (annual)",hams_50_user_tiered_legacy:"50 Users (tiered)",hams_5_user_tiered_legacy:"5 Users (tiered)",hams_academic_overages_pup_2017:"Academic",hams_academic_pup_2017:"Academic",hams_academic_tiered_legacy:"Academic (tiered)",hams_atlassian_individuals_pup_2017:"Atlassian",hams_atlassian_teams_pup_2017:"Atlassian Teams",hams_atlassian_teams_tiered_legacy:"Atlassian Teams (tiered)",hams_atlassian_users_tiered_legacy:"Atlassian (tiered)",hams_community_overages_pup_2017:"Community",hams_community_pup_2017:"Community",hams_community_tiered_legacy:"Community (tiered)",hams_free_overages_pup_2017:"Free",hams_free_pup_2017:"Free",hams_grandfathered_pup_2017:"Unlimited",hams_premium_pup_2017:"Premium",hams_standard_pup_2017:"Standard",hams_unlimited_user_annual:"Unlimited (annual)",hams_unlimited_user_tiered_legacy:"Unlimited (tiered)"},r="Unknown";t.default=function(e){return a[e]||r},e.exports=t.default},2664:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(104),i=n(2359),o=a(i),s=n(2360),l=a(s),u=n(2361),d=a(u),c=n(2665),f=a(c);t.default=(0,r.combineReducers)({billingDetails:o.default,creditCard:l.default,planDetails:d.default,ui:f.default}),e.exports=t.default},2665:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=n(51),s=a(o),l=n(298),u=t.initialState={storage:!1,minutes:!1};t.default=(0,s.default)(u,r({},l.TOGGLE_INFO_DIALOG,function(e,t){return i({},e,r({},t.payload.dialogId,t.payload.open))}))},2666:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Math.ceil(e/1048576)},e.exports=t.default},2667:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Math.ceil(e/60)},e.exports=t.default},2737:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.AddonsScopesDeniedFact=void 0;var s=n(58),l=a(s);t.AddonsScopesDeniedFact=function(e){function t(){var e,n,a,o;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.name="bitbucket.account.addons.scopes.denied",o=n,i(a,o)}return o(t,e),t}(l.default)},2772:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.AddonsDirectoryItemInstallClickedFact=t.AddonsDirectoryItemExternalIntegrationClickedFact=void 0;var s=n(58),l=a(s);t.AddonsDirectoryItemExternalIntegrationClickedFact=function(e){function t(){var e,n,a,o;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.name="bitbucket.account.addons.directory.item.external.integration.click",o=n,i(a,o)}return o(t,e),t}(l.default),t.AddonsDirectoryItemInstallClickedFact=function(e){function t(){var e,n,a,o;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.name="bitbucket.account.addons.directory.item.install.click",o=n,i(a,o)}return o(t,e),t}(l.default)},2773:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=a(r);t.default=i.default.Model.extend({}),e.exports=t.default},2774:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=gettext("There was a problem processing your request.");try{n=JSON.parse(e.responseText).error.message}catch(e){}var a=S.default.toHtml("addon-error-template",{error_message:n,help_link:"undefined"==typeof t?null:t});(0,h.default)({size:"small",content:a,dialog2:!0,warning:!0,showCloseIcon:!0,hideFooter:!0,isSafeContent:!0})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),o=a(i),s=n(29),l=a(s),u=n(2),d=a(u),c=n(34),f=n(2356),p=a(f),m=n(85),h=a(m),g=n(1889),v=a(g),y=n(2381),b=a(y),_=n(1894),w=a(_),x=n(2391),E=a(x),T=n(8),S=a(T);n(59);var P=n(2772);t.default=l.default.ItemView.extend({behaviors:{expandableBoxedListItem:{behaviorClass:p.default}},template:"#addon-directory-list-item-template",tagName:"li",className:"directory-list--item boxed-list--item",ui:{form:"form",installButton:".install-button",integrationButton:".directory-list--external-integration-button",instanceUrl:"#id_instance_url"},events:{"click @ui.installButton":"installAddOn","click @ui.integrationButton":"triggerIntegrationLink","aui-valid-submit @ui.form":"installTemplateAddOn"},initialize:function(e){this.manageUrl=e.manageUrl,this.collection=e.collection,this.listenTo(this.model,"change:installed",this.render)},templateHelpers:function(){return{isInstalled:!!this.model.get("installed"),expanded:this.expanded,manageUrl:this.manageUrl}},focusInput:function(){this.ui.instanceUrl.focus()},displayInstalledMessage:function(e){var t=e.get("name"),n=interpolate(gettext('Add-on "%(addOnName)s" has been installed. You may need to refresh the page to see changes to navigation.'),{addOnName:d.default.escape(t)},!0);o.default.messages.success({body:n,fadeout:!0})},installAddOn:function(){this.model.get("template")||this._installAddOn()},installTemplateAddOn:function(e){e.preventDefault(),this._installAddOn()},_installAddOn:function(){var e=this,t=e.model.get("template")?e.ui.instanceUrl.val():null,n=e.model.get("url"),a=e.model.get("template")?(0,w.default)(t,n):n,i=new E.default(d.default.extend({},e.model.toJSON(),{url:a}),{collection:this.collection}),o=e.model.get("help_link"),s=e.ui.installButton.text();(0,c.publishFact)(new P.AddonsDirectoryItemInstallClickedFact({instanceUrl:t,addon_key:e.model.get("connection_key")})),i.validateDescriptor().fail(function(e){r(e,o)}).fail(function(){e.ui.installButton.disable(!1,{text:s})}).done(function(t){e.model.get("template")&&0!==t.key.indexOf(e.model.get("connection_key"))?((0,h.default)({size:"small",title:gettext("URL not found"),content:gettext("There is not a valid instance for this add-on at that URL."),dialog2:!0,warning:!0,showCloseIcon:!0,hideFooter:!0}),e.ui.installButton.disable(!1,{text:s})):(0,v.default)(i,{id:"install-addon",submitClass:"install-addon-button"}).fail(function(){e.ui.installButton.disable(!1,{text:s})}).done(function(){i.save({descriptor:t},{wait:!0,success:function(t){e.model.set({installed:(e.model.get("installed")||0)+1}),(0,b.default)(i)||e.displayInstalledMessage(t)},error:function(t,n){e.ui.installButton.disable(!1,{text:s}),r(n,o)}})})}),e.ui.installButton.disable(!0,{text:gettext("Adding")})},triggerIntegrationLink:function(){(0,c.publishFact)(new P.AddonsDirectoryItemExternalIntegrationClickedFact({integrationUrl:this.model.get("url"),key:this.model.get("connection_key")}))}}),e.exports=t.default},2775:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(29),i=a(r),o=n(2),s=a(o),l=n(2774),u=a(l);t.default=i.default.CollectionView.extend({childView:u.default,childViewOptions:function(){return{manageUrl:this.manageUrl,collection:this.collection}},addChild:function(e,t,n){this.category&&!s.default.contains(e.get("categories"),this.category)||i.default.CollectionView.prototype.addChild.apply(this,arguments)},initialize:function(e){this.targetUser=e.targetUser,this.manageUrl=e.manageUrl},filterResults:function(e){this.category=e,this.render()},toggleAddonExpandedState:function(e){var t=this.children.findByModel(e);t.triggerMethod("ToggleExpandedState"),t.focusInput()}}),e.exports=t.default},2776:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(29),i=a(r);t.default=i.default.ItemView.extend({template:"#addon-management-blank-slate-template",tagName:"li",className:"management-list--item boxed-list--item"}),e.exports=t.default},2777:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=a(r),o=n(29),s=a(o),l=n(2),u=a(l),d=n(2356),c=a(d),f=n(54),p=a(f),m=n(1889),h=a(m),g=n(2429),v=a(g);n(59),t.default=s.default.ItemView.extend({behaviors:{expandableBoxedListItem:{behaviorClass:c.default}},template:"#addon-management-list-item-template",tagName:"li",className:"management-list--item boxed-list--item",ui:{uninstallButton:".uninstall-button",updateButton:".update-button"},events:{"click @ui.uninstallButton":"uninstallAddOn","click @ui.updateButton":"updateAddOn"},templateHelpers:function(){return{logo:this.model.get("logo")||this.defaultLogo}},initialize:function(e){this.defaultLogo=e.defaultLogo},uninstallAddOn:function(e){e.preventDefault();var t=this,n=this.model,a=u.default.escape(n.get("name")),r=gettext("Are you sure you wish to remove the add-on\n        <strong>%(addOnName)s</strong>?  You may lose any settings and\n        this cannot be undone."),i=interpolate(r,{addOnName:a},!0),o=interpolate(gettext("Add-on <strong>%(addOnName)s</strong> has been removed.\n          You may need to refresh the page to see changes to navigation."),{addOnName:a},!0),s=this.ui.uninstallButton.text();(0,p.default)({id:"remove-addon",title:gettext("Remove add-on"),content:i,isSafeContent:!0,submitText:gettext("Remove"),submitClass:"remove-addon-button"}).fail(function(){t.ui.uninstallButton.disable(!1,{text:s})}).done(function(){n.destroy({wait:!0,success:function(){t.success(o)},error:function(){t.ui.uninstallButton.disable(!1,{text:s}),v.default.apply(t,arguments)}})}),t.ui.uninstallButton.disable(!0,{text:gettext("Removing")})},updateAddOn:function(e){e.preventDefault();var t=this,n=this.model,a=u.default.escape(n.get("name")),r=gettext("Are you sure you wish to update the add-on %(addOnName)s?  The descriptor will be re-fetched from the same URL and this cannot be undone.  Any existing settings will remain."),i=interpolate(r,{addOnName:a},!0),o=interpolate(gettext('Add-on "%(addOnName)s" has been updated. You may need to refresh the page to see changes to navigation.'),{addOnName:a},!0),s=this.ui.updateButton.text();n.validateDescriptor(n.get("descriptor_url")).fail(v.default).done(function(){(0,h.default)(n,{id:"update-addon",title:gettext("Update add-on"),content:i,submitText:gettext("Update")}).always(function(){t.ui.updateButton.disable(!1,{text:s})}).done(function(){n.save({},{url:n.url()+"/descriptor",data:JSON.stringify(n.get("descriptor")),wait:!0,success:function(){t.success(o)},error:function(){t.ui.updateButton.disable(!1,{text:s}),v.default.apply(t,arguments)}})})}),t.ui.updateButton.disable(!0,{text:gettext("Updating")})},success:function(e){i.default.messages.success({body:e,fadeout:!0})}}),e.exports=t.default},2778:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(29),i=a(r),o=n(2),s=a(o),l=n(2776),u=a(l),d=n(2777),c=a(d);t.default=i.default.CollectionView.extend({childView:c.default,childViewOptions:function(){return{defaultLogo:this.defaultLogo}},emptyView:u.default,addChild:function(e,t,n){this.category&&!s.default.contains(e.get("categories"),this.category)||i.default.CollectionView.prototype.addChild.apply(this,arguments)},initialize:function(e){this.targetUser=e.targetUser,this.defaultLogo=e.defaultLogo,this.listenTo(this,"render remove:child",this.toggleBlankSlateClass)},toggleBlankSlateClass:function(){this.$el.toggleClass("management-list--blank-slate blank-slate",0===this.collection.length)},filterResults:function(e){this.category=e,this.render()},toggleAddonExpandedState:function(e){this.children.findByModel(e).triggerMethod("ToggleExpandedState")}}),e.exports=t.default},2779:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=a(r),o=n(0),s=a(o),l=n(29),u=a(l),d=n(2),c=a(d),f=n(1889),p=a(f),m=n(2381),h=a(m),g=n(2429),v=a(g);t.default=u.default.ItemView.extend({template:!1,ui:{dialogForm:".dialog-form",dialogCancelButton:".dialog-cancel-button",dialogInstallButton:".dialog-install-button",urlInput:"#custom-descriptor-url"},events:{"click @ui.dialogCancelButton":"cancelDialog","submit @ui.dialogForm":"installAddOn","click @ui.dialogInstallButton":"installAddOn"},initialize:function(e){this.bindUIElements(),this.dialog=e.dialog,this.collection=e.collection},cancelDialog:function(){this.clearUrlInput(),this.dialog.hide()},clearUrlInput:function(){this.ui.urlInput.val("")},installAddOn:function(e){e.preventDefault();var t=this,n=t.ui.urlInput.val().trim(),a=new t.collection.model({url:n},{collection:t.collection});a.validateDescriptor().fail(v.default).done(function(e){t.dialog.hide(),(0,p.default)(a,{id:"install-addon"}).done(function(){a.save({descriptor:e},{wait:!0,success:function(e){s.default.ajax({url:t.collection.urlRoot+"/"+e.id+"/marketplace",success:function(n){t.collection.add(n),t.clearUrlInput(),(0,h.default)(a)||t.displayInstalledMessage(e.get("name"))},fail:function(){t.clearUrlInput(),(0,h.default)(a)||t.displayInstalledMessage(e.get("name"))}})},error:v.default})})})},displayInstalledMessage:function(e){var t=interpolate(gettext('Add-on "%(addOnName)s" has been installed. You may need to refresh the page to see changes to navigation.'),{addOnName:c.default.escape(e)},!0);i.default.messages.success({body:t,fadeout:!0})}}),e.exports=t.default},2780:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=a(r),o=n(10),s=a(o),l=n(2779),u=a(l);t.default=s.default.View.extend({events:{"click .custom-addon-button":"showCustomAddonDialog"},showCustomAddonDialog:function(){this.dialog||(this.dialog=i.default.dialog2("#marketplace-custom-addon-dialog"),new u.default({el:this.dialog.$el,dialog:this.dialog,collection:this.collection})),this.dialog.show()}}),e.exports=t.default},292:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1044),i=a(r);t.default=new i.default,e.exports=t.default},2948:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return(0,i.default)(function(){(0,i.default)(document.body).on(t,e,n)}),function(){(0,i.default)(document.body).off(t,e,n)}};var r=n(0),i=a(r);e.exports=t.default},2953:function(e,t,n){"use strict";function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=parseInt(e,10).toFixed(t);return"$"+n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a,e.exports=t.default},2954:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.find(".aui-message.error");return t.length||(t=(0,l.default)("<div>").addClass("aui-message error").append((0,l.default)("<p>").addClass("title").append((0,l.default)("<span>").addClass("aui-icon aui-icon-error"),(0,l.default)("<span>").addClass("error-message"))).prependTo(e)),t}function i(e,t){var n=e.find('[name="{}"]'.format(t)),a=n.next(".error");return a.length||(a=(0,l.default)("<div>").addClass("error").insertAfter(n)),a}function o(e,t){var n=JSON.parse(t.responseText),a=n.error.message,o=n.error.fields;o&&d.default.forEach(o,function(t,n){i(e,n).removeClass("hidden").text(t)}),r(e).removeClass("hidden").find(".error-message").text(a)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),l=a(s),u=n(2),d=a(u);t.default={markApiErrors:o},e.exports=t.default},2968:function(e,t,n){"use strict";var a=n(3175),r=n(2969),i=function(e,t){return e.some(function(e){return"string"==typeof e?e===t:e.test(t)})};e.exports=function(e,t){t=t||{};var n=t.exclude||[];return a(e,function(e,t){return e=i(n,e)?e:r(e),[e,t]})}},2969:function(e,t,n){"use strict";function a(e){for(var t=!1,n=0;n<e.length;n++){var a=e.charAt(n);t&&/[a-zA-Z]/.test(a)&&a.toUpperCase()===a?(e=e.substr(0,n)+"-"+e.substr(n),t=!1,n++):t=a.toLowerCase()===a}return e}e.exports=function(){var e=[].map.call(arguments,function(e){return e.trim()}).filter(function(e){return e.length}).join("-");return e.length?1===e.length?e.toLowerCase():/[_.\- ]+/.test(e)?(e=a(e),e.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,function(e,t){return t.toUpperCase()})):e===e.toUpperCase()?e.toLowerCase():e[0]!==e[0].toLowerCase()?e[0].toLowerCase()+e.slice(1):e:""}},298:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return"billing/plan-details/"+e};t.CHANGE_PLAN=a("CHANGE_PLAN"),t.CHANGE_CARD=a("CHANGE_CARD"),t.CHANGE_ADDRESS=a("CHANGE_ADDRESS"),t.TOGGLE_INFO_DIALOG=a("TOGGLE_INFO_DIALOG")},301:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return this.init(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=a(i),s=n(2),l=a(s);r.typeFilters={all:/.*/,application:/^application\/.*/,audio:/^audio\/.*/,image:/^image\/.*/,imageWeb:/^image\/(jpeg|png|gif)$/,text:/^text\/.*/,video:/^video\/.*/},r.prototype.defaults={fileTypeFilter:r.typeFilters.all,fileCountLimit:1/0,fileSizeLimit:20971520,onSuccess:o.default.noop,onError:o.default.noop},r.prototype.init=function(e){return this.options=o.default.extend({},this.defaults,e),e&&!e.fileSizeLimit&&(this.options.fileSizeLimit=this.defaults.fileSizeLimit),e&&!e.fileCountLimit&&(this.options.fileCountLimit=this.defaults.fileCountLimit),l.default.bindAll(this,"handleFiles","filterFiles"),this},r.prototype.handleFiles=function(e,t){var n=this.filterFiles(e);n.valid.length>0?l.default.isFunction(this.options.onSuccess)&&this.options.onSuccess(n.valid):l.default.isFunction(this.options.onError)&&this.options.onError(n.invalid)},r.prototype.filterFiles=function(e){var t=l.default.isRegExp(this.options.fileTypeFilter)?this.options.fileTypeFilter:this.defaults.fileTypeFilter,n=this.options.fileSizeLimit,a={byType:[],bySize:[],byCount:[]},r=l.default.filter(e,function(e){return t.test(e.type)?!(e.size>n)||(a.bySize.push(e),!1):(a.byType.push(e),!1)});return r.length>this.options.fileCountLimit&&(a.byCount=r.slice(this.options.fileCountLimit),r=r.slice(0,this.options.fileCountLimit)),{valid:r,invalid:a}},t.default=r,e.exports=t.default},303:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function n(e,t,n){e.html(h.default.toHtml("upgrade-dialog-template",r));var a=e.find(".upgrade-button");a.on("mousedown",function(){(0,c.default)("upgrade_dialog_button_clicked",{user:r.user.username})}),a.on("click",function(e){e.preventDefault();var t=a.loading(s.default.ajax({type:"POST",url:a.attr("data-upgrade-url"),dataType:"json"}));t.done(function(e){e.href&&(window.location.href=e.href)})}),n&&n()}t=t||{};var a,r=t.data||{};a=i.default.InlineDialog(e,"upgrade-dialog",n,{closeOthers:!1,hideCallback:function(){(0,s.default)(a).remove()},initCallback:function(){},cacheContent:!1,hideDelay:null,noBind:!0,calculatePositions:t.calculatePositions||u.default.alignRight()}),a.show(),p.default.trackEvent("Account","Upgrade Dialog","Shown"),(0,s.default)(a).on("click","a",function(){p.default.trackEvent("Account","Upgrade Dialog","Clicked")}),(0,c.default)("upgrade_dialog_shown",{user:r.user.username})};var r=n(5),i=a(r),o=n(0),s=a(o),l=n(128),u=a(l),d=n(493),c=a(d),f=n(39),p=a(f),m=n(8),h=a(m);e.exports=t.default},3164:function(e,t,n){"use strict";var a=n(3191);e.exports=Number.isFinite||function(e){return!("number"!=typeof e||a(e)||e===1/0||e===-(1/0))}},3165:function(e,t,n){var a=n(3164);e.exports=Number.isInteger||function(e){return"number"==typeof e&&a(e)&&Math.floor(e)===e}},3175:function(e,t,n){"use strict";e.exports=function(e,t){for(var n={},a=Object.keys(e),r=0;r<a.length;r++){var i=a[r],o=t(i,e[i],e);n[o[0]]=o[1]}return n}},3186:function(e,t,n){var a=n(53);e.exports=function(){var e=new a.Template({code:function(e,t,n){var a=this;return a.b(n=n||""),a.s(a.f("passwords",e,t,1),e,t,0,14,543,"[[ ]]")&&(a.rs(e,t,function(e,t,a){a.b("  <tr>"),a.b("\n"+n),a.b('    <td class="name">'),a.b(a.v(a.f("name",e,t,0))),a.b("</td>"),a.b("\n"+n),a.b('    <td class="created-on">'),a.b("\n"+n),a.b('      <time datetime="'),a.b(a.v(a.f("created_on",e,t,0))),a.b('">'),a.b(a.v(a.f("created_on",e,t,0))),a.b("</time>"),a.b("\n"+n),a.b("    </td>"),a.b("\n"+n),a.b('    <td class="last-accessed">'),a.b("\n"+n),a.s(a.f("last_accessed",e,t,1),e,t,0,210,285,"[[ ]]")&&(a.rs(e,t,function(e,t,a){a.b('        <time datetime="'),a.b(a.v(a.f("last_accessed",e,t,0))),a.b('">'),a.b(a.v(a.f("last_accessed",e,t,0))),a.b("</time>"),a.b("\n"+n)}),e.pop()),a.b("    </td>"),a.b("\n"+n),a.b('    <td class="actions">'),a.b("\n"+n),a.b("      <button"),a.b("\n"+n),a.b('          class="app-passwords--revoke-button aui-button aui-button-link"'),a.b("\n"+n),a.b('          data-name="'),a.b(a.v(a.f("name",e,t,0))),a.b('"'),a.b("\n"+n),a.b('          data-id="'),a.b(a.v(a.f("id",e,t,0))),a.b('">'),a.b("\n"+n),a.b("        "),a.b(a.v(a.f("revokeText",e,t,0))),a.b("\n"+n),a.b("      </button>"),a.b("\n"+n),a.b("    </td>"),a.b("\n"+n),a.b("  </tr>"),a.b("\n"+n)}),e.pop()),a.s(a.f("passwords",e,t,1),e,t,1,0,0,"")||(a.b("  <tr>"),a.b("\n"+n),a.b('    <td colspan="4">'),a.b("\n"+n),a.b("      <em>"),a.b("\n"+n),a.b("        "),a.b(a.v(a.f("blankSlateText",e,t,0))),a.b("\n"+n),a.b("      </em>"),a.b("\n"+n),a.b("    </td>"),a.b("\n"+n),a.b("  </tr>"),a.b("\n"+n)),a.fl()},partials:{},subs:{}},'[[#passwords]]\n  <tr>\n    <td class="name">[[name]]</td>\n    <td class="created-on">\n      <time datetime="[[created_on]]">[[created_on]]</time>\n    </td>\n    <td class="last-accessed">\n      [[#last_accessed]]\n        <time datetime="[[last_accessed]]">[[last_accessed]]</time>\n      [[/last_accessed]]\n    </td>\n    <td class="actions">\n      <button\n          class="app-passwords--revoke-button aui-button aui-button-link"\n          data-name="[[name]]"\n          data-id="[[id]]">\n        [[revokeText]]\n      </button>\n    </td>\n  </tr>\n[[/passwords]]\n[[^passwords]]\n  <tr>\n    <td colspan="4">\n      <em>\n        [[blankSlateText]]\n      </em>\n    </td>\n  </tr>\n[[/passwords]]\n',a);return e.render.apply(e,arguments)}},3187:function(e,t,n){var a=n(53);e.exports=function(){var e=new a.Template({code:function(e,t,n){var a=this;return a.b(n=n||""),a.b("<p>"),a.b("\n"+n),a.b("  "),a.b(a.t(a.f("description",e,t,0))),a.b("\n"+n),a.b("</p>"),a.b("\n"+n),a.b('<p class="app-passwords--password">'),a.b("\n"+n),a.b("  "),a.b(a.v(a.f("password",e,t,0))),a.b("\n"+n),a.b("</p>"),a.b("\n"),a.fl()},partials:{},subs:{}},'<p>\n  [[&description]]\n</p>\n<p class="app-passwords--password">\n  [[password]]\n</p>\n',a);return e.render.apply(e,arguments)}},3188:function(e,t,n){var a=n(53);e.exports=function(){var e=new a.Template({code:function(e,t,n){var a=this;return a.b(n=n||""),a.b('<div class="addon-authorize--logos'),a.s(a.f("hasRedirect",e,t,1),e,t,0,50,83,"[[ ]]")&&(a.rs(e,t,function(e,t,n){n.b(" addon-authorize--logos--redirect")}),e.pop()),a.b('">'),a.b("\n"+n),a.b("  <img "),a.s(a.d("addon.logo",e,t,1),e,t,0,124,144,"[[ ]]")&&(a.rs(e,t,function(e,t,n){n.b('src="'),n.b(n.v(n.d("addon.logo",e,t,0))),n.b('"')}),e.pop()),a.s(a.d("addon.logo",e,t,1),e,t,1,0,0,"")||(a.b('src="'),a.b(a.v(a.f("staticUrl",e,t,0))),a.b('img/connect/puzzle_piece.png"')),a.b(' class="addon-authorize--logo" alt="'),a.b(a.v(a.d("addon.descriptor.name",e,t,0))),a.b('"><img src="'),a.b(a.v(a.f("staticUrl",e,t,0))),a.b('img/logos/bitbucket/blue.svg" class="addon-authorize--logo" alt="Bitbucket">'),a.b("\n"+n),a.b("</div>"),a.b("\n"+n),a.s(a.f("accessRequestBeforeMessage",e,t,1),e,t,0,437,479,"[[ ]]")&&(a.rs(e,t,function(e,t,a){a.b("  <p>"),a.b(a.t(a.f("accessRequestBeforeMessage",e,t,0))),a.b("</p>"),a.b("\n"+n)}),e.pop()),a.b(a.t(a.f("scopes",e,t,0))),a.b("\n"+n),a.s(a.f("accessRequestAfterMessage",e,t,1),e,t,0,553,594,"[[ ]]")&&(a.rs(e,t,function(e,t,a){a.b("  <p>"),a.b(a.t(a.f("accessRequestAfterMessage",e,t,0))),a.b("</p>"),a.b("\n"+n)}),e.pop()),a.fl()},partials:{},subs:{}},'<div class="addon-authorize--logos[[#hasRedirect]] addon-authorize--logos--redirect[[/hasRedirect]]">\n  <img [[#addon.logo]]src="[[addon.logo]]"[[/addon.logo]][[^addon.logo]]src="[[staticUrl]]img/connect/puzzle_piece.png"[[/addon.logo]] class="addon-authorize--logo" alt="[[addon.descriptor.name]]"><img src="[[staticUrl]]img/logos/bitbucket/blue.svg" class="addon-authorize--logo" alt="Bitbucket">\n</div>\n[[#accessRequestBeforeMessage]]\n  <p>[[&accessRequestBeforeMessage]]</p>\n[[/accessRequestBeforeMessage]]\n[[&scopes]]\n[[#accessRequestAfterMessage]]\n  <p>[[&accessRequestAfterMessage]]</p>\n[[/accessRequestAfterMessage]]\n',a);return e.render.apply(e,arguments)}},3191:function(e,t,n){"use strict";e.exports=Number.isNaN||function(e){return e!==e}},3241:function(e,t,n){n(2468),n(2446),e.exports=n(2467)},380:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LFSSourceViewLoadFact=t.JiraIntegrationDialogShownFact=t.JiraIntegrationDialogIntegrateClickedFact=t.JiraIntegrationDialogDismissedFact=t.HipchatIntegrationInstalledFact=t.HipchatIntegrationInstallationErrorFact=t.HipchatIntegrationInstallationDialogTriggerClickedFact=t.HipchatIntegrationInstallationDialogShownFact=t.HipchatIntegrationInstallationDialogDismissedFact=t.HipchatIntegrationConfirmationPresentedFact=t.DowngradeSurveyShownFact=void 0;var s=n(58),l=a(s);t.DowngradeSurveyShownFact=function(e){function t(){var e,n,a,o;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.name="bitbucket.plans.downgrade.survey.presented",o=n,i(a,o)}return o(t,e),t}(l.default),t.HipchatIntegrationConfirmationPresentedFact=function(e){function t(){var e,n,a,o;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.name="bitbucket.hipchat.integration.confirmation.message.presented",o=n,i(a,o)}return o(t,e),t}(l.default),t.HipchatIntegrationInstallationDialogDismissedFact=function(e){function t(){var e,n,a,o;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.name="bitbucket.hipchat.integration.installation.dialog.dismissed",o=n,i(a,o)}return o(t,e),t}(l.default),t.HipchatIntegrationInstallationDialogShownFact=function(e){function t(){var e,n,a,o;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.name="bitbucket.hipchat.integration.installation.dialog.presented",o=n,i(a,o)}return o(t,e),t}(l.default),t.HipchatIntegrationInstallationDialogTriggerClickedFact=function(e){function t(){var e,n,a,o;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.name="bitbucket.hipchat.integration.installation.dialog.trigger.clicked",o=n,i(a,o)}return o(t,e),t}(l.default),t.HipchatIntegrationInstallationErrorFact=function(e){function t(){var e,n,a,o;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.name="bitbucket.hipchat.integration.installation.error",o=n,i(a,o)}return o(t,e),t}(l.default),t.HipchatIntegrationInstalledFact=function(e){function t(){var e,n,a,o;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];
return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.name="bitbucket.hipchat.integration.installed",o=n,i(a,o)}return o(t,e),t}(l.default),t.JiraIntegrationDialogDismissedFact=function(e){function t(){var e,n,a,o;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.name="bitbucket.jira.integration.dialog.dismissed",o=n,i(a,o)}return o(t,e),t}(l.default),t.JiraIntegrationDialogIntegrateClickedFact=function(e){function t(){var e,n,a,o;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.name="bitbucket.jira.integration.dialog.integrate.clicked",o=n,i(a,o)}return o(t,e),t}(l.default),t.JiraIntegrationDialogShownFact=function(e){function t(){var e,n,a,o;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.name="bitbucket.jira.integration.dialog.shown",o=n,i(a,o)}return o(t,e),t}(l.default),t.LFSSourceViewLoadFact=function(e){function t(){var e,n,a,o;r(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.name="bitbucket.lfs.source-view.load",o=n,i(a,o)}return o(t,e),t}(l.default)},383:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(175),i=a(r);t.default={api:{internal:{apps:function(e){return i.default.internal+"/account/"+e+"/apps/"},app:function(e,t){return i.default.internal+"/account/"+e+"/apps/"+t+"/"},appVersions:function(e,t){return i.default.internal+"/account/"+e+"/apps/"+t+"/versions/"}}}},e.exports=t.default},434:function(e,t,n){var a;!function(r){"use strict";function i(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}function o(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var n=new Date(t.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var a=t.getTimezoneOffset()-n.getTimezoneOffset();t.setHours(t.getHours()-a);var r=(t-n)/6048e5;return 1+Math.floor(r)}function s(e){var t=e.getDay();return 0===t&&(t=7),t}function l(e){return null===e?"null":void 0===e?"undefined":"object"!=typeof e?typeof e:Array.isArray(e)?"array":{}.toString.call(e).slice(8,-1).toLowerCase()}var u=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|'[^']*'|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g;return function(a,r,d,c){if(1!==arguments.length||"string"!==l(a)||/\d/.test(a)||(r=a,a=void 0),a=a||new Date,a instanceof Date||(a=new Date(a)),isNaN(a))throw TypeError("Invalid date");r=String(u.masks[r]||r||u.masks.default);var f=r.slice(0,4);"UTC:"!==f&&"GMT:"!==f||(r=r.slice(4),d=!0,"GMT:"===f&&(c=!0));var p=d?"getUTC":"get",m=a[p+"Date"](),h=a[p+"Day"](),g=a[p+"Month"](),v=a[p+"FullYear"](),y=a[p+"Hours"](),b=a[p+"Minutes"](),_=a[p+"Seconds"](),w=a[p+"Milliseconds"](),x=d?0:a.getTimezoneOffset(),E=o(a),T=s(a),S={d:m,dd:i(m),ddd:u.i18n.dayNames[h],dddd:u.i18n.dayNames[h+7],m:g+1,mm:i(g+1),mmm:u.i18n.monthNames[g],mmmm:u.i18n.monthNames[g+12],yy:String(v).slice(2),yyyy:v,h:y%12||12,hh:i(y%12||12),H:y,HH:i(y),M:b,MM:i(b),s:_,ss:i(_),l:i(w,3),L:i(Math.round(w/10)),t:y<12?"a":"p",tt:y<12?"am":"pm",T:y<12?"A":"P",TT:y<12?"AM":"PM",Z:c?"GMT":d?"UTC":(String(a).match(t)||[""]).pop().replace(n,""),o:(x>0?"-":"+")+i(100*Math.floor(Math.abs(x)/60)+Math.abs(x)%60,4),S:["th","st","nd","rd"][m%10>3?0:(m%100-m%10!=10)*m%10],W:E,N:T};return r.replace(e,function(e){return e in S?S[e]:e.slice(1,e.length-1)})}}();u.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},u.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},a=function(){return u}.call(t,n,t,e),!(void 0!==a&&(e.exports=a))}(this)},476:function(e,t){function n(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)a.call(n,r)&&(e[r]=n[r])}return e}e.exports=n;var a=Object.prototype.hasOwnProperty},477:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(116),i=a(r);t.default=i.default.extend({apiVersion:"internal",url:function(){return"{}/repositories/{}/branches/{}".format(this.getApiRoot(),this.get("repository").id,encodeURIComponent(this.get("name")))},initialize:function(){this.id="{}/branches/{}".format(this.get("repository").id,this.get("name"))},toJSON:function(){return{name:this.get("name")}}}),e.exports=t.default},478:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(116),i=a(r);t.default=i.default.extend({initialize:function(){this.hash=this.get("commit")?this.get("commit","hash"):null,this.branch=this.get("branch")?this.get("branch","name"):null,this.repo=this.get("repository").id},toSpecString:function(){var e=this.get("commit")?this.get("commit","hash"):null,t=this.get("branch")?this.get("branch","name"):null;return"{}:{}".format(this.get("repository").id,e||t)},toJSON:function(){return{branch:this.get("branch").toJSON(),repository:this.get("repository").toJSON()}}}),e.exports=t.default},483:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){if(!r.isSupported())throw new Error("This browser doesn't support AvatarPickerDialog.");return this.init(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=a(i),s=n(2),l=a(s),u=n(695),d=a(u),c=n(47),f=a(c),p=n(8),m=a(p);r.isSupported=function(){return d.default.isSupported()},r.prototype.defaults={dialogTitle:gettext("Upload an avatar"),dialogOptions:function(){return{dialogId:"avatar-picker-dialog",size:"small",title:this.dialogTitle,content:(0,o.default)(m.default.toHtml("avatar-upload-template",this)),submitText:gettext("Save"),isSafeContent:!0}},templateOptions:{description:gettext("JPG, GIF or PNG image"),deleteText:gettext("Delete avatar")},onCrop:o.default.noop,onDelete:o.default.noop,showDelete:!1,trigger:null},r.prototype.init=function(e){var t=this;l.default.bindAll(this,"chooseAvatar","hide","show");var n=o.default.extend(!0,{},this.defaults.templateOptions,e.templateOptions),a=o.default.extend(!0,{},this.defaults,e,n),r=a.dialogOptions();if(a.showDelete){var i=(0,o.default)('<button class="aui-button aui-button-link">{}</button>'.format(n.deleteText));i.on("click",function(){a.onDelete(),t.dialog.hide()}),r.footerSecondary=i}var s=new o.default.Deferred;return r.submitAction=function(){return s.promise().done(function(){t.chooseAvatar()})},this.dialog=new f.default(r),this.imageUploadAndCrop=new d.default(r.content,{HiDPIMultiplier:1,onCrop:a.onCrop,onImageUpload:s.resolve.bind(s)}),a.trigger&&(this.$trigger=(0,o.default)(a.trigger),this.$trigger.click(function(e){e.preventDefault(),t.show()})),this},r.prototype.chooseAvatar=function(){this.imageUploadAndCrop.crop(),this.hide()},r.prototype.hide=function(){this.dialog.hide(),this.imageUploadAndCrop.resetState()},r.prototype.show=function(){this.dialog.show()},t.default=r,e.exports=t.default},493:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!i.default.disabled){var n=i.default.get("events")||[];n.push({verb:e,data:s.default.extend(t,{published:Date.now()})}),i.default.set("events",n)}};var r=n(102),i=a(r),o=n(2),s=a(o);e.exports=t.default},500:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={email:function(e){return/^[^@\s]+@[^.@\s]+(\.[^.@\s]+)+$/.test(e)},url:function(e){return/^[^.@\s]+(\.[^.@\s]+)+$/.test(e)}},e.exports=t.default},503:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1045),i=a(r);t.default=new i.default,e.exports=t.default},670:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,a,r,i){var s="POST"===i.type,u=function(e){r.attr("src",e.avatarUrl)};l.default.extend(i,{contentType:"text/plain; charset=UTF-8",dataType:"json"}),e?f.default.loginStatus().done(function(e,t){l.default.extend(i,{headers:{"X-CSRF-TOKEN":t},xhrFields:{withCredentials:!0}}),a.loading(o.default.ajax(i),h).done(u)}):a.loading(o.default.ajax(i),h).done(u),n.toggleClass("has-avatar",s);var d=s?"Upload":"Delete";m.default.trackEvent("Avatar",t,d)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.isAtlassianId&&f.default.loginStatus().fail(function(){}),new d.default(l.default.extend({onDelete:function(){r(e.isAtlassianId,e.analyticsType,e.trigger,e.uploadIndicator,e.avatars,{type:"DELETE",url:e.endpointUrl})},onCrop:function(t){r(e.isAtlassianId,e.analyticsType,e.trigger,e.uploadIndicator,e.avatars,{data:t,type:"POST",url:e.endpointUrl})}},e))};var i=n(0),o=a(i),s=n(2),l=a(s),u=n(483),d=a(u),c=n(708),f=a(c),p=n(39),m=a(p);n(44);var h={spin:{color:"#fff",shadow:!0,radius:12,length:10,lines:10}};e.exports=t.default},690:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!r.isSupported())throw new Error("This browser doesn't support CanvasCropper.");return this.init.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=a(i),s=function(){var e=document.createElement("canvas");return"function"==typeof e.getContext&&e.getContext("2d")}();r.isSupported=function(){return s},r.prototype.defaults={outputFormat:"image/png",backgroundFillColor:void 0},r.prototype.init=function(e,t,n){return this.width=e,this.height=t||e,this.options=o.default.extend({},this.defaults,n),this.canvas=(0,o.default)("<canvas/>").attr("width",this.width).attr("height",this.height).get(0),this},r.prototype.cropToDataURI=function(e,t,n,a,r){return this.crop(e,t,n,a,r).getDataURI(this.options.outputFormat)},r.prototype.crop=function(e,t,n,a,r){var i=this.canvas.getContext("2d"),o=0,s=0,l=this.width,u=this.height;if(i.clearRect(o,s,l,u),this.options.backgroundFillColor&&(i.fillStyle=this.options.backgroundFillColor,i.fillRect(o,s,l,u)),t<0&&(o=Math.round(Math.abs(t)/a*l),t=0),n<0&&(s=Math.round(Math.abs(n)/r*u),n=0),t+a>e.naturalWidth){var d=e.naturalWidth-t;l*=d/a,a=d}if(n+r>e.naturalHeight){var c=e.naturalHeight-n;u*=c/r,r=c}return i.drawImage(e,t,n,a,r,o,s,l,u),this},r.prototype.getDataURI=function(e){return e?this.canvas.toDataURL(e):null},t.default=r,e.exports=t.default},691:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return this.init(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=a(i),s=n(2),l=a(s),u=n(301),d=a(u);o.default.extend(r.prototype,d.default.prototype),r.prototype.defaults=o.default.extend({},d.default.prototype.defaults,{uploadURL:"",uploadFieldName:"file",onUpload:o.default.noop,responseHandler:function(e,t){var n;try{n=JSON.parse((0,o.default)(e).html())}catch(e){t.reject()}n?t.resolve(n):t.reject()}}),r.prototype.states={IN_PROGRESS:"IN_PROGRESS",IDLE:"IDLE"},r.prototype.init=function(e){return l.default.bindAll(this,"createHiddenIframe","onIframeLoad","handleFiles","setStateInProgress","setStateIdle","cancelUpload"),this.options=o.default.extend({},this.defaults,e),this.$uploadIframe=this.createHiddenIframe(),this.options.cancelTrigger&&(this.$cancelTrigger=(0,o.default)(this.options.cancelTrigger),this.$cancelTrigger.click(l.default.bind(function(){this.cancelUpload()},this))),this.state=this.states.IDLE,this},r.prototype.createHiddenIframe=function(){return(0,o.default)("<iframe>").attr("name","hidden-upload-iframe").hide().appendTo(document.body).on("load",this.onIframeLoad)},r.prototype.onIframeLoad=function(e){this.state===this.states.IN_PROGRESS&&(this.requestPromise.done(this.options.onUpload).fail(this.options.onError),this.options.responseHandler(e.target.contentDocument.body,this.requestPromise))},r.prototype.handleFiles=function(e,t){if(this.state===this.states.IN_PROGRESS&&this.cancelUpload(),!this.$fileSourceElem){this.$fileSourceElem=(0,o.default)(t),this.$fileSourceElem.attr("name",this.options.uploadFieldName),this.$fileSourceElem.prop("form")||this.$fileSourceElem.wrap("<form>");var n=(0,o.default)(this.$fileSourceElem.prop("form"));n.addClass("hidden-upload-form").attr("action",this.options.uploadURL).attr("method","post").attr("enctype","multipart/form-data").attr("encoding","multipart/form-data").attr("target",this.$uploadIframe.attr("name")),this.$spinner=(0,o.default)('<div class="spinner"></div>').insertBefore(this.$fileSourceElem),o.default.isPlainObject(this.options.extraData)&&l.default.each(this.options.extraData,function(e,t){(0,o.default)('<input type="hidden">').attr("name",t).val(e).appendTo(n)})}this.$fileSourceElem.prop("form").submit(),this.requestPromise=new o.default.Deferred,this.requestPromise.always(this.setStateIdle),this.setStateInProgress()},r.prototype.setStateInProgress=function(){this.state=this.states.IN_PROGRESS,this.$spinner&&this.$spinner.spin(),this.$fileSourceElem&&this.$fileSourceElem.attr("disabled","disabled")},r.prototype.setStateIdle=function(){this.state=this.states.IDLE,this.$spinner&&this.$spinner.spinStop(),this.$fileSourceElem&&this.$fileSourceElem.removeAttr("disabled"),this.requestPromise=null},r.prototype.cancelUpload=function(){this.$uploadIframe.remove(),this.setStateIdle(),this.$uploadIframe=this.createHiddenIframe()},t.default=r,e.exports=t.default},692:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){if(!r.isSupported())throw new Error("ClientFileReader requires FileReaderAPI support");return this.init(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=a(i),s=n(2),l=a(s),u=n(301),d=a(u),c=!!(window.File&&window.FileList&&window.FileReader),f={ArrayBuffer:"readAsArrayBuffer",BinaryString:"readAsBinaryString",DataURL:"readAsDataURL",Text:"readAsText"};r.isSupported=function(){return c},o.default.extend(r.prototype,d.default.prototype),r.readMethods={ArrayBuffer:"ArrayBuffer",BinaryString:"BinaryString",DataURL:"DataURL",Text:"Text"},r.typeFilters=d.default.typeFilters,r.prototype.defaults=o.default.extend({},d.default.prototype.defaults,{readMethod:r.readMethods.DataURL,onRead:o.default.noop}),r.prototype.init=function(e){return l.default.bindAll(this,"onSuccess","readFile"),d.default.prototype.init.call(this,e),this.options.onSuccess=this.onSuccess,this},r.prototype.onSuccess=function(e){var t=l.default.has(f,this.options.readMethod)?f[this.options.readMethod]:void 0;t&&l.default.each(e,l.default.bind(function(e){var n=new FileReader;n.onload=l.default.bind(this.readFile,this,e),n[t](e)},this))},r.prototype.readFile=function(e,t){l.default.isFunction(this.options.onRead)&&this.options.onRead(t.target.result,e)},t.default=r,e.exports=t.default},693:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return this.init.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=a(i),s=n(2),l=a(s);r.prototype.getDefaults=function(){return{activeDropTargetClass:"active-drop-target",uploadPrompt:gettext("Drag a file here to upload"),clientFileHandler:null}},r.prototype.init=function(e,t){l.default.bindAll(this,"onDragOver","onDragEnd","onDrop"),this.$target=(0,o.default)(e),this.options=o.default.extend({},this.getDefaults(),t),this.$target.attr("data-upload-prompt",this.options.uploadPrompt),this.$target.on("dragover",this.onDragOver),this.$target.on("dragleave",this.onDragEnd),this.$target.on("dragend",this.onDragEnd),this.$target.on("drop",this.onDrop)},r.prototype.onDragOver=function(e){e.preventDefault(),this.$target.addClass(this.options.activeDropTargetClass)},r.prototype.onDragEnd=function(e){e.preventDefault(),this.$target.removeClass(this.options.activeDropTargetClass)},r.prototype.onDrop=function(e){e.preventDefault(),e.originalEvent.preventDefault(),this.$target.removeClass(this.options.activeDropTargetClass),this.options.clientFileHandler&&this.options.clientFileHandler.handleFiles(e.originalEvent.dataTransfer.files,e.originalEvent.target)},t.default=r,e.exports=t.default},694:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){this.init.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),o=a(i),s=n(0),l=a(s),u=n(2),d=a(u),c=n(8),f=a(c),p=n(739),m=a(p);r.scaleModes={fill:"fill",contain:"contain",containAndFill:"containAndFill"},r.zoomModes={localZoom:"localZoom",imageZoom:"imageZoom"},r.prototype.defaults={initialScaleMode:r.scaleModes.containAndFill,zoomMode:r.zoomModes.localZoom,emptyClass:"empty",scaleMax:1},r.prototype.init=function(e,t){this.$container=e,this.$imageView=this.$container.find(".image-explorer-image-view"),this.$sourceImage=this.$container.find(".image-explorer-source"),this.$mask=this.$container.find(".image-explorer-mask"),this.$dragDelegate=this.$container.find(".image-explorer-drag-delegate"),this.$scaleSlider=this.$container.find(".image-explorer-scale-slider"),this.options=l.default.extend({},this.defaults,t),this.imageProperties={},d.default.bindAll(this,"getImageSrc","setImageSrc","initImage","initDragDelegate","initScaleSlider","setInitialScale","getFillScale","getContainedScale","getCircularContainedScale","sliderValToScale","scaleToSliderVal","updateImageScale","resetImagePosition","resetScaleSlider","toggleEmpty","get$ImageView","get$SourceImage","get$Mask","get$DragDelegate","getMaskedImageProperties","showError","clearError","hasValidImage","_resetFromError","_removeError"),this.toggleEmpty(!0),this.$sourceImage[0].naturalWidth&&(this.toggleEmpty(!1),this.initImage({target:this.$sourceImage[0]})),this.$sourceImage.on("load",this.initImage),this.initDragDelegate(),this.initScaleSlider()},r.prototype.getImageSrc=function(){return this.$sourceImage?this.$sourceImage.attr("src"):void 0},r.prototype.setImageSrc=function(e){this.$sourceImage&&this.$sourceImage.attr("src","").attr("src",e)},r.prototype.initImage=function(e){var t=e.target;this.imageProperties.naturalWidth=t.naturalWidth,this.imageProperties.naturalHeight=t.naturalHeight,this._removeError(),this.toggleEmpty(!1),this.setInitialScale()},r.prototype.initDragDelegate=function(){var e,t=(0,m.default)(this.$dragDelegate[0]);t.on("start",function(){e=this.$sourceImage.offset()}.bind(this)),t.on("move",function(t,n,a){this.$sourceImage.offset({top:e.top+a.y,left:e.left+a.x})}.bind(this))},r.prototype.initScaleSlider=function(){this.$scaleSlider.on("change",d.default.bind(function(e){this.updateImageScale(this.sliderValToScale(e.target.value))},this))},r.prototype.setInitialScale=function(){var e=this.$mask.width(),t=this.$mask.height(),n=this.imageProperties.naturalWidth,a=this.imageProperties.naturalHeight,i=1;switch(this.minScale=1,this.options.initialScaleMode){case r.scaleModes.fill:this.minScale=i=this.getFillScale(n,a,e,t);break;case r.scaleModes.contain:this.$mask.hasClass("circle-mask")?this.minScale=i=this.getCircularContainedScale(n,a,e/2):this.minScale=i=this.getContainedScale(n,a,e,t);break;case r.scaleModes.containAndFill:this.$mask.hasClass("circle-mask")?this.minScale=this.getCircularContainedScale(n,a,e/2):this.minScale=this.getContainedScale(n,a,e,t),i=this.getFillScale(n,a,e,t)}this.maxScale=Math.max(i,this.options.scaleMax),this.resetScaleSlider(this.scaleToSliderVal(i)),this.updateImageScale(i,r.zoomModes.imageZoom),this.resetImagePosition()},r.prototype.getFillScale=function(e,t,n,a){var r=n/e,i=a/t;return Math.max(r,i)},r.prototype.getContainedScale=function(e,t,n,a){var r=n/e,i=a/t;return Math.min(r,i)},r.prototype.getCircularContainedScale=function(e,t,n){var a=Math.atan(t/e),r=Math.cos(a)*n*2;return r/e},r.prototype.sliderValToScale=function(e){var t=e/(this.$scaleSlider.attr("max")-this.$scaleSlider.attr("min"));return this.minScale+t*(this.maxScale-this.minScale)},r.prototype.scaleToSliderVal=function(e){var t=(e-this.minScale)/(this.maxScale-this.minScale);return t*(this.$scaleSlider.attr("max")-this.$scaleSlider.attr("min"))},r.prototype.updateImageScale=function(e,t){var n,a,i=Math.round(e*this.imageProperties.naturalWidth),o=Math.round(e*this.imageProperties.naturalHeight);switch(t=t||this.options.zoomMode){case r.zoomModes.imageZoom:n=-1*i/2,a=-1*o/2;break;case r.zoomModes.localZoom:var s=this.$sourceImage.width(),l=this.$sourceImage.height(),u=parseInt(this.$sourceImage.css("margin-left"),10),d=parseInt(this.$sourceImage.css("margin-top"),10),c=this.$sourceImage.position(),f=this.$imageView.width()/2,p=this.$imageView.height()/2,m=f-c.left-u,h=p-c.top-d,g=m/s*i,v=h/l*o;n=f-c.left-g,a=p-c.top-v}this.$sourceImage.width(i).height(o).css({"margin-left":Math.round(n)+"px","margin-top":Math.round(a)+"px"})},r.prototype.resetImagePosition=function(){this.$sourceImage.css({top:"50%",left:"50%"})},r.prototype.resetScaleSlider=function(e){this.$scaleSlider.val(e).removeClass("disabled").removeAttr("disabled")},r.prototype.toggleEmpty=function(e){this.$container.toggleClass(this.options.emptyClass,e)},r.prototype.get$ImageView=function(){return this.$imageView},r.prototype.get$SourceImage=function(){return this.$sourceImage},r.prototype.get$Mask=function(){return this.$mask},r.prototype.get$DragDelegate=function(){return this.$dragDelegate},r.prototype.getMaskedImageProperties=function(){var e=this.$sourceImage.width()/this.imageProperties.naturalWidth,t=this.$sourceImage.height()/this.imageProperties.naturalHeight,n=this.$mask.position(),a=this.$sourceImage.position();return n.top+=parseInt(this.$mask.css("margin-top"),10),n.left+=parseInt(this.$mask.css("margin-left"),10),a.top+=parseInt(this.$sourceImage.css("margin-top"),10),a.left+=parseInt(this.$sourceImage.css("margin-left"),10),{maskedAreaImageX:Math.round((n.left-a.left)/e),maskedAreaImageY:Math.round((n.top-a.top)/t),maskedAreaWidth:Math.round(this.$mask.width()/e),maskedAreaHeight:Math.round(this.$mask.height()/t)}},r.prototype.showError=function(e,t){this._removeError(),this.toggleEmpty(!0),this.$container.addClass("error");var n=(0,l.default)(f.default.toHtml("avatar-error-template",{title:e,contents:t}));n.appendTo(this.$imageView).css({"margin-top":-1*n.outerHeight()/2}),n.on("messageClose",this._resetFromError),o.default.messages.setup()},r.prototype.clearError=function(){this._removeError(),this._resetFromError()},r.prototype.hasValidImage=function(){return!(!this.getImageSrc()||!this.$sourceImage.prop("naturalWidth"))},r.prototype._resetFromError=function(){var e=this.hasValidImage();this.toggleEmpty(!e),this.$container.removeClass("error"),d.default.isFunction(this.options.onErrorReset)&&this.options.onErrorReset(e?this.getImageSrc():void 0)},r.prototype._removeError=function(){this.$imageView.find(".aui-message.error").remove()},t.default=r,e.exports=t.default},695:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!r.isSupported())throw new Error("This browser doesn't support ImageUploadAndCrop.");this.init.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),o=a(i),s=n(0),l=a(s),u=n(2),d=a(u),c=n(694),f=a(c),p=n(692),m=a(p),h=n(693),g=a(h),v=n(691),y=a(v),b=n(696),_=a(b),w=n(690),x=a(w),E=n(400),T=a(E);r.isSupported=function(){return x.default.isSupported()},r.prototype.defaults={HiDPIMultiplier:2,dragDropUploadPrompt:gettext("Drag and drop image here"),onImageUpload:l.default.noop,onImageUploadError:l.default.noop,onCrop:l.default.noop,outputFormat:"image/png",fallbackUploadOptions:{},initialScaleMode:f.default.scaleModes.containAndFill,scaleMax:1,fileSizeLimit:5242880,maxImageDimension:2048},r.prototype.init=function(e,t){if(this.options=l.default.extend({},this.defaults,t),this.$container=e,d.default.bindAll(this,"crop","resetState","_onFileProcessed","setImageSrc","validateImageResolution","_onFilesError","_onFileError","_resetFileUploadField","_onErrorReset"),this.imageExplorer=new f.default(this.$container.find(".image-explorer-container"),{initialScaleMode:this.options.initialScaleMode,scaleMax:this.options.scaleMax,onErrorReset:this._onErrorReset}),m.default.isSupported())this.clientFileReader=new m.default({onRead:this._onFileProcessed,onError:this._onFilesError,fileTypeFilter:m.default.typeFilters.imageWeb,fileCountLimit:1,fileSizeLimit:this.options.fileSizeLimit}),this.dragDropFileTarget=new g.default(this.imageExplorer.get$ImageView(),{uploadPrompt:this.options.dragDropUploadPrompt,clientFileHandler:this.clientFileReader});else{this.$container.addClass("filereader-unsupported");var n=l.default.extend({onUpload:this._onFileProcessed,onError:this._onFileError},this.options.fallbackUploadOptions);this.clientFileReader=new y.default(n)}this.uploadIntercepter=new _.default(this.$container.find(".image-upload-field"),{replacementEl:this.$container.find(".image-upload-field-replacement"),clientFileHandler:this.clientFileReader});var a=this.imageExplorer.get$Mask();this.canvasCroppper=new x.default(a.width()*this.options.HiDPIMultiplier,a.height()*this.options.HiDPIMultiplier,{outputFormat:this.options.outputFormat}),this.options.cropButton&&(0,l.default)(this.options.cropButton).click(this.crop)},r.prototype.crop=function(){var e=this.imageExplorer.getMaskedImageProperties(),t=this.canvasCroppper.cropToDataURI(this.imageExplorer.get$SourceImage()[0],e.maskedAreaImageX,e.maskedAreaImageY,e.maskedAreaWidth,e.maskedAreaHeight);d.default.isFunction(this.options.onCrop)&&this.options.onCrop(t)},r.prototype.resetState=function(){this.imageExplorer.clearError(),this._resetFileUploadField()},r.prototype._onFileProcessed=function(e){if(e)if(isNaN(this.options.maxImageDimension))this.setImageSrc(e);else{var t=this.validateImageResolution(e);t.done(d.default.bind(function(t,n){this.setImageSrc(e)},this)).fail(d.default.bind(function(e,t){var n=gettext("The selected image size is %(image_width)spx * %(image_height)spx. The maximum allowed image size is %(max_dimension)spx * %(max_dimension)spx.");this._onFileError(interpolate(n,{image_width:e,image_height:t,max_dimension:this.options.maxImageDimension},!0))},this))}else this._onFileError()},r.prototype.setImageSrc=function(e){this.imageExplorer.setImageSrc(e),d.default.isFunction(this.options.onImageUpload)&&this.options.onImageUpload(e),this._resetFileUploadField()},r.prototype.validateImageResolution=function(e){var t=new l.default.Deferred,n=new Image,a=this;return n.onload=function(){this.naturalWidth>a.options.maxImageDimension||this.naturalHeight>a.options.maxImageDimension?t.reject(this.naturalWidth,this.naturalHeight):t.resolve(this.naturalWidth,this.naturalHeight)},n.src=e,t},r.prototype._onFilesError=function(e){if(e&&e.bySize&&e.bySize.length){var t=d.default.first(e.bySize),n=gettext('File "%(filename)s" is %(file_size)s which is larger than the maximum allowed size of %(size_limit)s');this._onFileError(o.default.escapeHtml(interpolate(n,{filename:T.default.abbreviateText(t.name,50),file_size:T.default.formatSizeInBytes(t.size),size_limit:T.default.formatSizeInBytes(this.options.fileSizeLimit)},!0)))}else this._onFileError()},r.prototype._onFileError=function(e){var t=gettext("There was an error uploading your image"),n=e||gettext("Please check that your file is a valid image and try again.");this.imageExplorer.showError(t,n),this._resetFileUploadField(),d.default.isFunction(this.options.onImageUploadError)&&this.options.onImageUploadError(e)},r.prototype._resetFileUploadField=function(){var e=this.$container.find("#image-upload-and-crop-upload-field").prop("form");e&&e.reset()},r.prototype._onErrorReset=function(e){e&&d.default.isFunction(this.options.onImageUpload)&&this.options.onImageUpload(e)},t.default=r,e.exports=t.default},696:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return this.init.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=a(i),s=n(2),l=a(s),u=n(92),d=a(u);r.prototype.defaults={replacementEl:void 0,clientFileHandler:null},r.prototype.init=function(e,t){l.default.bindAll(this,"onSelectFile","onReplacementClick"),this.$el=(0,o.default)(e),this.options=o.default.extend({},this.defaults,t),this.$el.on("change",this.onSelectFile),this.options.replacementEl&&(this.$replacement=(0,o.default)(this.options.replacementEl),this.$el.hide(),"Explorer"===d.default.browser?this.$replacement.is("label")||(this.$replacement.hide(),this.$el.show()):this.$replacement.on("click",this.onReplacementClick))},r.prototype.onSelectFile=function(e){(0,o.default)(e.target).val()&&this.options.clientFileHandler&&this.options.clientFileHandler.handleFiles(e.target.files,this.$el)},r.prototype.onReplacementClick=function(e){e.preventDefault(),this.$el.click()},r.prototype.destroy=function(){this.$el.off("change",this.onSelectFile),this.$replacement.off("click",this.onReplacementClick)},t.default=r,e.exports=t.default},707:function(e,t,n){"use strict"},708:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(){d=o.default.ajax({type:"GET",url:u.loginStatusUrl,xhrFields:{withCredentials:!0}}),c=new o.default.Deferred,d.done(function(e,t,n){if(200===n.status){var a=n.getResponseHeader("X-CSRF-TOKEN");c.resolve(e,a)}else c.reject()}).fail(function(e,t,n){c.reject()})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=a(i),s=n(2),l=a(s),u=(0,o.default)(document.body).data("atlassianId")||{},d=null,c=null;t.default=l.default.extend(u,{loginStatus:function(){return null===d&&r(),c.promise()}}),e.exports=t.default},710:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=a(r),o=(0,i.default)(document.body).attr("data-no-avatar-image");t.default=o,e.exports=t.default},726:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=new Date,n=new Date(e);return t.getTime()-n.getTime()>7*u?(0,o.default)(n,"mmm d yyyy"):(0,l.default)(n)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(434),o=a(i),s=n(959),l=a(s),u=864e5;e.exports=t.default},739:function(e,t,n){function a(e,t,n){return function(a){e(t,a,n["_"+a])}}function r(e,t){if(!(this instanceof r))return new r(e,t);t=t||{},d.call(this),this.enabled=!0,this.element=e,this._dragging=null,this._touchOnly=!1;var n=t.touch,i=t.parent||document,o=["mousedown"],c=["mousemove","mouseup"];this._mousedown=s.bind(this,null),this._mousemove=l.bind(this,null),this._mouseup=u.bind(this,null),n&&(o.push("touchstart"),c.push("touchmove","touchend"),this._touchstart=s.bind(this,"targetTouches"),this._touchmove=l.bind(this,"targetTouches"),this._touchend=u.bind(this,"changedTouches")),o.forEach(a(f.on,e,this)),c.forEach(a(f.on,i,this)),this._targets=o,this._parentTargets=c,this._parent=i}function i(){return{x:0,y:0}}function o(e,t){var n=i();return n.x=e.x-t.x,n.y=e.y-t.y,n}function s(e,t){!this.enabled||!e&&this._touchOnly||(e&&(this._touchOnly=!0),null===this._dragging&&(this._dragging=!!e||t.button,this._emit("start",t,e)));
}function l(e,t){if(this.enabled&&(e||!this._touchOnly)){var n=!!e||t.button;this._dragging===n&&this._emit("move",t,e)}}function u(e,t){if(this.enabled&&(e||!this._touchOnly)){var n=!!e||t.button;this._dragging===n&&(this._dragging=null,this._emit("end",t,e))}}var d=n(211).EventEmitter,c=n(123),f=n(769),p=n(905),m=n(476);c(r,d),r.prototype._emit=function(e,t,n){var a;n&&t[n]&&(a=t[n][0]),a=m(a,{clientRect:this.element.getBoundingClientRect()});var r=p(t,a);"start"===e&&(this._start=r);var i=o(r,this._start);this.emit(e,t,r,i)},r.prototype.dispose=function(){this._targets.forEach(a(f.off,this.element,this)),this._parentTargets.forEach(a(f.off,this._parent,this)),this.element=null},e.exports=r},769:function(e,t,n){var a=n(980),r=function(e,t,n,a){return e.addEventListener(t,n,a||!1)},i=function(e,t,n,a){return e.removeEventListener(t,n,a||!1)},o=function(e,t,n,a){function o(r){i(e,t,o,a),n(r)}r(e,t,o,a)},s=function(e,t,n){var r=a(t,n);e.dispatchEvent(r)};document.addEventListener||(r=function(e,t,n){return e.attachEvent("on"+t,n)}),document.removeEventListener||(i=function(e,t,n){return e.detachEvent("on"+t,n)}),document.dispatchEvent||(s=function(e,t,n){var r=a(t,n);return e.fireEvent("on"+r.type,r)}),e.exports={on:r,off:i,once:o,emit:s}},905:function(e,t){function n(e){if(e===document.body||e===window)a.left=0,a.top=0;else{var t=e.getBoundingClientRect();a.left=t.left,a.top=t.top}return a}e.exports=function(e,t){e=e||window.event;var a=e.currentTarget||e.srcElement,r=t&&t.clientRect||n(a),i=t&&t.clientX,o=t&&t.clientY;return i="number"==typeof i?i:e.clientX,o="number"==typeof o?o:e.clientY,{x:i-r.left,y:o-r.top}};var a={left:0,top:0}},959:function(e,t){var n=function(e){function t(t,n){!n&&(n=(new Date).getTime()),n instanceof Date&&(n=n.getTime()),t instanceof Date&&(t=t.getTime());var a,r,i,o=n-t;for(r=-1,i=u.length;++r<i;)if(a=u[r],o<a[0])return a[2]==e?a[1]:Math.round(o/a[2])+" "+a[1]}var n=1e3,a=60*n,r=60*a,i=24*r,o=7*i,s=365*i,l=s/12,u=[[.7*a,"just now"],[1.5*a,"a minute ago"],[60*a,"minutes ago",a],[1.5*r,"an hour ago"],[i,"hours ago",r],[2*i,"yesterday"],[7*i,"days ago",i],[1.5*o,"a week ago"],[l,"weeks ago",o],[1.5*l,"a month ago"],[s,"months ago",l],[1.5*s,"a year ago"],[Number.MAX_VALUE,"years ago",s]];return t}();"undefined"!=typeof e&&e.exports&&(e.exports=n)},980:function(e,t,n){function a(e,t){return e.ctrlKey==(t.ctrlKey||!1)&&e.altKey==(t.altKey||!1)&&e.shiftKey==(t.shiftKey||!1)&&e.metaKey==(t.metaKey||!1)&&e.keyCode==(t.keyCode||0)&&e.charCode==(t.charCode||0)||(e=document.createEvent("Event"),e.initEvent(t.type,t.bubbles,t.cancelable),e.ctrlKey=t.ctrlKey||!1,e.altKey=t.altKey||!1,e.shiftKey=t.shiftKey||!1,e.metaKey=t.metaKey||!1,e.keyCode=t.keyCode||0,e.charCode=t.charCode||0),e}var r=(window,document||{}),i=(r.documentElement||{},!0);try{r.createEvent("KeyEvents")}catch(e){i=!1}var o=function(e,t){t=t||{};var n=d(e),o=n;"KeyboardEvent"===n&&i&&(n="KeyEvents",o="KeyEvent");var s=r.createEvent(n),u="init"+o,c="function"==typeof s[u]?u:"initEvent",f=l[c],p=[],m={};t.type=e;for(var h=0;h<f.length;++h){var g=f[h],v=t[g];void 0===v&&(v=s[g]),m[g]=!0,p.push(v)}s[c].apply(s,p),"KeyboardEvent"===n&&(s=a(s,t));for(var g in t)m[g]||(s[g]=t[g]);return s},s=function(e,t){t=t||{};var n=r.createEventObject();n.type=e;for(var a in t)void 0!==t[a]&&(n[a]=t[a]);return n};e.exports=r.createEvent?o:s;var l=n(981),u=n(982),d=function(){var e={};for(var t in u)for(var n=u[t],a=0;a<n.length;a++)e[n[a]]=t;return function(t){return e[t]||"Event"}}()},981:function(e,t){e.exports={initEvent:["type","bubbles","cancelable"],initUIEvent:["type","bubbles","cancelable","view","detail"],initMouseEvent:["type","bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget"],initMutationEvent:["type","bubbles","cancelable","relatedNode","prevValue","newValue","attrName","attrChange"],initKeyboardEvent:["type","bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"],initKeyEvent:["type","bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"]}},982:function(e,t){e.exports={MouseEvent:["click","mousedown","mouseup","mouseover","mousemove","mouseout"],KeyboardEvent:["keydown","keyup","keypress"],MutationEvent:["DOMSubtreeModified","DOMNodeInserted","DOMNodeRemoved","DOMNodeRemovedFromDocument","DOMNodeInsertedIntoDocument","DOMAttrModified","DOMCharacterDataModified"],HTMLEvents:["load","unload","abort","error","select","change","submit","reset","focus","blur","resize","scroll"],UIEvent:["DOMFocusIn","DOMFocusOut","DOMActivate"]}},986:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=a(r),o=n(116),s=a(o),l=n(477),u=a(l),d=n(292),c=a(d);t.default=s.default.extend({apiVersion:"internal",url:function(){return"{}/repositories/{}/oecommits/{}".format(this.getApiRoot(),this.get("repository").id,this.get("hash"))},parse:function(e){return e.repository=c.default.load(e.repository.full_name),e},save:function(){return this.has("timestamp")||this.set("timestamp",new Date),s.default.prototype.save.apply(this,arguments)},merge:function(e,t){return i.default.ajax({url:"/!api/{}/repositories/{}/merge".format(this.getApiRoot(),this.get("repository").id),type:"POST",data:JSON.stringify({parents:[this.get("hash"),e],message:t}),dataType:"json",contentType:"application/json; charset=utf-8"})},addFile:function(e){var t=this.get("files")||[];return t.push(e),this.set("files",t),this},setBranch:function(e){return this.set({branch:new u.default({repository:this.get("repository"),name:e})}),this},toJSON:function(){return{branch:this.get("branch","name"),files:this.get("files"),message:this.get("message"),parents:this.get("parents"),repository:this.get("repository").toJSON(),timestamp:this.get("timestamp"),transient:!!this.get("transient")}}}),e.exports=t.default},987:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=a(r),o=n(2),s=a(o),l=n(116),u=a(l),d=n(175),c=a(d),f=n(986),p=a(f),m=n(477),h=a(m),g=n(478),v=a(g),y=n(292),b=a(y),_=n(503),w=a(_),x=n(108),E=a(x);t.default=u.default.extend({apiVersion:2,idAttribute:"global_id",url:function(){return"{}/repositories/{}/pullrequests/{}".format(this.getApiRoot(),this.get("destination","repository").id,this.get("local_id"))},parse:function(e){return e.local_id=e.id,e.closed_by&&(e.closed_by=w.default.load(e.closed_by.username)),e.user=w.default.load(e.author.username),s.default.each(["destination","source"],function(t){if(null===e[t].repository)e[t]=null;else{var n=b.default.load(e[t].repository.full_name);e[t]=new v.default({repository:n,commit:new p.default({repository:n,hash:e[t].commit.hash}),branch:new h.default({repository:n,name:e[t].branch.name})})}}),e},diff:function(){var e=new i.default.Deferred;return this._revspec?e.resolve(this._revspec.diff):this.get("source","repository").revspec(this.get("source","commit","hash"),this.get("destination","repository"),this.get("destination","commit","hash")).done(function(t){this._revspec=t,e.resolve(this._revspec.diff)}.bind(this)),e},mergebase:function(){var e=new i.default.Deferred;return this._revspec?e.resolve(this._revspec.mergebase.hash):this.get("source","repository").revspec(this.get("source","commit","hash"),this.get("destination","repository"),this.get("destination","commit","hash")).done(function(t){this._revspec=t,e.resolve(this._revspec.mergebase.hash)}.bind(this)),e},sourceDiff:function(){return this.get("source","repository").twoway(this.get("source","commit","hash"),this.get("destination","repository"),this.get("destination","commit","hash"))},destDiff:function(){var e=new i.default.Deferred;return this.mergebase().done(function(t){this.get("destination","repository").revspec(this.get("destination","commit","hash"),this.get("source","repository"),t).done(function(t){e.resolve(t.diff)})}.bind(this)),e},getComments:function(){var e=new i.default.Deferred;return i.default.ajax({url:"{}/repositories/{}/pullrequests/{}/comments".format(c.default[1],this.get("destination","repository").id,this.get("local_id")),type:"GET",dataType:"json"}).done(function(t){e.resolve(t)}).fail(function(){e.reject()}),e},toJSON:function(){return{source:this.get("source").toJSON(),destination:this.get("destination").toJSON(),title:this.get("title"),description:this.get("description"),close_source_branch:!!this.get("close_source_branch"),reviewers:s.default.map(this.get("reviewers"),function(e){return{username:e}})}},updateRef:function(){var e=new i.default.Deferred;return i.default.ajax({url:"/{}/pull-requests/update/{}".format(this.get("destination","repository").id,this.get("local_id")),type:"POST",data:{_quick_update:1},dataType:"json"}).done(function(t){t.errors?e.reject():t.result?e.resolve(t.result):setTimeout(function(){(0,E.default)(t.url,{deferred:e})},1e3)}).fail(e.reject),e.promise()},toRevSpec:function(){return"{}..{}".format(this.get("source").toSpecString(),this.get("destination").toSpecString())}}),e.exports=t.default},990:function(e,t,n){"use strict";var a=a||{};a.EXTENSION_ID="kmendfapggjehodndflmmgagdbamhnfd",a.MessageTypes={U2F_REGISTER_REQUEST:"u2f_register_request",U2F_SIGN_REQUEST:"u2f_sign_request",U2F_REGISTER_RESPONSE:"u2f_register_response",U2F_SIGN_RESPONSE:"u2f_sign_response"},a.ErrorCodes={OK:0,OTHER_ERROR:1,BAD_REQUEST:2,CONFIGURATION_UNSUPPORTED:3,DEVICE_INELIGIBLE:4,TIMEOUT:5},a.Request,a.Response,a.Error,a.SignRequest,a.SignResponse,a.RegisterRequest,a.RegisterResponse,a.getMessagePort=function(e){if("undefined"!=typeof chrome&&chrome.runtime){var t={type:a.MessageTypes.U2F_SIGN_REQUEST,signRequests:[]};chrome.runtime.sendMessage(a.EXTENSION_ID,t,function(){chrome.runtime.lastError?a.getIframePort_(e):a.getChromeRuntimePort_(e)})}else a.isAndroidChrome_()?a.getAuthenticatorPort_(e):a.getIframePort_(e)},a.isAndroidChrome_=function(){var e=navigator.userAgent;return e.indexOf("Chrome")!=-1&&e.indexOf("Android")!=-1},a.getChromeRuntimePort_=function(e){var t=chrome.runtime.connect(a.EXTENSION_ID,{includeTlsChannelId:!0});setTimeout(function(){e(new a.WrappedChromeRuntimePort_(t))},0)},a.getAuthenticatorPort_=function(e){setTimeout(function(){e(new a.WrappedAuthenticatorPort_)},0)},a.WrappedChromeRuntimePort_=function(e){this.port_=e},a.WrappedChromeRuntimePort_.prototype.formatSignRequest_=function(e,t,n){return{type:a.MessageTypes.U2F_SIGN_REQUEST,signRequests:e,timeoutSeconds:t,requestId:n}},a.WrappedChromeRuntimePort_.prototype.formatRegisterRequest_=function(e,t,n,r){return{type:a.MessageTypes.U2F_REGISTER_REQUEST,signRequests:e,registerRequests:t,timeoutSeconds:n,requestId:r}},a.WrappedChromeRuntimePort_.prototype.postMessage=function(e){this.port_.postMessage(e)},a.WrappedChromeRuntimePort_.prototype.addEventListener=function(e,t){var n=e.toLowerCase();"message"==n||"onmessage"==n?this.port_.onMessage.addListener(function(e){t({data:e})}):console.error("WrappedChromeRuntimePort only supports onMessage")},a.WrappedAuthenticatorPort_=function(){this.requestId_=-1,this.requestObject_=null},a.WrappedAuthenticatorPort_.prototype.postMessage=function(e){var t=e;document.location=t},a.WrappedAuthenticatorPort_.prototype.addEventListener=function(e,t){var n=e.toLowerCase();if("message"==n){var a=this;window.addEventListener("message",a.onRequestUpdate_.bind(a,t),!1)}else console.error("WrappedAuthenticatorPort only supports message")},a.WrappedAuthenticatorPort_.prototype.onRequestUpdate_=function(e,t){var n=JSON.parse(t.data),a=(n.intentURL,n.errorCode,null);n.hasOwnProperty("data")&&(a=JSON.parse(n.data),a.requestId=this.requestId_),a=this.doResponseFixups_(a),e({data:a})},a.WrappedAuthenticatorPort_.prototype.doResponseFixups_=function(e){if(e.hasOwnProperty("responseData"))return e;if(this.requestObject_.type!=a.MessageTypes.U2F_SIGN_REQUEST)return{type:a.MessageTypes.U2F_REGISTER_RESPONSE,responseData:{errorCode:a.ErrorCodes.OTHER_ERROR,errorMessage:"Internal error: invalid response from Authenticator"}};var t=e.challenge;if("undefined"!=typeof t){for(var n=(4-t.length%4)%4,r=0;r<n;r++)t+="=";t=t.replace(/_/g,"/").replace(/-/g,"+");for(var i=JSON.parse(atob(t)),o=(i.challenge,this.requestObject_.signData),s=null,r=0;r<o.length;r++){var i=o[r];if(i.keyHandle==e.keyHandle){s=i;break}}}var l={errorCode:e.resultCode,keyHandle:e.keyHandle,signatureData:e.signature,clientData:t};return{type:a.MessageTypes.U2F_SIGN_RESPONSE,responseData:l,requestId:e.requestId}},a.WrappedAuthenticatorPort_.INTENT_URL_BASE_="intent:#Intent;action=com.google.android.apps.authenticator.AUTHENTICATE",a.WrappedAuthenticatorPort_.prototype.formatSignRequest_=function(e,t,n){if(!e||0==e.length)return null;this.requestId_=n,this.requestObject_={type:a.MessageTypes.U2F_SIGN_REQUEST,signData:e,requestId:n,timeout:t};var r=e[0].appId,i=a.WrappedAuthenticatorPort_.INTENT_URL_BASE_+";S.appId="+encodeURIComponent(r)+";S.eventId="+n+";S.challenges="+encodeURIComponent(JSON.stringify(this.getBrowserDataList_(e)))+";end";return i},a.WrappedAuthenticatorPort_.prototype.getBrowserDataList_=function(e){return e.map(function(e){var t={typ:"navigator.id.getAssertion",challenge:e.challenge},n={challenge:t,keyHandle:e.keyHandle};return n})},a.WrappedAuthenticatorPort_.prototype.formatRegisterRequest_=function(e,t,n,r){if(!t||0==t.length)return null;for(var i=t[0].appId,o=[],s=0;s<t.length;s++){var l={challenge:t[s].challenge,version:t[s].version};t[s].appId!=i&&(l.appId=t[s].appId),o.push(l)}var u=[];if(e)for(s=0;s<e.length;s++){var d={keyHandle:e[s].keyHandle,version:e[s].version};e[s].appId!=i&&(d.appId=e[s].appId),u.push(d)}var c={type:a.MessageTypes.U2F_REGISTER_REQUEST,appId:i,registerRequests:o,registeredKeys:u,requestId:r,timeoutSeconds:n},f=a.WrappedAuthenticatorPort_.INTENT_URL_BASE_+";S.request="+encodeURIComponent(JSON.stringify(c))+";end";return this.requestId_=r,f},a.getIframePort_=function(e){var t="chrome-extension://"+a.EXTENSION_ID,n=document.createElement("iframe");n.src=t+"/u2f-comms.html",n.setAttribute("style","display:none"),document.body.appendChild(n);var r=new MessageChannel,i=function(t){"ready"==t.data?(r.port1.removeEventListener("message",i),e(r.port1)):console.error('First event on iframe port was not "ready"')};r.port1.addEventListener("message",i),r.port1.start(),n.addEventListener("load",function(){n.contentWindow.postMessage("init",t,[r.port2])})},a.EXTENSION_TIMEOUT_SEC=30,a.port_=null,a.waitingForPort_=[],a.reqCounter_=0,a.callbackMap_={},a.getPortSingleton_=function(e){a.port_?e(a.port_):(0==a.waitingForPort_.length&&a.getMessagePort(function(e){for(a.port_=e,a.port_.addEventListener("message",a.responseHandler_);a.waitingForPort_.length;)a.waitingForPort_.shift()(a.port_)}),a.waitingForPort_.push(e))},a.responseHandler_=function(e){var t=e.data,n=t.requestId;if(!n||!a.callbackMap_[n])return void console.error("Unknown or missing requestId in response.");var r=a.callbackMap_[n];delete a.callbackMap_[n],r(t.responseData)},a.sign=function(e,t,n){a.getPortSingleton_(function(r){var i=++a.reqCounter_;a.callbackMap_[i]=t;var o="undefined"!=typeof n?n:a.EXTENSION_TIMEOUT_SEC,s=r.formatSignRequest_(e,o,i);r.postMessage(s)})},a.register=function(e,t,n,r){a.getPortSingleton_(function(i){var o=++a.reqCounter_;a.callbackMap_[o]=n;var s="undefined"!=typeof r?r:a.EXTENSION_TIMEOUT_SEC,l=i.formatRegisterRequest_(t,e,s,o);i.postMessage(l)})},e.exports=a},991:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){return e.find(t.map(function(e){return'[data-scope="'+e+'"]'}).join(", "))}function o(e){return e.find("input[name=scope]").map(function(e,t){return t.checked?t.value:void 0}).get()}function s(e,t){var n=[],a=[];u.default.each(t,function(t,o){var s=i(e,[o]);if(s.is(":checked")){var l;(l=n).push.apply(l,r(t));var u=i(e,t);u.prop({disabled:!0,checked:!0})}else{var d;(d=a).push.apply(d,r(t))}}),n=u.default.uniq(n),a=u.default.uniq(a);var o=a.filter(function(e){return!u.default.contains(n,e)}),s=i(e,o);s.prop({disabled:!1})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.on("change","[data-scope]",function(t){s(e,f)}),s(e,f);var t=o(e);e.on("submit",this,function(n){var a=this,r=o(e),i=!u.default.isEqual(t.sort(),r.sort()),s="undefined"!=typeof e.data("has-explicit-scopes");s&&i&&(n.preventDefault(),(0,c.default)({title:gettext("Expiration of access tokens"),content:gettext("Because the permissions for this consumer are changing, all associated access tokens will expire. This will require users to re-authorize your application. Please confirm if you’d like to continue.")}).then(function(){a.submit()}))})};var l=n(2),u=a(l),d=n(54),c=a(d),f={account:["email"],"account:write":["email","account"],"team:write":["team"],project:["repository"],"project:write":["repository","project"],"repository:write":["repository"],"pipeline:variable":["pipeline:write"],"pipeline:write":["pipeline"],pullrequest:["repository"],"pullrequest:write":["repository","repository:write","pullrequest"],"issue:write":["issue"],"snippet:write":["snippet"]};e.exports=t.default},992:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=a(r);t.default=(0,i.default)("#groups").attr("data-target-user"),e.exports=t.default},993:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.FORM_KEY="ip_form"},994:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SaveTheme=t.LoadThemes=t.SELECT_THEME=void 0;var r=n(226),i=a(r),o=function(e){return"account-admin/theme/"+e};t.SELECT_THEME=o("SELECT_THEME"),t.LoadThemes=(0,i.default)(o("LOAD_THEMES")),t.SaveTheme=(0,i.default)(o("SAVE_THEME"))},995:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.defaultTheme={key:"default",name:gettext("Default")}}},[3241]);
//# sourceMappingURL=account-admin.js.map